(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-370a"],{IQZy:function(e,t,a){},MPjy:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a("X3IP");function o(e){"209"==e.code?(Object(r.Message)({message:"您权限过期,请重新登录",type:"error",duration:2e3}),sessionStorage.removeItem("roles"),sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("list"),location.href="/#/login"):119==e.code?Object(r.Message)({message:"没有操作权限",type:"warning",duration:2e3}):Object(r.Message)({message:e.message,type:"error"})}},NHL2:function(e,t,a){"use strict";var r=a("UStX");a.n(r).a},URgk:function(e,t,a){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new s(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a("yLpj"))},UStX:function(e,t,a){},Voah:function(e,t,a){},YBdB:function(e,t,a){(function(e,t){!function(e,a){"use strict";if(!e.setImmediate){var r,o=1,s={},i=!1,l=e.document,n=Object.getPrototypeOf&&Object.getPrototypeOf(e);n=n&&n.setTimeout?n:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){m(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?function(){var t="setImmediate$"+Math.random()+"$",a=function(a){a.source===e&&"string"==typeof a.data&&0===a.data.indexOf(t)&&m(+a.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(a){e.postMessage(t+a,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){m(e.data)},r=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;r=function(t){var a=l.createElement("script");a.onreadystatechange=function(){m(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}():r=function(e){setTimeout(m,0,e)},n.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var i={callback:e,args:t};return s[o]=i,r(o),o++},n.clearImmediate=c}function c(e){delete s[e]}function m(e){if(i)setTimeout(m,0,e);else{var t=s[e];if(t){i=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(a,r)}}(t)}finally{c(e),i=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,a("yLpj"),a("8oxB"))},YT9L:function(e,t,a){"use strict";var r=a("Voah");a.n(r).a},a81r:function(e,t,a){"use strict";a.r(t);var r=a("72z0"),o=(a("S+eF"),a("URgk"),a("v0iw")),s=a.n(o),i=a("MPjy"),l={name:"LaboratoryForm",props:{laboratoryForm:{type:Object,default:function(){return{name:"",region:"",imgsrc:"",desc:"",level:"",addr:"",buildstarttime:"",buildendtime:"",leadingname:"",linkname:"",lendingphone:"",linkphone:"",unit:"",category:"",area:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc1:""}}},otherslist:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,isshowactive:0,laboratoryRule:{name:[{required:!0,message:"请输入实验室",trigger:"blur"}],unit:[{required:!0,message:"请输入主管单位名称",trigger:"blur"}],leadingname:[{required:!0,message:"请输入实验室负责人",trigger:"blur"}],linkname:[{required:!0,message:"请输入实验室联系人",trigger:"blur"}],linkphone:[{required:!0,message:"请输入实验室联系人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3-9]\d{9}$/.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],area:[{required:!0,message:"请输入实验室面积",trigger:"blur"},{validator:function(e,t,a){/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/.test(t)?a():a(new Error("请填写实验室面积"))}}],leadingphone:[{required:!0,message:"请输入实验室负责人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3-9]\d{9}$/.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],level:[{required:!0,message:"请选择实验室级别",trigger:"change"}],category:[{required:!0,message:"请选择实验室类别",trigger:"change"}],addr:[{required:!0,message:"请输入实验室名称",trigger:"blur"}],region:[{required:!0,message:"请选择实验室认证类型",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],buildstarttime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],buildendtime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],credentialsname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},otherForm:{other:""},addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]}}},mounted:function(){},methods:{beforeAvatarlaboratory:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleAvatarlaboratory:function(e,t,a){this.laboratoryForm.imgsrc=e.path,this.$message.success("上传成功")},beforeAvatarlaboratory1:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleAvatarlaboratory1:function(e,t,a){this.laboratoryForm.imgsrc1=e.path,this.$message.success("上传成功")},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},handleAvatarSuccessOther:function(e,t,a){this.addotherform.imgsrc=e.path,this.$message.success("上传成功")},beforeAvatarUploadOther:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},addLaboratory:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("error submit!!"),!1;if(""!=t.addotherform.imgsrc)if(""!=t.addotherform.imgsrc1){var a=new(s.a.Object.extend("Laboratory"));a.set("laboratory",t.laboratoryForm),0!=t.otherslist.length&&a.set("other",t.otherslist),a.set("status","pending"),a.save().then(function(e){e&&(t.$message.success("添加成功"),t.$emit("resultes",{laboratoryForm:t.laboratoryForm,otherslist:t.otherslist,isChecked:!0}))},function(e){Object(i.a)(e)})}else t.$message.error("请上传资质照片");else t.$message.error("请上传实验室照片")})},updateOther:function(e){var t=this;this.$refs[e].validate(function(a){if(a){if(""==t.addotherform.imgsrc)return void t.$message.error("请上传资质照片");var r={title:t.otherForm.other,name:t.addotherform.name,dateOfIssue:t.addotherform.dateOfIssue,updatedDate:t.addotherform.updatedDate,initialRecognition:t.addotherform.initialRecognition,termOfValidity:t.addotherform.termOfValidity,licencsIssuing:t.addotherform.licencsIssuing,imgsrc:t.addotherform.imgsrc,desc:t.addotherform.desc};t.otherslist.push(r),console.log(t.otherslist),t.$refs[e].resetFields(),t.addotherform.imgsrc="",t.dialogVisible=!1}})}}},n=(a("YT9L"),a("kuLt"),a("KHd+")),c=Object(n.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"laboratory"},[a("div",{staticClass:"blockcontent"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px",height:"40px"}},[e._v("实验室基本信息")]),e._v(" "),a("el-form",{ref:"laboratoryForm",staticClass:"demo-ruleForm",attrs:{model:e.laboratoryForm,rules:e.laboratoryRule,"label-width":"120px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"实验室名称",prop:"name"}},[a("el-input",{model:{value:e.laboratoryForm.name,callback:function(t){e.$set(e.laboratoryForm,"name",t)},expression:"laboratoryForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择实验室级别"},model:{value:e.laboratoryForm.level,callback:function(t){e.$set(e.laboratoryForm,"level",t)},expression:"laboratoryForm.level"}},[a("el-option",{attrs:{label:"国家级",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"地市级",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"县(区)级",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室地址"}},[a("el-input",{model:{value:e.laboratoryForm.addr,callback:function(t){e.$set(e.laboratoryForm,"addr",t)},expression:"laboratoryForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"建设起止日期"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"buildstarttime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.laboratoryForm.buildstarttime,callback:function(t){e.$set(e.laboratoryForm,"buildstarttime",t)},expression:"laboratoryForm.buildstarttime"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"buildendtime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.laboratoryForm.buildendtime,callback:function(t){e.$set(e.laboratoryForm,"buildendtime",t)},expression:"laboratoryForm.buildendtime"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室负责人",prop:"leadingname"}},[a("el-input",{model:{value:e.laboratoryForm.leadingname,callback:function(t){e.$set(e.laboratoryForm,"leadingname",t)},expression:"laboratoryForm.leadingname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室联系人",prop:"linkname"}},[a("el-input",{model:{value:e.laboratoryForm.linkname,callback:function(t){e.$set(e.laboratoryForm,"linkname",t)},expression:"laboratoryForm.linkname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室照片",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarlaboratory,"before-upload":e.beforeAvatarlaboratory}},[e.laboratoryForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.laboratoryForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"主管单位",prop:"unit"}},[a("el-input",{model:{value:e.laboratoryForm.unit,callback:function(t){e.$set(e.laboratoryForm,"unit",t)},expression:"laboratoryForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室类别",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择实验室类别"},model:{value:e.laboratoryForm.category,callback:function(t){e.$set(e.laboratoryForm,"category",t)},expression:"laboratoryForm.category"}},[a("el-option",{attrs:{label:"主实验室",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"辅助实验室",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室面积"}},[a("el-input",{model:{value:e.laboratoryForm.area,callback:function(t){e.$set(e.laboratoryForm,"area",t)},expression:"laboratoryForm.area"}},[a("template",{slot:"append"},[e._v("\n                            平方\n                        ")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"最新投运时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"选择最新投运时间"},model:{value:e.laboratoryForm.operationtime,callback:function(t){e.$set(e.laboratoryForm,"operationtime",t)},expression:"laboratoryForm.operationtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话",prop:"leadingphone"}},[a("el-input",{model:{value:e.laboratoryForm.leadingphone,callback:function(t){e.$set(e.laboratoryForm,"leadingphone",t)},expression:"laboratoryForm.leadingphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"linkphone"}},[a("el-input",{model:{value:e.laboratoryForm.linkphone,callback:function(t){e.$set(e.laboratoryForm,"linkphone",t)},expression:"laboratoryForm.linkphone"}})],1)],1)])],1),e._v(" "),a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px",height:"40px"}},[e._v("实验室资质认证")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"实验室认证类型"}},[a("el-select",{attrs:{placeholder:"请选择实验室认证类型"},model:{value:e.laboratoryForm.region,callback:function(t){e.$set(e.laboratoryForm,"region",t)},expression:"laboratoryForm.region"}},[a("el-option",{attrs:{label:"CMA",value:"CMA"}}),e._v(" "),a("el-option",{attrs:{label:"CNAS",value:"CNAS"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.laboratoryForm.licencsIssuing,callback:function(t){e.$set(e.laboratoryForm,"licencsIssuing",t)},expression:"laboratoryForm.licencsIssuing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初次认可"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"选择初次认可时间"},model:{value:e.laboratoryForm.initialRecognition,callback:function(t){e.$set(e.laboratoryForm,"initialRecognition",t)},expression:"laboratoryForm.initialRecognition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入证书资质信息",rows:8},model:{value:e.laboratoryForm.desc,callback:function(t){e.$set(e.laboratoryForm,"desc",t)},expression:"laboratoryForm.desc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"证书编号",prop:"credentialsname"}},[a("el-input",{model:{value:e.laboratoryForm.credentialsname,callback:function(t){e.$set(e.laboratoryForm,"credentialsname",t)},expression:"laboratoryForm.credentialsname"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"签发日期"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.laboratoryForm.dateOfIssue,callback:function(t){e.$set(e.laboratoryForm,"dateOfIssue",t)},expression:"laboratoryForm.dateOfIssue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"termOfValidity",label:"有效期至"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择有效期",type:"date","value-format":"timestamp"},model:{value:e.laboratoryForm.termOfValidity,callback:function(t){e.$set(e.laboratoryForm,"termOfValidity",t)},expression:"laboratoryForm.termOfValidity"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"updatedDate",label:"更新时间"}},[a("el-date-picker",{attrs:{placeholder:"选择时间",type:"date","value-format":"timestamp"},model:{value:e.laboratoryForm.updatedDate,callback:function(t){e.$set(e.laboratoryForm,"updatedDate",t)},expression:"laboratoryForm.updatedDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarlaboratory1,"before-upload":e.beforeAvatarlaboratory1}},[e.laboratoryForm.imgsrc1?a("img",{staticClass:"avatar",attrs:{src:e.laboratoryForm.imgsrc1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)])],1)],1),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.otherForm,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("template",{slot:"label"},[a("span",{staticStyle:{color:"#409EFF"}},[e._v("其他资质(可选)")])]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入证书名称"},model:{value:e.otherForm.other,callback:function(t){e.$set(e.otherForm,"other",t)},expression:"otherForm.other"}})],2),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=e.otherForm.other,expression:"otherForm.other!=''"}]},[a("el-button",{attrs:{type:"primary"},on:{click:e.addOther}},[e._v("确定")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:""!=e.otherForm.other,expression:"otherForm.other!=''"}]},[a("el-button",{attrs:{type:"primary"}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addLaboratory("laboratoryForm")}}},[e._v("确定,添加实验室")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"其他资质添加",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialogform"},[a("el-form",{ref:"addotherform",staticClass:"demo-addotherform",attrs:{model:e.addotherform,"label-width":"120px",rules:e.otheformrule}},[a("el-row",[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px"}},[e._v("其他证书")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号",prop:"name"}},[a("el-input",{model:{value:e.addotherform.name,callback:function(t){e.$set(e.addotherform,"name",t)},expression:"addotherform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签发日期",prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.dateOfIssue,callback:function(t){e.$set(e.addotherform,"dateOfIssue",t)},expression:"addotherform.dateOfIssue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初次认可",prop:"initialRecognition"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.initialRecognition,callback:function(t){e.$set(e.addotherform,"initialRecognition",t)},expression:"addotherform.initialRecognition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入证书资质信息",rows:8},model:{value:e.addotherform.desc,callback:function(t){e.$set(e.addotherform,"desc",t)},expression:"addotherform.desc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.addotherform.licencsIssuing,callback:function(t){e.$set(e.addotherform,"licencsIssuing",t)},expression:"addotherform.licencsIssuing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期至",prop:"termOfValidity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp"},model:{value:e.addotherform.termOfValidity,callback:function(t){e.$set(e.addotherform,"termOfValidity",t)},expression:"addotherform.termOfValidity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新时间",prop:"updatedDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp"},model:{value:e.addotherform.updatedDate,callback:function(t){e.$set(e.addotherform,"updatedDate",t)},expression:"addotherform.updatedDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessOther,"before-upload":e.beforeAvatarUploadOther}},[e.addotherform.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addotherform.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"50px"}},[e._v("证书电子文件")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.addotherform.imgsrc,expression:"addotherform.imgsrc!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.addotherform.imgsrc=""}}},[e._v("删除")])],1)],1)])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateOther("addotherform")}}},[e._v("确 定")])],1)])],1)},[],!1,null,"463d8d41",null);c.options.__file="index.vue";var m=c.exports,d={name:"Preview",props:{laboratoryForm:{type:Object,default:function(){return{name:"",region:"",imgsrc:"",desc:"",level:"",addr:"",buildstarttime:"",buildendtime:"",leadingname:"",linkname:"",lendingphone:"",linkphone:"",unit:"",category:"",area:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc1:""}}},otherform:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,isshowactive:0,laboratoryRule:{name:[{required:!0,message:"请输入实验室",trigger:"blur"}],unit:[{required:!0,message:"请输入主管单位名称",trigger:"blur"}],leadingname:[{required:!0,message:"请输入实验室负责人",trigger:"blur"}],linkname:[{required:!0,message:"请输入实验室联系人",trigger:"blur"}],linkphone:[{required:!0,message:"请输入实验室联系人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3-9]\d{9}$/.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],area:[{required:!0,message:"请输入实验室面积",trigger:"blur"},{validator:function(e,t,a){/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/.test(t)?a():a(new Error("请填写实验室面积"))}}],leadingphone:[{required:!0,message:"请输入实验室负责人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3-9]\d{9}$/.test(t)?a():a(new Error("手机号码格式不正确！"))},trigger:"blur"}],level:[{required:!0,message:"请选择实验室级别",trigger:"change"}],category:[{required:!0,message:"请选择实验室类别",trigger:"change"}],addr:[{required:!0,message:"请输入实验室名称",trigger:"blur"}],region:[{required:!0,message:"请选择实验室认证类型",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],buildstarttime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],buildendtime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],credentialsname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},otherForm:{other:""},addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]}}},mounted:function(){},methods:{beforeAvatarlaboratory:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleAvatarlaboratory:function(e,t,a){this.laboratoryForm.imgsrc=e.path,this.$message.success("上传成功")},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},handleAvatarSuccessOther:function(e,t,a){this.addotherform.imgsrc=e.path,this.$message.success("上传成功")},beforeAvatarUploadOther:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)}}},u=(a("t8n1"),a("i8i4"),Object(n.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"laboratory"},[a("div",{staticClass:"blockcontent"},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px",height:"40px"}},[e._v("实验室基本信息")]),e._v(" "),a("el-form",{ref:"laboratoryForm",staticClass:"demo-ruleForm",attrs:{model:e.laboratoryForm,rules:e.laboratoryRule,"label-width":"120px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"实验室名称",prop:"name"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.name,callback:function(t){e.$set(e.laboratoryForm,"name",t)},expression:"laboratoryForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择实验室级别",readonly:""},model:{value:e.laboratoryForm.level,callback:function(t){e.$set(e.laboratoryForm,"level",t)},expression:"laboratoryForm.level"}},[a("el-option",{attrs:{label:"国家级",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"地市级",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"县(区)级",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室地址",prop:"addr"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.addr,callback:function(t){e.$set(e.laboratoryForm,"addr",t)},expression:"laboratoryForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"建设起止日期",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"buildstarttime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",readonly:""},model:{value:e.laboratoryForm.buildstarttime,callback:function(t){e.$set(e.laboratoryForm,"buildstarttime",t)},expression:"laboratoryForm.buildstarttime"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"buildendtime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",readonly:""},model:{value:e.laboratoryForm.buildendtime,callback:function(t){e.$set(e.laboratoryForm,"buildendtime",t)},expression:"laboratoryForm.buildendtime"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室负责人",prop:"leadingname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.leadingname,callback:function(t){e.$set(e.laboratoryForm,"leadingname",t)},expression:"laboratoryForm.leadingname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室联系人",prop:"linkname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.linkname,callback:function(t){e.$set(e.laboratoryForm,"linkname",t)},expression:"laboratoryForm.linkname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室照片",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarlaboratory,"before-upload":e.beforeAvatarlaboratory}},[e.laboratoryForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.laboratoryForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"主管单位",prop:"unit"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.unit,callback:function(t){e.$set(e.laboratoryForm,"unit",t)},expression:"laboratoryForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室类别",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择实验室类别",readonly:""},model:{value:e.laboratoryForm.category,callback:function(t){e.$set(e.laboratoryForm,"category",t)},expression:"laboratoryForm.category"}},[a("el-option",{attrs:{label:"主实验室",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"辅助实验室",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"实验室面积",prop:"area"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.area,callback:function(t){e.$set(e.laboratoryForm,"area",t)},expression:"laboratoryForm.area"}},[a("template",{slot:"append"},[e._v("\n                            平方\n                        ")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"最新投运时间"}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"timestamp",placeholder:"选择最新投运时间"},model:{value:e.laboratoryForm.operationtime,callback:function(t){e.$set(e.laboratoryForm,"operationtime",t)},expression:"laboratoryForm.operationtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人电话",prop:"leadingphone"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.leadingphone,callback:function(t){e.$set(e.laboratoryForm,"leadingphone",t)},expression:"laboratoryForm.leadingphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"linkphone"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.linkphone,callback:function(t){e.$set(e.laboratoryForm,"linkphone",t)},expression:"laboratoryForm.linkphone"}})],1)],1)])],1),e._v(" "),a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px",height:"40px"}},[e._v("实验室资质认证")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"实验室认证类型"}},[a("el-select",{attrs:{placeholder:"请选择实验室认证类型",readonly:""},model:{value:e.laboratoryForm.region,callback:function(t){e.$set(e.laboratoryForm,"region",t)},expression:"laboratoryForm.region"}},[a("el-option",{attrs:{label:"CMA",value:"CMA"}}),e._v(" "),a("el-option",{attrs:{label:"CNAS",value:"CNAS"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing",readonly:""}},[a("el-input",{model:{value:e.laboratoryForm.licencsIssuing,callback:function(t){e.$set(e.laboratoryForm,"licencsIssuing",t)},expression:"laboratoryForm.licencsIssuing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初次认可"}},[a("el-date-picker",{attrs:{readonly:"",type:"datetime","value-format":"timestamp",placeholder:"选择初次认可时间"},model:{value:e.laboratoryForm.initialRecognition,callback:function(t){e.$set(e.laboratoryForm,"initialRecognition",t)},expression:"laboratoryForm.initialRecognition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{type:"textarea",readonly:"",placeholder:"请输入证书资质信息",rows:8},model:{value:e.laboratoryForm.desc,callback:function(t){e.$set(e.laboratoryForm,"desc",t)},expression:"laboratoryForm.desc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"证书编号",prop:"credentialsname"}},[a("el-input",{attrs:{readonly:""},model:{value:e.laboratoryForm.credentialsname,callback:function(t){e.$set(e.laboratoryForm,"credentialsname",t)},expression:"laboratoryForm.credentialsname"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"签发日期"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp",readonly:""},model:{value:e.laboratoryForm.dateOfIssue,callback:function(t){e.$set(e.laboratoryForm,"dateOfIssue",t)},expression:"laboratoryForm.dateOfIssue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{prop:"termOfValidity",label:"有效期至"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择有效期",type:"date","value-format":"timestamp",readonly:""},model:{value:e.laboratoryForm.termOfValidity,callback:function(t){e.$set(e.laboratoryForm,"termOfValidity",t)},expression:"laboratoryForm.termOfValidity"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"updatedDate",label:"更新时间"}},[a("el-date-picker",{attrs:{placeholder:"选择时间",type:"date","value-format":"timestamp",readonly:""},model:{value:e.laboratoryForm.updatedDate,callback:function(t){e.$set(e.laboratoryForm,"updatedDate",t)},expression:"laboratoryForm.updatedDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarlaboratory,"before-upload":e.beforeAvatarlaboratory}},[e.laboratoryForm.imgsrc1?a("img",{staticClass:"avatar",attrs:{src:e.laboratoryForm.imgsrc1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)])],1)],1)],1),e._v(" "),e._l(e.otherform,function(t,r){return a("el-row",{key:r,attrs:{value:t}},[a("el-form",{ref:"addotherform",refInFor:!0,staticClass:"demo-addotherform",attrs:{model:t,"label-width":"120px"}},[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px"}},[e._v(e._s(t.title))]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号"}},[a("el-input",{attrs:{readonly:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签发日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp",readonly:""},model:{value:t.dateOfIssue,callback:function(a){e.$set(t,"dateOfIssue",a)},expression:"item.dateOfIssue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初次认可"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp",readonly:""},model:{value:t.initialRecognition,callback:function(a){e.$set(t,"initialRecognition",a)},expression:"item.initialRecognition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入证书资质信息",rows:8,readonly:""},model:{value:t.desc,callback:function(a){e.$set(t,"desc",a)},expression:"item.desc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关"}},[a("el-input",{model:{value:t.licencsIssuing,callback:function(a){e.$set(t,"licencsIssuing",a)},expression:"item.licencsIssuing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期至"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp",readonly:""},model:{value:t.termOfValidity,callback:function(a){e.$set(t,"termOfValidity",a)},expression:"item.termOfValidity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp",readonly:""},model:{value:t.updatedDate,callback:function(a){e.$set(t,"updatedDate",a)},expression:"item.updatedDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1}},[t.imgsrc?a("img",{staticClass:"avatar",attrs:{src:t.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"50px"}},[e._v("证书电子文件")])])],1)],1)])],1)],1)})],2)},[],!1,null,"572cea3a",null));u.options.__file="preview.vue";var p=[],g={components:{LaboratoryForm:m,Preview:u.exports},data:function(){var e=function(e,t,a){/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)?a():18!=t.length?a(new Error("请输入18位身份证号")):a(new Error("需要输入正确身份证号码"))},t=function(e,t,a){/^[a-zA-Z&.,\'\/\-\s]+$/g.test(t)?a():a(new Error("请输入英文名称"))},a=function(e,t,a){/[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}/.test(t)?t.length>18?a(new Error("请输入18位统一社会编码")):a():a(new Error("请输入正确统一社会编码"))},o=function(e,t,a){/^(([^0][0-9]+|0)\.([0-9]{1,2})$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9]{1,2})$)|^(([1-9]+)$)/.test(t)?a():a(new Error("请填写公司注册资金,精确2位小数"))};return{laboratoryactive:1,editableTabsValue:"1",laboratoryFormvalue:"1",editableTabs:[{title:"实验室1",name:"1",content:""}],tabIndex:1,allactive:1,active:1,form:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:"",roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},form1:{name:"",region:"",desc:"",identity:"",frontimageUrl:"",contraryimageUrl:"",businesslicense:"",businessname:"",abbrname:"",corporname:"",englishname:"",creditcode:"",addr:"",roadress:"",businessduration:"",businessdesc:"",businessscope:"",registeredcapital:""},formrules1:{identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],businessname:[{required:!0,message:"请输入企业名称",trigger:"blur"}],abbrname:[{required:!0,message:"请输入企业简称",trigger:"blur"}],corporname:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],englishname:[{required:!0,message:"请输入企业英文名称",trigger:"blur"},{validator:t}],creditcode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a}],addr:[{required:!0,message:"请选择公司注册地址",trigger:"change"}],roadress:[{required:!0,message:"请输入街道地址",trigger:"blur"}],registeredcapital:[{required:!0,message:"请输入公司注册资金",trigger:"blur"},{validator:o}],businessduration:[{required:!0,message:"请选择公司营业年限",trigger:"change"}],businessdesc:[{required:!0,message:"请输入企业描述信息",trigger:"blur"}],businessscope:[{required:!0,message:"请输入企业经营范围",trigger:"blur"}]},options:r.regionData,formrules:{identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],businessname:[{required:!0,message:"请输入企业名称",trigger:"blur"}],abbrname:[{required:!0,message:"请输入企业简称",trigger:"blur"}],corporname:[{required:!0,message:"请输入法人姓名",trigger:"blur"}],englishname:[{required:!0,message:"请输入企业英文名称",trigger:"blur"},{validator:t}],creditcode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{validator:a}],addr:[{required:!0,message:"请选择公司注册地址",trigger:"change"}],roadress:[{required:!0,message:"请输入街道地址",trigger:"blur"}],registeredcapital:[{required:!0,message:"请输入公司注册资金",trigger:"blur"},{validator:o}],businessduration:[{required:!0,message:"请选择公司营业年限",trigger:"change"}],businessdesc:[{required:!0,message:"请输入企业描述信息",trigger:"blur"}],businessscope:[{required:!0,message:"请输入企业经营范围",trigger:"blur"}]},ruleForm:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},ruleformcma:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},ruleformrulecma:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleForm1:{cnasname:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",cnasimgsrc:"",cnasdesc:""},ruleForm2:{cmaname:"",cmadateOfIssue:"",cmalicencsIssuing:"",cmatermOfValidity:"",cmaimgsrc:"",cmadesc:""},otherForm:{other:""},ruleRules:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules2:{cmaname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],cmadateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],cmalicencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],cmatermOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ruleRules1:{cnasname:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},dialogVisible:!1,addotherform:{name:"",dateOfIssue:"",updatedDate:"",initialRecognition:"",termOfValidity:"",licencsIssuing:"",imgsrc:"",desc:""},previewother:{otherform:[]},otheformrule:{name:[{required:!0,message:"请输入正确证书编号",trigger:"blur"}],licencsIssuing:[{required:!0,message:"请输入发证机关",trigger:"blur"}],dateOfIssue:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],updatedDate:[{type:"date",required:!0,message:"请选择更新时间",trigger:"change"}],initialRecognition:[{type:"date",required:!0,message:"请选择初次认可时间",trigger:"change"}],termOfValidity:[{type:"date",required:!0,message:"请选择有效期至",trigger:"change"}]},ewpowerid:"",laboratorylist:[]}},mounted:function(){this.originData()},methods:{addTab:function(e){var t=++this.tabIndex+"";this.editableTabs.push({title:"实验室"+this.tabIndex,name:t,content:"New Tab content"}),this.editableTabsValue=t},removeTab:function(e){var t=this.editableTabs,a=this.editableTabsValue;a===e&&t.forEach(function(r,o){if(r.name===e){var s=t[o+1]||t[o-1];s&&(a=s.name)}}),this.editableTabsValue=a,this.editableTabs=t.filter(function(t){return t.name!==e})},tagGoIndex:function(e){this.isshowactive=e},addTag:function(){this.dynamicTags.push("实验室")},originData:function(){var e=this,t=s.a.Object.extend("Authentication");new s.a.Query(t).find().then(function(t){console.log(t),t.length>0&&(t[0].attributes.empower&&(e.form.name=t[0].attributes.empower.name,e.form.region=t[0].attributes.empower.region,e.form.desc=t[0].attributes.empower.desc,e.form.identity=t[0].attributes.empower.identity,e.form.frontimageUrl=t[0].attributes.empower.frontimageUrl,e.form.contraryimageUrl=t[0].attributes.empower.contraryimageUrl,e.form.businesslicense=t[0].attributes.empower.businesslicense,e.form.businessname=t[0].attributes.empower.businessname,e.form.abbrname=t[0].attributes.empower.abbrname,e.form.corporname=t[0].attributes.empower.corporname,e.form.englishname=t[0].attributes.empower.englishname,e.form.creditcode=t[0].attributes.empower.creditcode,e.form.addr=t[0].attributes.empower.addr,e.form.roadress=t[0].attributes.empower.roadress,e.form.businessduration=t[0].attributes.empower.businessduration,e.form.businessdesc=t[0].attributes.empower.businessdesc,e.form.businessscope=t[0].attributes.empower.businessscope,e.form.registeredcapital=t[0].attributes.empower.registeredcapital,e.ewpowerid=t[0].id),t[0].attributes.cnas&&(e.ruleForm.cnasname=t[0].attributes.cnas.cnasname,e.ruleForm.dateOfIssue=t[0].attributes.cnas.dateOfIssue,e.ruleForm.updatedDate=t[0].attributes.cnas.updatedDate,e.ruleForm.initialRecognition=t[0].attributes.cnas.initialRecognition,e.ruleForm.termOfValidity=t[0].attributes.cnas.termOfValidity,e.ruleForm.licencsIssuing=t[0].attributes.cnas.licencsIssuing,e.ruleForm.cnasimgsrc=t[0].attributes.cnas.cnasimgsrc,e.ruleForm.cnasdesc=t[0].attributes.cnas.cnasdesc),t[0].attributes.cma&&(e.ruleformcma.cmaname=t[0].attributes.cma.cmaname,e.ruleformcma.cmadateOfIssue=t[0].attributes.cma.cmadateOfIssue,e.ruleformcma.cmalicencsIssuing=t[0].attributes.cma.cmalicencsIssuing,e.ruleformcma.cmatermOfValidity=t[0].attributes.cma.cmatermOfValidity,e.ruleformcma.cmaimgsrc=t[0].attributes.cma.cmaimgsrc,e.ruleformcma.cmadesc=t[0].attributes.cma.cmadesc),t[0].attributes.other&&(p=t[0].attributes.other))},function(e){Object(i.a)(e)})},next:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("有必填项未填写"),!1;if(""!=t.form.frontimageUrl)if(""!=t.form.contraryimageUrl)if(""!=t.form.businesslicense){var a=s.a.User.current().id,r=new(s.a.Object.extend("Authentication"));""!=t.empowerid&&(r.id=t.ewpowerid);var o=new s.a.ACL;r.set("empower",{name:t.form.name,region:t.form.region,desc:t.form.desc,identity:t.form.identity,frontimageUrl:t.form.frontimageUrl,contraryimageUrl:t.form.contraryimageUrl,businesslicense:t.form.businesslicense,businessname:t.form.businessname,abbrname:t.form.abbrname,corporname:t.form.corporname,englishname:t.form.englishname,creditcode:t.form.creditcode,addr:t.form.addr,roadress:t.form.roadress,businessduration:t.form.businessduration,businessdesc:t.form.businessdesc,businessscope:t.form.businessscope,registeredcapital:t.form.registeredcapital}),o.setRoleWriteAccess("pump_admin",!0),o.setRoleReadAccess("pump_admin",!0),o.setReadAccess(a,!0),o.setWriteAccess(a,!0),r.set("ACL",o),r.save().then(function(e){if(e&&(console.log(e),t.$message.success("企业认证成功"),t.active++,t.form1=t.form,""==t.ewpowerid)){var a=s.a.Object.extend("Authentication");new s.a.Query(a).find().then(function(e){t.ewpowerid=e[0].id})}},function(e){t.$message.error(e.error)})}else t.$message.error("请上传企业营业执照");else t.$message.error("请上传身份证背面照");else t.$message.error("请上传身份证正面照")})},beforeAvatarUpload1:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},beforeAvatarUpload2:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleClose:function(){this.dialogVisible=!1},beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},beforeAvatarUploadOther:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,r=e.size/1024/1024<10;return a?(console.log(e),r?a||r:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleAvatarSuccessFront:function(e,t,a){this.form.frontimageUrl=e.path,this.$message({message:"上传成功！",type:"success"})},handleAvatarSuccessContrary:function(e,t,a){this.form.contraryimageUrl=e.path,this.$message({message:"上传成功！",type:"success"})},handleAvatarSuccessBusiness:function(e,t,a){this.form.businesslicense=e.path,this.$message.success("上传成功!")},handleAvatarSuccessBusiness1:function(e,t,a){this.ruleForm.cnasimgsrc=e.path,this.$message.success("上传成功")},handleAvatarSuccessBusiness2:function(e,t,a){this.ruleformcma.cmaimgsrc=e.path,this.$message.success("上传成功")},handleAvatarSuccessOther:function(e,t,a){this.addotherform.imgsrc=e.path,this.$message.success("上传成功")},nextTo:function(e,t){var a,r,o=this;if(this.$refs[e].validate(function(e){e&&(a=!0)}),this.$refs[t].validate(function(e){e&&(r=!0)}),a||r){if(a&&""==this.ruleForm.cnasimgsrc)return void this.$message.error("请上传CNAS证件照片");if(r&&""==this.ruleformcma.cmaimgsrc)return void this.$message.error("请上传CMA证件照片");console.log(this.ewpowerid);var i=new(s.a.Object.extend("Authentication"));i.id=this.ewpowerid,i.set("cnas",{cnasname:this.ruleForm.cnasname,dateOfIssue:this.ruleForm.dateOfIssue,updatedDate:this.ruleForm.updatedDate,initialRecognition:this.ruleForm.initialRecognition,termOfValidity:this.ruleForm.termOfValidity,licencsIssuing:this.ruleForm.licencsIssuing,cnasimgsrc:this.ruleForm.cnasimgsrc,cnasdesc:this.ruleForm.cnasdesc}),i.set("cma",{cmaname:this.ruleformcma.cmaname,cmadateOfIssue:this.ruleformcma.cmadateOfIssue,cmalicencsIssuing:this.ruleformcma.cmalicencsIssuing,cmatermOfValidity:this.ruleformcma.cmatermOfValidity,cmaimgsrc:this.ruleformcma.cmaimgsrc,cmadesc:this.ruleformcma.cmadesc}),i.set("status","Pending"),i.save().then(function(e){e&&(o.$message.success("添加成功"),o.active++,o.form1=o.form,o.ruleForm1=o.ruleForm,o.ruleForm2=o.ruleformcma,o.previewother.otherform=p)},function(e){o.$message.error(e.error)})}},updateOther:function(e){var t=this;this.$refs[e].validate(function(a){if(a){if(""==t.addotherform.imgsrc)return void t.$message.error("请上传资质照片");var r={title:t.otherForm.other,name:t.addotherform.name,dateOfIssue:t.addotherform.dateOfIssue,updatedDate:t.addotherform.updatedDate,initialRecognition:t.addotherform.initialRecognition,termOfValidity:t.addotherform.termOfValidity,licencsIssuing:t.addotherform.licencsIssuing,imgsrc:t.addotherform.imgsrc,desc:t.addotherform.desc};p.push(r),console.log(p),t.$refs[e].resetFields(),t.addotherform.imgsrc="",t.dialogVisible=!1}})},addOther:function(){""==this.otherForm.other?this.$message.warning("请填写其他资质名称"):this.dialogVisible=!0},goBack:function(){this.active>1&&this.active<=3&&this.active--},handleModChange:function(e){console.log(e)},addEmpower:function(){var e=this;this.form1=this.form,this.ruleForm1=this.ruleForm,this.ruleForm2=this.ruleformcma;var t=new(s.a.Object.extend("Authentication"));t.id=this.ewpowerid,t.set("other",p),t.save().then(function(t){t&&(e.$message.success("提交成功"),e.allactive++)})},cancelAdd:function(){this.allactive=1,this.active=1},getLaboratory:function(e){console.log(e),this.laboratorylist.push(e)},previewLaboratory:function(){console.log(this.laboratorylist),0!=this.laboratorylist.length?(this.laboratoryFormvalue=this.laboratorylist[0].laboratoryForm.name,this.laboratoryactive=2):this.$message.error("请至少提交一个实验室认证")}}},f=(a("jRp7"),a("NHL2"),Object(n.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"empower"},[a("el-steps",{attrs:{active:e.allactive,simple:""}},[a("el-step",{attrs:{title:"填写认证信息",icon:"el-icon-edit"}}),e._v(" "),a("el-step",{attrs:{title:"填写实验室基本信息",icon:"el-icon-upload"}}),e._v(" "),a("el-step",{attrs:{title:"审核结果",icon:"el-icon-picture"}})],1),e._v(" "),1==e.allactive?a("div",[a("el-steps",{attrs:{active:e.active}},[a("el-step",{attrs:{title:"认证企业新增",icon:"el-icon-s-check",description:"企业认证新增"}}),e._v(" "),a("el-step",{attrs:{title:"预览提交",icon:"el-icon-picture"}})],1),e._v(" "),1==e.active?a("div",{staticClass:"empowerone"},[a("el-card",{attrs:{shadow:"always"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px",rules:e.formrules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称"},model:{value:e.form.businessname,callback:function(t){e.$set(e.form,"businessname",t)},expression:"form.businessname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业简称"}},[a("el-input",{attrs:{placeholder:"请填写企业简称"},model:{value:e.form.abbrname,callback:function(t){e.$set(e.form,"abbrname",t)},expression:"form.abbrname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名"},model:{value:e.form.corporname,callback:function(t){e.$set(e.form,"corporname",t)},expression:"form.corporname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessFront,"before-upload":e.beforeAvatarUpload}},[e.form.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.form.frontimageUrl,expression:"form.frontimageUrl==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v("正面")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.form.frontimageUrl,expression:"form.frontimageUrl!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.form.frontimageUrl=""}}},[e._v("删除")])],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessContrary,"before-upload":e.beforeAvatarUpload}},[e.form.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.form.contraryimageUrl,expression:"form.contraryimageUrl==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v("反面")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.form.contraryimageUrl,expression:"form.contraryimageUrl!=''"}],staticStyle:{position:"absolute",left:"190px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.form.contraryimageUrl=""}}},[e._v("删除")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.handleModChange},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限"},model:{value:e.form.businessduration,callback:function(t){e.$set(e.form,"businessduration",t)},expression:"form.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"1-3年",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3-5年",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"5-10年",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金"},model:{value:e.form.registeredcapital,callback:function(t){e.$set(e.form,"registeredcapital",t)},expression:"form.registeredcapital"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"企业描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300",rows:4,"show-word-limit":""},model:{value:e.form.businessdesc,callback:function(t){e.$set(e.form,"businessdesc",t)},expression:"form.businessdesc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称"},model:{value:e.form.englishname,callback:function(t){e.$set(e.form,"englishname",t)},expression:"form.englishname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditcode"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.form.creditcode,callback:function(t){e.$set(e.form,"creditcode",t)},expression:"form.creditcode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）"},model:{value:e.form.identity,callback:function(t){e.$set(e.form,"identity",t)},expression:"form.identity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessBusiness,"before-upload":e.beforeAvatarUpload}},[e.form.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.form.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"300px",height:"200px"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.form.businesslicense,expression:"form.businesslicense==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v("企业营业执照")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.form.businesslicense,expression:"form.businesslicense!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.form.bussnesslicense=""}}},[e._v("删除")])],1),e._v(" "),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址"},model:{value:e.form.roadress,callback:function(t){e.$set(e.form,"roadress",t)},expression:"form.roadress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"11-50人",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"50-100人",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"101-500人",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300",rows:4,"show-word-limit":""},model:{value:e.form.businessscope,callback:function(t){e.$set(e.form,"businessscope",t)},expression:"form.businessscope"}})],1)],1)])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:function(t){e.next("form")}}},[e._v("提交,下一步")]),e._v(" "),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1):e._e(),e._v(" "),2==e.active?a("div",{staticClass:"empowerthird"},[a("el-divider",[e._v("企业认证")]),e._v(" "),a("el-form",{ref:"form1",attrs:{model:e.form,"label-width":"140px",rules:e.formrules1}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"企业名称",prop:"businessname"}},[a("el-input",{attrs:{placeholder:"请填写企业名称",readonly:""},model:{value:e.form1.businessname,callback:function(t){e.$set(e.form1,"businessname",t)},expression:"form1.businessname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业简称",prop:"abbrname"}},[a("el-input",{attrs:{placeholder:"请填写企业简称",readonly:""},model:{value:e.form1.abbrname,callback:function(t){e.$set(e.form1,"abbrname",t)},expression:"form1.abbrname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表名称",prop:"corporname"}},[a("el-input",{attrs:{placeholder:"请输入法人姓名",readonly:""},model:{value:e.form1.corporname,callback:function(t){e.$set(e.form1,"corporname",t)},expression:"form1.corporname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表身份证",required:""}},[a("el-col",{attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessFront,"before-upload":e.beforeAvatarUpload}},[e.form1.frontimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.form1.frontimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v("身份证正面")])])],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessContrary,"before-upload":e.beforeAvatarUpload}},[e.form1.contraryimageUrl?a("img",{staticClass:"avatar",attrs:{src:e.form1.contraryimageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v("身份证正反面")])])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"注册地址",prop:"addr"}},[a("el-cascader",{attrs:{size:"large",options:e.options,readonly:""},on:{change:e.handleModChange},model:{value:e.form1.addr,callback:function(t){e.$set(e.form1,"addr",t)},expression:"form1.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业年限",prop:"businessduration"}},[a("el-select",{attrs:{placeholder:"请选择营业年限",readonly:""},model:{value:e.form1.businessduration,callback:function(t){e.$set(e.form1,"businessduration",t)},expression:"form1.businessduration"}},[a("el-option",{attrs:{label:"初创企业",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"1-3年",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"3-5年",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"5-10年",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"注册资金",prop:"registeredcapital"}},[a("el-input",{attrs:{placeholder:"请填写注册资金",readonly:""},model:{value:e.form1.registeredcapital,callback:function(t){e.$set(e.form1,"registeredcapital",t)},expression:"form1.registeredcapital"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业描述",prop:"businessdesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入企业描述信息",maxlength:"300",rows:4,"show-word-limit":"",readonly:""},model:{value:e.form1.businessdesc,callback:function(t){e.$set(e.form1,"businessdesc",t)},expression:"form1.businessdesc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"企业英文名称",prop:"englishname"}},[a("el-input",{attrs:{placeholder:"请输入企业英文名称",readonly:""},model:{value:e.form1.englishname,callback:function(t){e.$set(e.form1,"englishname",t)},expression:"form1.englishname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditcode"}},[a("el-input",{attrs:{placeholder:"请输入社会信用代码",readonly:""},model:{value:e.form1.creditcode,callback:function(t){e.$set(e.form1,"creditcode",t)},expression:"form1.creditcode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"法人代表身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号码（18位）",readonly:""},model:{value:e.form1.identity,callback:function(t){e.$set(e.form1,"identity",t)},expression:"form1.identity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业营业执照",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessBusiness,"before-upload":e.beforeAvatarUpload}},[e.form1.businesslicense?a("img",{staticClass:"avatar",attrs:{src:e.form1.businesslicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"80px"}},[e._v("企业营业执照")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"街道地址",prop:"roadress"}},[a("el-input",{attrs:{placeholder:"请填写企业街道地址",readonly:""},model:{value:e.form1.roadress,callback:function(t){e.$set(e.form1,"roadress",t)},expression:"form1.roadress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业规模"}},[a("el-select",{attrs:{placeholder:"请选择企业规模",readonly:""},model:{value:e.form1.region,callback:function(t){e.$set(e.form1,"region",t)},expression:"form1.region"}},[a("el-option",{attrs:{label:"10人以下",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"11-50人",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"50-100人",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"101-500人",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"501-1000人",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"1000人以上",value:"6"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"经营范围",prop:"businessscope"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入企业经营范围信息",maxlength:"300",rows:4,readonly:"","show-word-limit":""},model:{value:e.form1.businessscope,callback:function(t){e.$set(e.form1,"businessscope",t)},expression:"form1.businessscope"}})],1)],1)])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:e.addEmpower}},[e._v("提交审核")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.goBack}},[e._v("返回上一步")])],1)],1):e._e()],1):e._e(),e._v(" "),2==e.allactive?a("div",[a("el-steps",{attrs:{active:e.laboratoryactive,simple:""}},[a("el-step",{attrs:{title:"填写实验室信息",icon:"el-icon-s-promotion"}}),e._v(" "),a("el-step",{attrs:{title:"预览提交审核",icon:"el-icon-upload"}})],1),e._v(" "),1==e.laboratoryactive?a("div",{staticClass:"block",staticStyle:{padding:"30px","box-sizing":"border-box"}},[a("p",{staticStyle:{border:"1px solid #cccccc","font-size":"20px",height:"40px","line-height":"40px",margin:"0","padding-left":"20px"}},[e._v("企业实验室认证")]),e._v(" "),a("div",{staticClass:"blocktop",staticStyle:{"margin-top":"20px"}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":e.removeTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.addTab(e.editableTabsValue)}}},[e._v("新增")]),e._v(" "),e._l(e.editableTabs,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.name}},[a("LaboratoryForm",{on:{resultes:e.getLaboratory}})],1)})],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.previewLaboratory}},[e._v("确定,预览")]),e._v(" "),a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)],1)],1)]):e._e(),e._v(" "),2==e.laboratoryactive?a("div",[a("el-tabs",{attrs:{type:"card"},model:{value:e.laboratoryFormvalue,callback:function(t){e.laboratoryFormvalue=t},expression:"laboratoryFormvalue"}},e._l(e.laboratorylist,function(e,t){return a("el-tab-pane",{key:e.laboratoryForm.name,attrs:{label:"实验室"+(t+1),name:e.laboratoryForm.name}},[a("Preview",{attrs:{laboratoryForm:e.laboratoryForm,otherform:e.otherslist}})],1)})),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.allactive=3}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.laboratoryactive=1}}},[e._v("返回上一步")])],1)],1)],1):e._e()],1):e._e(),e._v(" "),3==e.allactive?a("div",[a("div",{staticClass:"block",staticStyle:{margin:"0 auto","text-align":"center",padding:"30px"}},[a("el-image",[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("svg-icon",{staticStyle:{width:"8rem",height:"8rem"},attrs:{"icon-class":"empowerexamine"}})],1)]),e._v(" "),a("p",{staticStyle:{"font-size":"25px",color:"#409EFF"}},[e._v("正在审核中")]),e._v(" "),a("p",{staticStyle:{"font-size":"20px"}},[e._v("审核员联系电话：17201202365")]),e._v(" "),a("p",{staticStyle:{color:"#cccccc","font-size":"14px"}},[e._v("预计3到5个工作日完成，请耐心等待，谢谢您的配合和理解")]),e._v(" "),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:e.cancelAdd}},[e._v("撤销审核"),a("i",{staticClass:"el-icon-s-fold"})])],1)],1)]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"其他资质添加",visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialogform"},[a("el-form",{ref:"addotherform",staticClass:"demo-addotherform",attrs:{model:e.addotherform,"label-width":"120px",rules:e.otheformrule}},[a("el-row",[a("p",{staticStyle:{"border-bottom":"1px solid #cccccc",color:"#409EFF","font-size":"14px"}},[e._v("其他证书")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"证书编号",prop:"name"}},[a("el-input",{model:{value:e.addotherform.name,callback:function(t){e.$set(e.addotherform,"name",t)},expression:"addotherform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签发日期",prop:"dateOfIssue"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.dateOfIssue,callback:function(t){e.$set(e.addotherform,"dateOfIssue",t)},expression:"addotherform.dateOfIssue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初次认可",prop:"initialRecognition"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发日期","value-format":"timestamp"},model:{value:e.addotherform.initialRecognition,callback:function(t){e.$set(e.addotherform,"initialRecognition",t)},expression:"addotherform.initialRecognition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资质内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入证书资质信息",rows:8},model:{value:e.addotherform.desc,callback:function(t){e.$set(e.addotherform,"desc",t)},expression:"addotherform.desc"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"发证机关",prop:"licencsIssuing"}},[a("el-input",{model:{value:e.addotherform.licencsIssuing,callback:function(t){e.$set(e.addotherform,"licencsIssuing",t)},expression:"addotherform.licencsIssuing"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期至",prop:"termOfValidity"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择有效期至","value-format":"timestamp"},model:{value:e.addotherform.termOfValidity,callback:function(t){e.$set(e.addotherform,"termOfValidity",t)},expression:"addotherform.termOfValidity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"更新时间",prop:"updatedDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择签发更新时间","value-format":"timestamp"},model:{value:e.addotherform.updatedDate,callback:function(t){e.$set(e.addotherform,"updatedDate",t)},expression:"addotherform.updatedDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证书电子文件",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessOther,"before-upload":e.beforeAvatarUploadOther}},[e.addotherform.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addotherform.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"50px"}},[e._v("证书电子文件")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.addotherform.imgsrc,expression:"addotherform.imgsrc!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.addotherform.imgsrc=""}}},[e._v("删除")])],1)],1)])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateOther("addotherform")}}},[e._v("确 定")])],1)])],1)},[],!1,null,"a9512dd4",null));f.options.__file="empower.vue";t.default=f.exports},bcpb:function(e,t,a){},dmny:function(e,t,a){},i8i4:function(e,t,a){"use strict";var r=a("p44c");a.n(r).a},jRp7:function(e,t,a){"use strict";var r=a("bcpb");a.n(r).a},kuLt:function(e,t,a){"use strict";var r=a("IQZy");a.n(r).a},p44c:function(e,t,a){},t8n1:function(e,t,a){"use strict";var r=a("dmny");a.n(r).a}}]);