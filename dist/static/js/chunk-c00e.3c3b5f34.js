(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-c00e"],{"35y/":function(e,t,a){},C4sb:function(e,t,a){"use strict";var n=a("NMUN");a.n(n).a},MPjy:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("X3IP");function i(e){"209"==e.code?(Object(n.Message)({message:"您权限过期,请重新登录",type:"error",duration:2e3}),sessionStorage.removeItem("roles"),sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("list"),location.href="/#/login"):119==e.code?Object(n.Message)({message:"没有操作权限",type:"warning",duration:2e3}):Object(n.Message)({message:e.message,type:"error"})}},NMUN:function(e,t,a){},"OG/P":function(e,t,a){"use strict";a.r(t);var n=a("4d7F"),i=a.n(n),s=a("v0iw"),l=a.n(s),r=a("XXUv"),o=a("MPjy"),d={components:{Pumpdepartment:r.a},data:function(){return{testbedSelection:[],disposeVisible:!1,addbedForm:{name:"",state:"",laboratory:"",factory:"",number:"",imgsrc:"",desc:"",computername:"",computerkey:"",model:""},addbedFormrule:{name:[{required:!0,message:"请输入测试台名称",trigger:"blur"}],laboratory:[{required:!0,message:"请选择所属实验室",trigger:"change"}],state:[{required:!0,message:"请选择测试台状况",trigger:"change"}]},addbeddialog1:!1,formInline:{laboratory:"",name:"",state:""},gatewaystatus:!1,bedData:[],devicesData:[],beddialog:!1,multipleSelection:[],testbedname:"",testbedid:"",testbeddevices:[],origindevices:[],pagesize:10,total:0,start:0,devicelist:{departmentid:"",testbedid:""},departmentid:"",devicesstart:0,bedDevicedialog:!1,devicepagesize:10,devicestart:0,devicetotal:0,bedDevicesData:[],multipleTable1:[],departmentlist:[],testbedlist:[],departmentList:[],alltestbed:[],allpumpdevice:[],updatedId:"",checkdevice:[],bedForm:{name:""}}},mounted:function(){this.getBedtable(),this.getDepartmentList(),this.getAllBed(),this.getAllPumpDevice()},methods:{getAllBed:function(){var e=this,t=l.a.Object.extend("Testbed"),a=new l.a.Query(t);a.ascending(["-createdAt","name"]),a.limit(1e3),""!=this.bedForm.name&&a.matches("name",this.bedForm.name,"i"),a.find().then(function(t){e.alltestbed=t},function(e){Object(o.a)(e)})},getAllPumpDevice:function(){var e=this,t=l.a.Object.extend("Devices"),a=new l.a.Query(t);a.equalTo("basedata.type","PUMP"),a.ascending("createdAt"),a.limit(1e3),a.find().then(function(t){e.allpumpdevice=t},function(e){Object(o.a)(e)})},handleCheckedCitiesChange:function(e){console.log(e)},clearUBed:function(){this.updatedId=""},handleCheckAllChange:function(e){var t=this;this.allpumpdevice.map(function(e){t.checkdevice.push(e.id)})},testBedAdd:function(){this.addbeddialog1=!0},clearUpDevice:function(){this.checkdevice=[]},addTestRelation:function(){var e=this,t=new(l.a.Object.extend("Testbed")),a=new(l.a.Object.extend("Devices"));if(""!=this.updatedId){t.id=this.updatedId;var n=t.relation("devices");this.checkdevice.map(function(e){a.set("objectId",e),n.add(a)}),t.save().then(function(t){t&&(e.$message.success("设备关联成功"),e.disposeVisible=!1,e.checkdevice=[],e.updatedId="",e.getBedtable(e.departmentid))},function(e){Object(o.a)(e)})}},getDepartmentList:function(){var e=this,t=l.a.Object.extend("Department"),a=new l.a.Query(t);a.equalTo("org_type","实验室"),a.find().then(function(t){e.departmentList=t},function(e){Object(o.a)(e)})},Determine:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message.error("有必填项未填写"),!1;if(""!=t.addbedForm.imgsrc){var n=new(l.a.Object.extend("Testbed")),i=new(l.a.Object.extend("Department"));i.id=t.addbedForm.laboratory,n.set("department",i),n.set("status","init"),n.set("name",t.addbedForm.name),n.set("model",t.addbedForm.model),n.set("number",t.addbedForm.number),n.set("factory",t.addbedForm.factory),n.set("state",t.addbedForm.state),n.set("imgsrc",t.addbedForm.imgsrc),n.save().then(function(a){a&&(t.$message.success("测试台体新增成功"),t.$refs[e].resetFields(),t.addbeddialog1=!1,t.getBedtable(t.departmentid))},function(e){Object(o.a)(e)})}else t.$message.error("请上传测试台信息")})},handleAvatarSuccessBusiness2:function(e,t,a){this.addbedForm.imgsrc=e.path,this.$message.success("上传成功")},beforeAvatarUpload2:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,n=e.size/1024/1024<10;return a?(console.log(e),n?a||n:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},getPumpNode:function(e){this.departmentid=e.objectId,this.getBedtable(this.departmentid)},devicesDetail:function(e){var t=this;this.testbedid=e.id,this.bedDevicedialog=!0,this.testbedname=e.attributes.name;var a=new(l.a.Object.extend("Testbed"));a.id=e.id,a.relation("devices").query().find().then(function(e){t.bedDevicesData=e})},disposeTestbed:function(){this.disposeVisible=!0},handleEdit:function(e){var t=this;this.testbedid=e,this.disposeVisible=!0;var a=l.a.Object.extend("Testbed"),n=new l.a.Query(a),i=l.a.Object.extend("Devices"),s=new l.a.Query(i);this.updatedId=e,n.get(e).then(function(e){var a=e.relation("devices").query();s.equalTo("basedata.type","PUMP"),s.ascending("createdAt"),t.devicesData=s,a.find().then(function(e){e.map(function(e){t.checkdevice.push(e.id)})})})},selectCompany:function(e){var t=this;this.devicelist.testbedid="";var a=l.a.Object.extend("Department"),n=new l.a.Query(a);n.equalTo("ParentId",e),n.find().then(function(e){t.testbedlist=e})},deviceSelect:function(e){this.multipleTable1=e},handleDeviceSizeChange:function(e){this.devicepagesize=e,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDeviceCurrentChange:function(e){this.devicestart=(e-1)*this.devicepagesize,""!=this.testbedid?this.handleEdit(this.testbedid):this.addTest()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除当前测试台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=l.a.Object.extend("Testbed");new l.a.Query(a).get(e).then(function(e){e.destroy().then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getBedtable(t.departmentid)})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getBedtable:function(e){var t=this,a=l.a.Object.extend("Testbed"),n=new l.a.Query(a);n.limit(this.pagesize),n.skip(this.start),n.ascending(["-createdAt","name"]),e&&n.equalTo("department",e),""!=this.formInline.state&&n.equalTo("state",this.formInline.state),""!=this.formInline.name&&n.equalTo("name",this.formInline.name),this.formInline.laboratory&&n.equalTo("department",this.formInline.laboratory),n.count().then(function(e){t.total=e,n.find().then(function(e){t.bedData=e})})},addTest:function(){var e=this;this.testbedid="",this.beddialog=!0;var t=l.a.Object.extend("Devices"),a=new l.a.Query(t);a.equalTo("basedat.type","PUMP"),a.skip(this.devicestart),a.limit(this.devicepagesize),a.count().then(function(t){e.devicetotal=t,a.find().then(function(t){e.devicesData=t},function(e){console.log(e)})});var n=l.a.Object.extend("Department"),i=new l.a.Query(n);i.equalTo("org_type","泵单位"),i.find().then(function(t){e.departmentlist=t})},handleSelectionBed:function(e){this.testbedSelection=e},deleteTestBed:function(){var e=this,t=[];0!=this.testbedSelection.length?this.$confirm("此操作将永久删除选中检测台体, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.testbedSelection.map(function(a){t.push(new i.a(function(e,t){var n=new(l.a.Object.extend("Testbed"));return n.id=a.id,n.destroy().then(function(t){e(t)},function(e){t(e.message)})})),i.a.all(t).then(function(t){e.$message({message:"删除成功",type:"success"}),t.length==e.testbedSelection.length&&e.getBedtable(e.departmentid)}).catch(function(t){e.$message({message:t,type:"error"})})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message.warning("请勾选要删除的检测台体")},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.map(function(e){t.multipleSelection.push(e.id)})},addtestbed:function(e){var t=this;if(""==e){var a=l.a.Object.extend("Testbed");(r=new a).set("name",this.testbedname),r.set("status","init");var n=r.relation("devices"),i=new(l.a.Object.extend("Devices")),s=new(l.a.Object.extend("Department"));s.id=this.devicelist.testbedid,r.set("department",s),this.multipleSelection.map(function(e){i.set("objectId",e),n.add(i)}),r.save().then(function(e){t.$message({message:"添加成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid),t.testbedname=""})}else{var r;a=l.a.Object.extend("Testbed");(r=new l.a.Query(a)).get(e).then(function(e){e.set("name",t.testbedname);var a=e.relation("devices"),n=new(l.a.Object.extend("Devices")),i=new(l.a.Object.extend("Department"));i.id=t.devicelist.testbedid,r.set("department",i),t.multipleSelection.map(function(e){t.testbeddevices.includes(e)||(n.set("objectId",e),a.add(n)),t.testbeddevices.map(function(e){t.multipleSelection.includes(e)||(n.set("objectId",e),a.remove(n))})}),e.save().then(function(e){t.$message({message:"修改成功",type:"success"}),t.beddialog=!1,t.getBedtable(t.departmentid)})})}},handleSizeChange:function(e){this.pagesize=e,this.getBedtable(this.departmentid)},handleCurrentChange:function(e){this.start=Number(e-1)*Number(this.pagesize),this.getBedtable(this.departmentid)}}},c=(a("C4sb"),a("YWEZ"),a("KHd+")),u=Object(c.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"testbedpump"},[a("Pumpdepartment",{staticStyle:{width:"360px",height:"100vh",overflow:"scroll","flex-shrink":"0",padding:"10px"},on:{pumpDetail:e.getPumpNode}}),e._v(" "),a("div",{staticStyle:{width:"calc(100% - 360px)",padding:"20px"}},[a("div",{staticClass:"bedtop"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[a("el-form-item",{attrs:{label:"检测台状态"}},[a("el-select",{attrs:{placeholder:"检测台状态"},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),e._v(" "),a("el-option",{attrs:{label:"良好",value:"fine"}}),e._v(" "),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属实验室"}},[a("el-select",{attrs:{placeholder:"所属实验室"},model:{value:e.formInline.laboratory,callback:function(t){e.$set(e.formInline,"laboratory",t)},expression:"formInline.laboratory"}},e._l(e.departmentList,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"检测台"}},[a("el-input",{attrs:{placeholder:"检测台"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getBedtable(e.departmentid)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"addbed",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.disposeTestbed}},[e._v("检测台配置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.testBedAdd}},[e._v("新增检测台")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.deleteTestBed}},[e._v("删除检测台")])],1),e._v(" "),a("div",{staticClass:"bedtable"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.bedData,border:""},on:{"selection-change":e.handleSelectionBed}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"设备组编号",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"检测台名称",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"企业名称",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属实验室",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.department?a("span",[e._v(e._s(t.row.attributes.department.attributes.name))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"检测台编号",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.number?a("span",[e._v(e._s(t.row.attributes.number))]):a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"检测台型号",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.model?a("span",[e._v(e._s(t.row.attributes.model))]):a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生产厂家",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.attributes.factory?a("span",[e._v(e._s(t.row.attributes.factory))]):a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"健康状况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["healthy"==t.row.attributes.state?a("span",[e._v("健康")]):"fine"==t.row.attributes.state?a("span",[e._v("良好")]):"commonly"==t.row.attributes.state?a("span",[e._v("一般")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联实验仪器",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["init"==t.row.attributes.status?a("span",{staticStyle:{color:"green"}},[e._v("运行中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"编辑",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEdit(t.row.id)}}},[e._v("配 置")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("撤 销")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.devicesDetail(t.row)}}},[e._v("查看设备")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[1,5,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"addbeddialog"},[a("el-dialog",{attrs:{title:"新增测试台体",visible:e.beddialog},on:{"update:visible":function(t){e.beddialog=t}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("label",{attrs:{for:""}},[e._v("测试台名称:")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},model:{value:e.testbedname,callback:function(t){e.testbedname=t},expression:"testbedname"}})],1),e._v(" "),a("div",{staticClass:"devicecompany"},[a("el-form",{attrs:{model:e.devicelist,inline:!0}},[a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{on:{change:e.selectCompany},model:{value:e.devicelist.departmentid,callback:function(t){e.$set(e.devicelist,"departmentid",t)},expression:"devicelist.departmentid"}},e._l(e.departmentlist,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"检测单位:"}},[a("el-select",{model:{value:e.devicelist.testbedid,callback:function(t){e.$set(e.devicelist,"testbedid",t)},expression:"devicelist.testbedid"}},e._l(e.testbedlist,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.devicesData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v("控制器")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v("控制台")]):a("span",[e._v("摄像头")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v("离线")]):e._e(),e._v(" "),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v("在线")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,50],"page-size":e.devicepagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.devicetotal},on:{"size-change":e.handleDeviceSizeChange,"current-change":e.handleDeviceCurrentChange}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.beddialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addtestbed(e.testbedid)}}},[e._v("确 定")])],1)],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.testbedname+"的设备",visible:e.bedDevicedialog,width:"80%"},on:{"update:visible":function(t){e.bedDevicedialog=t}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"deviceheader"},[a("div",{staticClass:"headerone"},[e._v("\n              网关设备\n            ")]),e._v(" "),a("div",{staticClass:"headertwo"},[e._v("\n              网络层级:2\n            ")]),e._v(" "),a("div",{staticClass:"headerthree"},[e._v("\n              网关编号:11223334455\n            ")]),e._v(" "),a("div",{staticClass:"headerfourth"},[e._v("\n             网关状态:"),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.gatewaystatus,callback:function(t){e.gatewaystatus=t},expression:"gatewaystatus"}})],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"},attrs:{data:e.bedDevicesData,border:""}},[a("el-table-column",{attrs:{label:"设备类别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v("控制器")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v("控制台")]):a("span",[e._v("摄像头")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"网络设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备厂商",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.factory))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"通信协议",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.basedata.agreement))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v("离线")]):e._e(),e._v(" "),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v("在线")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"投运时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"}})],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"devicetwo"},[a("div",{staticClass:"devicetwoone"},[e._v("\n              传感器\n            ")]),e._v(" "),a("div",{staticClass:"devicetwotwo"},[e._v("\n              传感器数量:6\n            ")]),e._v(" "),a("div",{staticClass:"devicetwothree"},[e._v("\n              在线设备:10\n            ")]),e._v(" "),a("div",{staticClass:"devicetwofourth"},[e._v("\n             故障设备:2\n            ")])]),e._v(" "),a("el-table",{ref:"multipleTable1",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"},attrs:{data:e.bedDevicesData},on:{"selection-change":e.deviceSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"传感器名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["DTU"==t.row.attributes.basedata.type?a("span",[e._v("控制器")]):"PC"==t.row.attributes.basedata.type?a("span",[e._v("控制台")]):a("span",[e._v("摄像头")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"传感器编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.devaddr))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备厂家",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备型号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备协议",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"网络层级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"内网编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"最新采集时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"当前状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["offline"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"red"}},[e._v("离线")]):e._e(),e._v(" "),"ready"==t.row.attributes.basedata.status?a("span",{staticStyle:{color:"green"}},[e._v("在线")]):e._e()]}}])})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.bedDevicedialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bedDevicedialog=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"测试台新增",visible:e.addbeddialog1,width:"50%"},on:{"update:visible":function(t){e.addbeddialog1=t}}},[a("div",[a("el-form",{ref:"addbedForm",staticClass:"demo-ruleForm",attrs:{model:e.addbedForm,rules:e.addbedFormrule,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"测试台名称",prop:"name"}},[a("el-input",{model:{value:e.addbedForm.name,callback:function(t){e.$set(e.addbedForm,"name",t)},expression:"addbedForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"测试台编号"}},[a("el-input",{model:{value:e.addbedForm.number,callback:function(t){e.$set(e.addbedForm,"number",t)},expression:"addbedForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家"}},[a("el-input",{model:{value:e.addbedForm.factory,callback:function(t){e.$set(e.addbedForm,"factory",t)},expression:"addbedForm.factory"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"控制台信息",required:""}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessBusiness2,"before-upload":e.beforeAvatarUpload2}},[e.addbedForm.imgsrc?a("img",{staticClass:"avatar",attrs:{src:e.addbedForm.imgsrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"所属实验室",prop:"laboratory"}},[a("el-select",{attrs:{placeholder:"请选择所属实验室"},model:{value:e.addbedForm.laboratory,callback:function(t){e.$set(e.addbedForm,"laboratory",t)},expression:"addbedForm.laboratory"}},e._l(e.departmentList,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"测试台型号"}},[a("el-input",{model:{value:e.addbedForm.model,callback:function(t){e.$set(e.addbedForm,"model",t)},expression:"addbedForm.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"测试台状况",prop:"state"}},[a("el-select",{attrs:{placeholder:"请选择测试台状况"},model:{value:e.addbedForm.state,callback:function(t){e.$set(e.addbedForm,"state",t)},expression:"addbedForm.state"}},[a("el-option",{attrs:{label:"健康",value:"healthy"}}),e._v(" "),a("el-option",{attrs:{label:"良好",value:"fine"}}),e._v(" "),a("el-option",{attrs:{label:"一般",value:"commonly"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{attrs:{type:"textarea",rows:8},model:{value:e.addbedForm.desc,callback:function(t){e.$set(e.addbedForm,"desc",t)},expression:"addbedForm.desc"}})],1)],1)])],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("计算机配置")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机名称"}},[a("el-select",{attrs:{placeholder:"请选择计算机名称"},model:{value:e.addbedForm.computername,callback:function(t){e.$set(e.addbedForm,"computername",t)},expression:"addbedForm.computername"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计算机key"}},[a("el-select",{attrs:{placeholder:"请选择计算机key"},model:{value:e.addbedForm.computerkey,callback:function(t){e.$set(e.addbedForm,"computerkey",t)},expression:"addbedForm.computerkey"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addbeddialog1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Determine("addbedForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.disposeVisible,width:"50%"},on:{"update:visible":function(t){e.disposeVisible=t}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.bedForm,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入测试台名称搜索"},model:{value:e.bedForm.name,callback:function(t){e.$set(e.bedForm,"name",t)},expression:"bedForm.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getAllBed}},[e._v("搜 索")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dispose",staticStyle:{display:"flex"}},[a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("测试台体")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUBed}},[e._v("清空")])],1),e._v(" "),e._l(e.alltestbed,function(t,n){return a("div",{key:n,staticClass:"text item"},[a("el-radio",{attrs:{label:t.id},model:{value:e.updatedId,callback:function(t){e.updatedId=t},expression:"updatedId"}},[e._v(e._s(t.attributes.name))])],1)})],2),e._v(" "),a("div",{staticStyle:{margin:"0 20px","text-align":"center"}},[a("span",{staticClass:"svg-container",staticStyle:{"line-height":"300px"}},[a("svg-icon",{staticStyle:{width:"3rem",height:"3rem"},attrs:{"icon-class":"relation"}})],1)]),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{width:"45%",height:"300px","overflow-y":"scroll"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实验仪器")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.handleCheckAllChange}},[e._v("全选")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearUpDevice}},[e._v("清空")])],1),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkdevice,callback:function(t){e.checkdevice=t},expression:"checkdevice"}},e._l(e.allpumpdevice,function(t,n){return a("el-checkbox",{key:n,staticStyle:{display:"block"},attrs:{label:t.id}},[e._v(e._s(t.attributes.devaddr))])}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.disposeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addTestRelation}},[e._v("确 定")])],1)])],1)},[],!1,null,"1e7075fa",null);u.options.__file="testbedpump.vue";t.default=u.exports},"RU/L":function(e,t,a){a("Rqdy");var n=a("WEpk").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},XXUv:function(e,t,a){"use strict";var n=a("gDS+"),i=a.n(n),s=a("YEIV"),l=a.n(s),r=a("v0iw"),o=a.n(r),d=(a("72z0"),{name:"Pumpdepartment",props:["regiondata"],data:function(){var e;return e={search:"",defaultProps:{isLeaf:"leaf",children:"children",label:"name"},data:[],node:[],treeData1:[],data1:[]},l()(e,"node",[]),l()(e,"resolve",[]),e},watch:{},computed:{treeData:function(){var e=JSON.parse(i()(this.data1));return e.filter(function(t){var a=e.filter(function(e){return t.objectId==e.ParentId});return a.length>0&&(t.children=a),0==t.ParentId})}},mounted:function(){console.log(this.data1)},methods:{reset:function(){this.search=""},handleNodeClick:function(e){this.$emit("pumpDetail",e)},getOrgList:function(e,t){var a=this;if(0===e.level){this.data=[];var n=o.a.Object.extend("Department");(i=new o.a.Query(n)).equalTo("ParentId","0"),i.find().then(function(e){return e.map(function(e){var t={};e.createtime=new Date(e.attributes.createdAt).toLocaleDateString(),t.name=e.attributes.name,t.ParentId=e.attributes.ParentId,t.objectId=e.id,t.level=e.attributes.level,t.createtime=e.createtime,t.leaf=e.attributes.leafnode,t.icon=e.attributes.org_type,t.isvcon=!1,a.data.push(t),a.data1.push(t)}),t(a.data)},function(e){t([]),"209"==e.code?(a.$message({type:"warning",message:"登陆权限过期，请重新登录"}),a.$router.push({path:"/login"})):119==e.code&&a.$message({type:"error",message:"没有操作权限"})})}else if(0!==e.level&&"实验台"!==e.data.icon&&0==e.data.isvcon){this.data=[];var i;n=o.a.Object.extend("Department");(i=new o.a.Query(n)).equalTo("ParentId",e.data.objectId),i.ascending("org_type"),i.limit(1e4),i.find().then(function(e){return e.map(function(e){var t={};e.createtime=new Date(e.attributes.createdAt).toLocaleDateString(),t.name=e.attributes.name,t.ParentId=e.attributes.ParentId,t.objectId=e.id,t.level=e.attributes.level,t.createtime=e.createtime,1==e.attributes.leafnode?t.isvcon=!0:t.isvcon=!1,t.leaf=e.attributes.leafnode,t.icon=e.attributes.org_type,a.data.push(t),a.data1.push(t)}),t(a.data)},function(e){t([]),"209"==e.code?(a.$message({type:"warning",message:"登陆权限过期，请重新登录"}),a.$router.push({path:"/login"})):119==e.code&&a.$message({type:"error",message:"没有操作权限"})})}}}}),c=(a("zbzu"),a("KHd+")),u=Object(c.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resource1",staticStyle:{"border-left":"38px solid #1579bf","padding-left":"10px"}},[a("div",[a("el-input",{staticStyle:{width:"150px"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"margin-top":"20px"},attrs:{props:e.defaultProps,"expand-on-click-node":!1,"highlight-current":!0,lazy:"",load:e.getOrgList,"node-key":"objectId"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return a("span",{},["质检中心"==i.icon?a("svg-icon",{staticStyle:{width:"20px",height:"20px"},attrs:{"icon-class":"质检中心"}}):"泵单位"==i.icon?a("svg-icon",{staticStyle:{width:"20px",height:"20px"},attrs:{"icon-class":"水泵企业"}}):"实验室"==i.icon?a("svg-icon",{staticStyle:{width:"20px",height:"20px"},attrs:{"icon-class":"实验室"}}):e._e(),e._v(" "),a("span",{staticStyle:{"padding-left":"4px"}},[e._v(e._s(n.label))])],1)}}])})],1)])},[],!1,null,null,null);u.options.__file="pumpdepartment.vue";t.a=u.exports},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},YWEZ:function(e,t,a){"use strict";var n=a("yT8x");a.n(n).a},yT8x:function(e,t,a){},zbzu:function(e,t,a){"use strict";var n=a("35y/");a.n(n).a}}]);