(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-578e"],{Jedr:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"d",function(){return c});var n=a("t3Un");function s(e,t,a,s,r){return Object(n.a)({url:"/shuwa_task/historyVcaddr",method:"get",params:{node:null,start:e,length:t,di:a,datetime:s,"search[value]":r}})}function r(){return Object(n.a)({url:"/shuwa_task/diList",method:"get"})}function i(e,t,a,s){return Object(n.a)({url:"shuwa_task/historyMeter",method:"get",params:{node:e,di:t,datetime:a,vcaddr:s}})}function o(e,t,a,s,r,i,o){return Object(n.a)({url:"/shuwa_task/vcaddr",method:"get",params:{start:e,length:t,tid:a,rid:s,starttime:r,freq:i,search:o}})}function l(e,t,a,s,r,i,o){return Object(n.a)({url:"shuwa_task/meter",method:"get",params:{tid:e,rid:t,starttime:a,vcaddr:s,freq:r,fdate:i,di:o}})}function c(e){return Object(n.a)({url:"/shuwa_task/readMeter",method:"post",data:{datetime:e.datetime,di:e.di,pn:e.pn,taskid:e.taskid,vcaddr:e.vcaddr,tattr:e.tattr}})}},MPjy:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("X3IP");function s(e){"209"==e.code?(Object(n.Message)({message:"您权限过期,请重新登录",type:"error",duration:2e3}),sessionStorage.removeItem("roles"),sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("list"),location.href="/#/login"):119==e.code?Object(n.Message)({message:"没有操作权限",type:"warning",duration:2e3}):Object(n.Message)({message:e.message,type:"error"})}},Mld3:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o});var n=a("t3Un");function s(e){var t=e.order,a=e.limit,s=e.skip,r=e.keys,i=e.include,o=e.where;return Object(n.a)({url:"/classes/Project",method:"get",params:{order:t,limit:a,skip:s,keys:r,include:i,where:o}})}function r(e){if("number"==typeof e){e=String(e);var t=/0{8}$/,a=/0{4}$/;return t.test(e)?e.replace(t,"亿"):a.test(e)?e.replace(a,"万"):e}if("string"==typeof e){var n=/万+$/,s=/亿+$/;return s.test(e)?e.replace(s,"00000000"):n.test(e)?e.replace(n,"0000"):e}}function i(e,t,a){return Object(n.a)({url:"/lictool",method:"get",params:{appid:e,appsecret:t,shuwa_iot_software:a}})}function o(e){return Object(n.a)({url:"/licsetup",method:"get",params:{license:e}})}},R610:function(e,t,a){},"RU/L":function(e,t,a){a("Rqdy");var n=a("WEpk").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},Vmne:function(e,t,a){},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},cLOG:function(e,t,a){"use strict";var n=a("R610");a.n(n).a},tIRQ:function(e,t,a){"use strict";a.r(t);var n=a("4d7F"),s=a.n(n),r=a("YEIV"),i=a.n(r),o=(a("Jedr"),a("fe1z")),l=(a("Mld3"),a("lTfz"),a("v0iw")),c=a.n(l),u=a("MPjy"),d="",m={name:"TaskCollection1",props:{productId:{type:String,default:""},isreload:{type:Number,default:0}},data:function(){var e=this;return i()({selectdata:"",options1:[],applist:[],productlist:[],taskform:{name:"",ftype:0,downchannel:[{type:"",interval:20,unit:"seconds"}],upchannel:[],starttime:"",endtime:"",unit:"",freq:"",meteraddress:"all",frozendate:"",project:"",product:"",pagesize:10,pageindex:1,operation:"read"},taskformrules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"}],ftype:[{required:!0,message:"请选择终端类型",trigger:"change"}],project:[{required:!0,message:"请选择工程",trigger:"change"}],product:[{required:!0,message:"请选择产品",trigger:"change"}],starttime:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],endtime:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],meteraddress:[{required:!0,message:"请输入终端逻辑地址",trigger:"blur"}],operation:[{required:!0,message:"请输入操作指令",trigger:"blur"}],unit:[{required:!0,message:"请选择间隔类型",trigger:"change"}],freq:[{required:!0,message:"请选择间隔时长",trigger:"change"}],upchannel:[{required:!0,message:"请选择上报通道",trigger:"change"}]},node:null,total:0,start:0,length:10,draw:1,tableData3:[],multipleSelection:[],data:[],diselect:[],dialogVisible:!1,valueforsearch:"",pickerOptionsStart:{disabledDate:function(t){var a=e.taskform.endtime;return a&&t.getTime()>new Date(a).getTime()||t.getTime()<Date.now()-864e5}},pickerOptionsEnd:{disabledDate:function(t){var a=e.taskform.starttime;return a?t.getTime()<new Date(a).getTime()-864e5:t.getTime()<Date.now()-864e5}},options:[{value:0,label:"设备"},{value:1,label:"网关"}],date:[{value:"day",label:"日"},{value:"month",label:"月"},{value:"hour",label:"时"},{value:"minute",label:"分"},{value:"seconds",label:"秒"}],spacing:[],sendup:[{value:0,label:"物理通道"},{value:1,label:"虚拟通道"}],senddown:[{value:0,label:"物理通道"},{value:1,label:"虚拟通道"}],downchannel:[{type:1,interval:20,unit:"seconds"}],today:"today",idselete:[],lunci:"",loading:!0,taskobjectid:"",resourcechannelData:[],channelData:[],projectlist:[]},"productlist",[])},watch:{productId:{deep:!0,handler:function(e){}},isreload:{deep:!0,handler:function(e){this.getResourceChannel()}}},mounted:function(){this.search(),this.Project()},methods:{Project:function(){var e=this,t=c.a.Object.extend("Project");new c.a.Query(t).find().then(function(t){e.projectlist=t},function(e){Object(u.a)(e)})},inputChange:function(e){console.log(e)},projectSelect:function(e){var t=this,a=new(c.a.Object.extend("Project"));a.id=e,a.relation("product").query().find().then(function(e){t.productlist=e},function(e){Object(u.a)(e)})},getProduct:function(e){var t=this,a=c.a.Object.extend("Product");new c.a.Query(a).get(e).then(function(a){a.attributes.thing.properties&&a.attributes.thing.properties.map(function(e){t.data.push({key:e.identifier,label:e.name+"--"+e.identifier})}),t.taskform.ftype=a.attributes.nodeType,t.getProductChannel(e),t.getResourceChannel(e)})},getProductChannel:function(e){var t=this,a=c.a.Object.extend("Channel"),n=new c.a.Query(a),s=new(c.a.Object.extend("Product"));s.id=e,n.equalTo("product",s),n.equalTo("type","1"),n.ascending("-updatedAt"),n.find().then(function(e){t.channelData=e})},getResourceChannel:function(e){var t=this,a=c.a.Object.extend("Channel"),n=new c.a.Query(a),s=new(c.a.Object.extend("Product"));s.id=e,n.equalTo("product",s),n.equalTo("type","2"),n.ascending("-updatedAt"),n.find().then(function(e){t.resourcechannelData=e})},timestampToTime:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()+1<=10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds())},removeDomain1:function(e){var t=this.taskform.downchannel.indexOf(e);-1!==t&&this.taskform.downchannel.splice(t,1)},addDomain1:function(){this.taskform.downchannel.push({type:"",interval:"",unit:"seconds"})},removeDomain:function(e){var t=this.downchannel.indexOf(e);-1!==t&&this.downchannel.splice(t,1)},addDownChannel:function(){this.downchannel.push({type:"",interval:"",unit:"seconds"})},handleClose:function(){this.$refs.taskform.resetFields(),this.dialogVisible=!1,this.taskform.name="",this.taskform.frozendate="",this.taskform.starttime="",this.taskform.endtime="",this.taskform.freq="",this.taskform.unit="",d=Math.floor(128*Math.random()+1),this.taskobjectid="",this.taskform.downchannel=[{type:1,interval:20,unit:"seconds"}],this.diselect=[],this.taskform.upchannel=[]},search:function(){var e=this;this.loading=!0;var t=c.a.Object.extend("Crond"),a=new c.a.Query(t);""!=this.valueforsearch&&a.matches("name",this.valueforsearch,"i"),""!=this.productId&&a.equalTo("product",this.productId),a.doesNotExist("app"),a.ascending("-updatedAt"),a.skip(this.start),a.limit(this.length),a.count().then(function(t){t&&(e.total=t),a.find().then(function(t){t&&(e.tableData3=t,e.loading=!1)})},function(t){"209"==t.code?(e.$message({type:"warning",message:"登陆权限过期，请重新登录"}),e.$router.push({path:"/login"})):119==t.code&&e.$message({type:"error",message:"没有操作权限"})})},editcrond:function(e){var t=this,a=c.a.Object.extend("Crond");new c.a.Query(a).get(e).then(function(e){t.dialogVisible=!0,t.taskform.name=e.attributes.name,t.taskform.unit=e.attributes.args.unit,"string"==typeof e.attributes.args.pns?t.type=e.attributes.args.pns:(t.taskform.meteraddress=e.attributes.args.pns.total,t.taskform.pagesize=e.attributes.args.pns.page_size,t.taskform.pageindex=e.attributes.args.pns.page_index),t.taskform.freq=e.attributes.args.freq,t.taskform.starttime=1e3*e.attributes.args.starttime,t.taskform.endtime=1e3*e.attributes.args.endtime,t.taskform.downchannel=e.attributes.args.downchannel,t.diselect=e.attributes.args.dis,t.taskform.upchannel=e.attributes.args.upchannel,e.attributes.args.frozendate?t.taskform.frozendate=1e3*e.attributes.args.frozendate:t.taskform.frozendate="",t.taskobjectid=e.id,t.selectchange()})},channelMap:function(e){var t=this,a=[];return e.map(function(e){t.channelData.map(function(t){t.id==e.type&&a.push(t.attributes.name)})}),a.join(",")},channelResorceMap:function(e){var t=this,a=[];return e.map(function(e){t.resourcechannelData.map(function(t){e==t.id&&a.push(t.attributes.name)})}),a.join(",")},selectchange:function(){"month"==this.taskform.unit||"day"==this.taskform.unit?this.spacing=[{value:"1",label:"1"}]:"seconds"==this.taskform.unit?this.spacing=[{value:"1",label:"1"},{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"},{value:"25",label:"25"},{value:"30",label:"30"},{value:"35",label:"35"},{value:"40",label:"40"},{value:"45",label:"45"},{value:"50",label:"50"},{value:"55",label:"55"},{value:"59",label:"59"}]:"hour"==this.taskform.unit?this.spacing=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"6",label:"6"},{value:"8",label:"8"},{value:"12",label:"12"}]:this.spacing=[{value:"10",label:"10"},{value:"20",label:"20"},{value:"30",label:"30"},{value:"1",label:"1"}]},handleSelectionChange:function(e){this.idselete=[],this.multipleSelection=e},handleSizeChange:function(e){this.length=e,this.search()},handleCurrentChange:function(e){this.start=(e-1)*this.length,this.search()},enddata:function(){this.taskform.endtime<=this.taskform.starttime&&(this.$message.warning("采集结束时间要小于开始时间"),this.taskform.endtime=""),this.taskform.endtime<Date.now()-2e3&&(this.$message.warning("采集结束时间要大于当前时间"),this.taskform.endtime="")},testdata:function(){this.taskform.endtime<=this.taskform.starttime&&""!=this.taskform.endtime&&null!=this.taskform.endtime&&(this.$message.warning("采集结束时间要小于开始时间"),this.taskform.starttime=""),this.taskform.starttime<Date.now()-2e3&&(this.$message.warning("采集开始时间要大于当前时间"),this.taskform.starttime="")},convartion:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;if(0==t.diselect.length)t.$message.error("请选择数据项标识");else{var n="";d=Math.floor(128*Math.random()+1),n=-1!=t.taskform.meteraddress.indexOf("all")?"all":{total:t.taskform.meteraddress,page_size:t.taskform.pagesize,page_index:t.taskform.pageindex};var s=[],r="";r="day"==t.taskform.unit?2:"hour"==t.taskform.unit?1:"minute"==t.taskform.unit?0:"seconds"==t.taskform.unit?3:"",t.taskform.downchannel.map(function(e){s.push([e.type,e.interval])});var i=c.a.Object.extend("Crond"),l=new i,u=new c.a.Query(i),m=new(c.a.Object.extend("Product"));""!=t.taskobjectid&&(l.id=t.taskobjectid),""!=t.taskform.frozendate?l.set("task",{di:t.diselect,chs:s,res:t.taskform.upchannel,pns:n,tertype:t.taskform.ftype,fdate:t.taskform.frozendate/1e3,operation:t.taskform.operation}):l.set("task",{di:t.diselect,chs:s,pns:n,res:t.taskform.upchannel,operation:t.taskform.operation}),l.set("args",{frozendate:t.taskform.frozendate/1e3,chs:s,freq:Number(t.taskform.freq),pns:n,unit:t.taskform.unit,cycle:t.taskform.unit,dis:t.diselect,tertype:t.taskform.ftype,upchannel:t.taskform.upchannel,downchannel:t.taskform.downchannel,endtime:Object(o.o)(t.taskform.endtime),starttime:Object(o.o)(t.taskform.starttime),operation:t.taskform.operation}),l.set("active",1),l.set("name",t.taskform.name),l.set("crond",{end_time:Object(o.o)(t.taskform.endtime),freq:Number(t.taskform.freq),unit:r,start_time:Object(o.o)(t.taskform.starttime)}),l.set("tid",d),m.id=t.productId,l.set("product",m),""==t.taskobjectid?(u.equalTo("tid",d),u.find().then(function(a){0==a.length?l.save().then(function(a){a&&(t.$message({message:"添加成功",type:"success"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.taskform.name="",t.taskform.frozendate="",t.taskform.starttime="",t.taskform.endtime="",t.taskform.freq="",t.taskform.unit="",t.taskform.downchannel=[{type:1,interval:20,unit:"seconds"}]),t.taskform.frozendate="",t.diselect=[],t.taskform.upchannel=[],t.search()},function(e){"209"==e.code?(t.$message({type:"warning",message:"登陆权限过期，请重新登录"}),t.$router.push({path:"/login"})):119==e.code&&t.$message({type:"error",message:"没有操作权限"})}):t.$message({message:"任务id重复",type:"error"})})):l.save().then(function(a){a&&(t.$message({message:"编辑成功",type:"success"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.taskform.name="",t.taskform.frozendate="",t.taskform.starttime="",t.taskform.endtime="",t.taskform.freq="",t.taskform.unit="",d=Math.floor(128*Math.random()+1),t.taskobjectid="",t.taskform.downchannel=[{type:1,interval:20,unit:"seconds"}]),t.diselect=[],t.taskform.upchannel=[],t.search()},function(e){"209"==e.code?(t.$message({type:"warning",message:"登陆权限过期，请重新登录"}),t.$router.push({path:"/login"})):119==e.code&&t.$message({type:"error",message:"没有操作权限"})})}})},getfrozen:function(){},selectTime:function(e){"other"==e&&this.getfrozen()},deletetask:function(){var e=this,t=[];0!=this.multipleSelection.length?this.multipleSelection.map(function(a){t.push(new s.a(function(e,t){var n=new(c.a.Object.extend("Crond"));return n.id=a.id,n.destroy().then(function(t){e(t)},function(e){t(e.message)})})),s.a.all(t).then(function(t){e.$message({message:"删除成功",type:"success"}),console.log(t),t.length==e.multipleSelection.length&&e.search()}).catch(function(t){e.$message({message:t,type:"error"})})}):this.$message.warning("请勾选要删除的任务")}}},f=(a("tKv0"),a("cLOG"),a("KHd+")),p=Object(f.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task_collection"},[a("div",{staticClass:"top"},[a("div",{staticClass:"left"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("task.Configurationtask")))]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:e.deletetask}},[e._v(e._s(e.$t("developer.delete")))])],1),e._v(" "),a("div",{staticClass:"right"},[a("el-input",{staticStyle:{width:"200px","margin-left":"30px"},attrs:{type:"text",placeholder:e.$t("task.pleaseentertaskname"),clearable:""},model:{value:e.valueforsearch,callback:function(t){e.valueforsearch=t},expression:"valueforsearch"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("developer.search")))])],1)]),e._v(" "),a("div",{staticClass:"center"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.Taskname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.Starttime")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.attributes.args.starttime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.DataID")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.args.dis.join(",")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.Cycleunit")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.args.freq))]),e._v(" "),"day"==t.row.attributes.args.unit?a("span",[e._v(e._s(e.$t("task.Day")))]):"minute"==t.row.attributes.args.unit?a("span",[e._v(e._s(e.$t("task.Minute")))]):"hour"==t.row.attributes.args.unit?a("span",[e._v(e._s(e.$t("task.Hour")))]):"month"==t.row.attributes.args.unit?a("span",[e._v(e._s(e.$t("task.month")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上报通道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.channelResorceMap(t.row.attributes.args.upchannel)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.Sendchannel")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.channelMap(t.row.attributes.args.downchannel)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("task.Operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.editcrond(t.row.id)}}},[e._v(e._s(e.$t("task.Edit")))])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{background:"","page-sizes":[10,25,50,100],"page-size":e.length,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("task.Configuretask"),visible:e.dialogVisible,width:"50%","before-close":e.handleClose,"close-on-click-modal":!1,top:"5vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog"},[a("el-form",{ref:"taskform",attrs:{model:e.taskform,"label-width":"120px",rules:e.taskformrules}},[a("el-form-item",{attrs:{label:"工程名称",prop:"project"}},[a("el-select",{attrs:{placeholder:"请选择工程"},on:{change:e.projectSelect},model:{value:e.taskform.project,callback:function(t){e.$set(e.taskform,"project",t)},expression:"taskform.project"}},e._l(e.projectlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.title,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.productname"),prop:"product"}},[a("el-select",{attrs:{placeholder:e.$t("task.Select")},on:{change:e.getProduct},model:{value:e.taskform.product,callback:function(t){e.$set(e.taskform,"product",t)},expression:"taskform.product"}},e._l(e.productlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Taskname"),prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("task.pleaseentertaskname")},model:{value:e.taskform.name,callback:function(t){e.$set(e.taskform,"name",t)},expression:"taskform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Starttime"),prop:"starttime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:e.$t("task.Selectstarttime"),"picker-options":e.pickerOptionsStart},on:{change:e.testdata},model:{value:e.taskform.starttime,callback:function(t){e.$set(e.taskform,"starttime",t)},expression:"taskform.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Collectioninterval"),required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"unit"}},[a("el-select",{attrs:{placeholder:e.$t("task.Select")},on:{change:e.selectchange},model:{value:e.taskform.unit,callback:function(t){e.$set(e.taskform,"unit",t)},expression:"taskform.unit"}},e._l(e.date,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"freq"}},[a("el-select",{attrs:{placeholder:e.$t("task.Select")},model:{value:e.taskform.freq,callback:function(t){e.$set(e.taskform,"freq",t)},expression:"taskform.freq"}},e._l(e.spacing,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Endtime"),prop:"endtime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:e.$t("task.Selectendtime"),"picker-options":e.pickerOptionsEnd},on:{change:e.enddata},model:{value:e.taskform.endtime,callback:function(t){e.$set(e.taskform,"endtime",t)},expression:"taskform.endtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Frozendate")}},[a("el-date-picker",{attrs:{type:"date",placeholder:e.$t("task.Currentday"),"value-format":"timestamp"},model:{value:e.taskform.frozendate,callback:function(t){e.$set(e.taskform,"frozendate",t)},expression:"taskform.frozendate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("task.Reportchannel"),prop:"upchannel"}},[a("el-select",{attrs:{placeholder:e.$t("task.Multiplereportingchannelsareallowed"),multiple:""},model:{value:e.taskform.upchannel,callback:function(t){e.$set(e.taskform,"upchannel",t)},expression:"taskform.upchannel"}},e._l(e.resourcechannelData,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"lineone",attrs:{label:e.$t("task.Collectionpolicy"),"label-width":"100px"}},e._l(e.taskform.downchannel,function(t,n){return a("div",{key:n,staticClass:"flexg"},[a("el-form-item",{staticClass:"elformcontent",attrs:{label:e.$t("task.Rotation")+(n+1),"label-width":"60px",prop:"downchannel."+n+".type",rules:[{required:!0,message:"选择通道类型",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:e.$t("task.Selectchannel")},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},e._l(e.channelData,function(e){return a("el-option",{key:e.id,attrs:{label:e.attributes.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"downchannel."+n+".interval",rules:[{required:!0,message:"输入时长",type:"number"}]}},[a("el-input",{attrs:{type:"number",min:1,placeholder:"本轮时长"},model:{value:t.interval,callback:function(a){e.$set(t,"interval",e._n(a))},expression:"item.interval"}})],1),e._v(" "),a("el-form-item",[a("el-select",{model:{value:t.unit,callback:function(a){e.$set(t,"unit",a)},expression:"item.unit"}},[a("el-option",{attrs:{label:e.$t("task.Hour"),value:"hours"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("task.Minute"),value:"minutes"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("task.Seconds"),value:"seconds"}})],1)],1),e._v(" "),a("el-form-item",[a("el-link",{attrs:{type:"primary",underline:!1,icon:"el-icon-minus"},on:{click:function(a){a.preventDefault(),e.removeDomain1(t)}}},[e._v(e._s(e.$t("developer.delete")))])],1)],1)})),e._v(" "),a("div",{staticStyle:{width:"100%","margin-left":"50px"}},[a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain1}},[e._v(e._s(e.$t("task.Add")))])],1),e._v(" "),a("el-form-item",{staticClass:"lineone",attrs:{"label-width":"20px",required:""}},[a("div",{staticClass:"flexg"},[a("el-form-item",{attrs:{label:"设备总数",prop:"meteraddress","label-width":"100px"}},[a("el-input",{attrs:{type:"text",placeholder:"all代表全部,数字代表数据大小"},on:{change:e.inputChange},model:{value:e.taskform.meteraddress,callback:function(t){e.$set(e.taskform,"meteraddress",t)},expression:"taskform.meteraddress"}}),e._v(" "),a("p",{staticStyle:{color:"black",margin:"0",position:"absolute",top:"25px"}},[e._v("(all代表全部)")])],1),e._v(" "),"all"!=e.taskform.meteraddress?a("el-form-item",{attrs:{label:"起始页码","label-width":"80px",prop:"pageindex",rules:[{required:!0,message:"请输入长度",tigger:"blur",type:"number"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.taskform.pageindex,callback:function(t){e.$set(e.taskform,"pageindex",e._n(t))},expression:"taskform.pageindex"}})],1):e._e(),e._v(" "),"all"!=e.taskform.meteraddress?a("el-form-item",{attrs:{label:"每页设备数","label-width":"100px",prop:"pagesize",rules:[{required:!0,message:"请输入页数大小",tigger:"blur",type:"number"}]}},[a("el-input",{attrs:{type:"text"},model:{value:e.taskform.pagesize,callback:function(t){e.$set(e.taskform,"pagesize",e._n(t))},expression:"taskform.pagesize"}})],1):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"操作指令",prop:"operation"}},[a("el-input",{attrs:{type:"text"},model:{value:e.taskform.operation,callback:function(t){e.$set(e.taskform,"operation",t)},expression:"taskform.operation"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"di",staticStyle:{width:"100%"}},[a("label",{attrs:{for:""}},[e._v(e._s(e.$t("task.DataitemID")))]),e._v(" "),a("el-transfer",{attrs:{data:e.data,titles:["物模型","物模型"],"button-texts":[e.$t("task.Delete"),e.$t("developer.add")]},model:{value:e.diselect,callback:function(t){e.diselect=t},expression:"diselect"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},on:{click:e.handleClose}},[e._v(e._s(e.$t("developer.cancel")))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.convartion("taskform")}}},[e._v(e._s(e.$t("task.Submission")))])],1)])],1)},[],!1,null,"0e75cd7a",null);p.options.__file="task_collection1.vue";t.default=p.exports},tKv0:function(e,t,a){"use strict";var n=a("Vmne");a.n(n).a}}]);