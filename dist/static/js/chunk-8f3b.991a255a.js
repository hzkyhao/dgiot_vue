(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-8f3b"],{"43kb":function(e,r,t){"use strict";var s=t("nSxx");t.n(s).a},OFg0:function(e,r,t){"use strict";t.r(r);var s=t("v0iw"),i={data:function(){return{originrole:[],rules1:[],needdelarr:[],parentrole:[],userid:"",roleId:"",insert:"",ruleForm:{name:"",description:"",region:"",delivery:!1,type:[],resource:"",desc:"",data2:[],list:[],parentrole:"",defaultProps:{children:"children",label:"label"},rules1:[]},rules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:3,message:"最少三个字符",trigger:"blur"}],parentrole:[{required:!0,message:"请选择父级角色",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个权限",trigger:"change"}],roledetail:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},orderresultes:[],parentid:"",roles:[]}},methods:{diguiquchu:function(e,r,t,s){var i=this;r.map(function(r){console.log(r.key,t,"----------"),r.key==t&&r.children.length>0?(s.push(t),i.diguiquchu(e,r.children,t,s)):r.key!=t&&r.children.length>0&&i.diguiquchu(e,r.children,t,s)})},addroles:function(){var e=this,r=s.Parse.User.current().id;this.insert=this.$route.query.insert;var t=s.Parse.Object.extend("_Role"),i=new t,n=new s.Parse.ACL;new s.Parse.Query(t);n.setRoleReadAccess(this.ruleForm.name,!0),n.setRoleWriteAccess(this.ruleForm.name,!0),n.setRoleReadAccess("root",!0),n.setRoleWriteAccess("root",!0),n.setRoleReadAccess("admin",!0),n.setRoleWriteAccess("admin",!0),n.setReadAccess(r,!0),n.setWriteAccess(r,!0),i.set("ACL",n),i.set("name",this.ruleForm.name),i.set("desc",this.ruleForm.desc),i.set("alias",this.ruleForm.description),i.save().then(function(r){e.selfid=r.id,e.originrole.push(r),e.$message({message:"新增成功",type:"success"}),e.$router.push({path:"/roles/roles"})},function(e){console.log(e)})},nodetree:function(){var e=this;this.userid=s.Parse.User.current().id;var r=s.Parse.Object.extend("_User");new s.Parse.Query(r).find(this.userid).then(function(t){var i=s.Parse.Object.extend("_Role"),n=new s.Parse.Query(i),l=new r;n.addAscending("createdAt"),n.find().then(function(r){l.set("objectId",e.userid),n.equalTo("users",l),n.find().then(function(r){console.log(r),e.parentrole=r})})})},getdetail:function(){this.insert=this.$route.query.insert,console.log(this.insert),this.roleId=this.$route.query.roleId,console.log(this.insert,"insert")}},mounted:function(){}},n=(t("43kb"),t("KHd+")),l=Object(n.a)(i,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("h2",{staticStyle:{width:"200px",background:"DarkCyan",height:"40px","text-align":"center","line-height":"40px",cursor:"pointer"}},[e._v("添加角色")]),e._v(" "),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名",prop:"name"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.description,callback:function(r){e.$set(e.ruleForm,"description",r)},expression:"ruleForm.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"desc"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.ruleForm.desc,callback:function(r){e.$set(e.ruleForm,"desc",r)},expression:"ruleForm.desc"}})],1),e._v(" "),t("el-form-item",[0==e.insert||1==e.insert?t("el-button",{staticStyle:{"margin-right":"10%"},attrs:{type:"primary"}},[e._v("取消")]):e._e(),e._v(" "),0==e.insert||1==e.insert?t("el-button",{attrs:{type:"success"},on:{click:function(r){e.addroles()}}},[e._v("确定")]):e._e()],1)],1)],1)},[],!1,null,"0afe125c",null);l.options.__file="addroles.vue";r.default=l.exports},nSxx:function(e,r,t){}}]);