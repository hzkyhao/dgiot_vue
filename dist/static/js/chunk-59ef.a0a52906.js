(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-59ef"],{B7Cu:function(e,t,r){},FIJ9:function(e,t,r){"use strict";var o=r("k8BI");r.n(o).a},RTLq:function(e,t,r){"use strict";var o=r("B7Cu");r.n(o).a},k8BI:function(e,t,r){},v8J3:function(e,t,r){"use strict";r.r(t);var o=r("72z0"),a=r("v0iw"),s=r.n(a),i={data:function(){return{positional:["大学专科","大学本科","硕士研究生","博士研究生"],active:1,powerform:{name:"",birthday:"",job:"",professional:"",politic_status:"",education:"",positional_titles:"",identity:"",graduate_institutions:"",contraryimageUrl:"",frontimageUrl:"",joblicense:"",addr:"",working_seniority:"",training_experience:"",start_time:"",practitioners_experience:"",userphone:""},powerrules:{name:[{required:!0,message:"请输入个人姓名",trigger:"blur"}],identity:[{required:!0,message:"请输入正确身份证号",trigger:"blur"},{validator:function(e,t,r){/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)?r():18!=t.length?r(new Error("请输入18位身份证号")):r(new Error("需要输入正确身份证号码"))},trigger:"blur"}],birthday:[{type:"date",required:!0,message:"选择签发日期",trigger:"change"}],job:[{required:!0,message:"请输入企业职务",trigger:"blur"}],politic_status:[{required:!0,message:"请选择政治面貌",trigger:"change"}],positional_titles:[{required:!0,message:"请输入个人职称",trigger:"blur"}],working_seniority:[{required:!0,message:"请选择相关工作年限",trigger:"change"}],practitioners_experience:[{required:!0,message:"请输入相关工作经历",trigger:"change"}],professional:[{required:!0,message:"请输入主修专业",trigger:"blur"}],userphone:[{required:!0,message:"请输入联系方式",trigger:"blur"},{validator:function(e,t,r){/^1[3-9]\d{9}$/.test(t)?r():r(new Error("手机号码格式不正确！"))},trigger:"blur"}]},regionData:o.regionData}},mounted:function(){},methods:{beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),r="jpg"===t||"JPG"===t||"png"===t||"PNG"===t||"bpm"===t||"BPM"===t,o=e.size/1024/1024<10;return r?(console.log(e),o?r||o:(this.$message({message:"上传文件大小不能超过 10MB!",type:"error"}),!1)):(this.$message({message:"上传图片只能是jpg / png / bpm格式!",type:"error"}),!1)},handleFrontSuccess:function(e,t,r){this.powerform.frontimageUrl=e.path,this.$message({message:"上传成功！",type:"success"})},handleContrarySuccess:function(e,t,r){this.powerform.contraryimageUrl=e.path,this.$message({message:"上传成功！",type:"success"})},handleJobSuccess:function(e,t,r){this.powerform.joblicense=e.path,this.$message({message:"上传成功！",type:"success"})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("有必填项未填写"),!1;if(""!=t.powerform.frontimageUrl)if(""!=t.powerform.contraryimageUrl)if(""!=t.powerform.joblicense){var r=new(s.a.Object.extend("PersonAuthtication")),o=new s.a.ACL;""!=t.personempowerid&&(r.id=t.personempowerid);var a=s.a.User.current().id;o.setReadAccess(a,!0),o.setWriteAccess(a,!0),o.setRoleWriteAccess("pump_admin",!0),o.setRoleReadAccess("pump_admin",!0),r.set("ACL",o),r.set("name",t.powerform.name),r.set("birthday",t.powerform.birthday/1e3),r.set("job",t.powerform.job),r.set("education",t.powerform.education),r.set("positional_titles",t.powerform.positional_titles),r.set("identity",t.powerform.identity),r.set("userphone",t.powerform.userphone),r.set("graduate_institutions",t.powerform.graduate_institutions),r.set("contraryimageUrl",t.powerform.contraryimageUrl),r.set("frontimageUrl",t.powerform.frontimageUrl),r.set("joblicense",t.powerform.joblicense),r.set("addr",t.powerform.addr),r.set("working_seniority",t.powerform.working_seniority),r.set("professional",t.powerform.professional),r.set("training_experience",t.powerform.training_experience),r.set("start_time",t.powerform.start_time/1e3),r.set("practitioners_experience",t.powerform.practitioners_experience),r.set("status","Pending"),r.save().then(function(e){e&&(t.personempowerid=e.id,t.$message.success("审核提交成功"),t.active=2)})}else t.$message.error("请上传资质资历图片");else t.$message.error("请上传身份证贝面照");else t.$message.error("请上传身份证正面照")})},cancelAdd:function(){this.active=1}}},l=(r("FIJ9"),r("RTLq"),r("KHd+")),n=Object(l.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"person_empower"},[r("el-steps",{attrs:{active:e.active,simple:""}},[r("el-step",{attrs:{title:"1填写个人基本信息",icon:"el-icon-upload"}}),e._v(" "),r("el-step",{attrs:{title:"2正在审核",icon:"el-icon-s-unfold"}}),e._v(" "),r("el-step",{attrs:{title:"3审核结果",icon:"el-icon-s-check"}})],1),e._v(" "),1==e.active?r("div",{staticClass:"empower1"},[r("h3",{staticStyle:{border:"1px solid #cccccc",height:"40px","line-height":"40px","padding-left":"20px"}},[e._v("个人资质认证")]),e._v(" "),r("div",{staticClass:"empowerform"},[r("el-form",{ref:"powerform",attrs:{model:e.powerform,"label-width":"120px",rules:e.powerrules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.powerform.name,callback:function(t){e.$set(e.powerform,"name",t)},expression:"powerform.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择出生日期","value-format":"timestamp"},model:{value:e.powerform.birthday,callback:function(t){e.$set(e.powerform,"birthday",t)},expression:"powerform.birthday"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"最高学历"}},[r("el-select",{attrs:{placeholder:"请选择最高学历"},model:{value:e.powerform.education,callback:function(t){e.$set(e.powerform,"education",t)},expression:"powerform.education"}},e._l(e.positional,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证编号",prop:"identity"}},[r("el-input",{attrs:{placeholder:"请输入身份证编号"},model:{value:e.powerform.identity,callback:function(t){e.$set(e.powerform,"identity",t)},expression:"powerform.identity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证正反面",required:""}},[r("el-col",{attrs:{span:11}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleFrontSuccess,"before-upload":e.beforeAvatarUpload}},[e.powerform.frontimageUrl?r("img",{staticClass:"avatar",attrs:{src:e.powerform.frontimageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:""==e.powerform.frontimageUrl,expression:"powerform.frontimageUrl==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v("正面")])]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.powerform.frontimageUrl,expression:"powerform.frontimageUrl!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.powerform.frontimageUrl=""}}},[e._v("删除")])],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}}),e._v(" "),r("el-col",{staticStyle:{position:"relative"},attrs:{span:11}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleContrarySuccess,"before-upload":e.beforeAvatarUpload}},[e.powerform.contraryimageUrl?r("img",{staticClass:"avatar",attrs:{src:e.powerform.contraryimageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:""==e.powerform.contraryimageUrl,expression:"powerform.contraryimageUrl==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"110px"}},[e._v("反面")])]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.powerform.contraryimageUrl,expression:"powerform.contraryimageUrl!=''"}],staticStyle:{position:"absolute",left:"190px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.powerform.contraryimageUrl=""}}},[e._v("删除")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"企业职务",prop:"job"}},[r("el-input",{model:{value:e.powerform.job,callback:function(t){e.$set(e.powerform,"job",t)},expression:"powerform.job"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"毕业院校"}},[r("el-input",{attrs:{placeholder:"请输入毕业院校"},model:{value:e.powerform.graduate_institutions,callback:function(t){e.$set(e.powerform,"graduate_institutions",t)},expression:"powerform.graduate_institutions"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"主修专业"}},[r("el-input",{attrs:{placeholder:"请输入主修专业"},model:{value:e.powerform.professional,callback:function(t){e.$set(e.powerform,"professional",t)},expression:"powerform.professional"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"个人职称",prop:"positional_titles"}},[r("el-input",{attrs:{placeholder:"请输入个人职称"},model:{value:e.powerform.positional_titles,callback:function(t){e.$set(e.powerform,"positional_titles",t)},expression:"powerform.positional_titles"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职业资质",required:""}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/iotapi/upload","show-file-list":!1,"on-success":e.handleJobSuccess,"before-upload":e.beforeAvatarUpload}},[e.powerform.joblicense?r("img",{staticClass:"avatar",attrs:{src:e.powerform.joblicense}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"300px",height:"200px"}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:""==e.powerform.joblicense,expression:"powerform.joblicense==''"}],staticClass:"el-upload__text",staticStyle:{position:"absolute",top:"90px",color:"#8c939d",left:"120px"}},[e._v("职业资质")])]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.powerform.joblicense,expression:"powerform.joblicense!=''"}],staticStyle:{position:"absolute",left:"200px",top:"150px","margin-left":"0"},attrs:{size:"small",type:"danger"},on:{click:function(t){e.powerform.joblicense=""}}},[e._v("删除")])],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"家庭地址"}},[r("el-cascader",{attrs:{size:"large",options:e.regionData},on:{change:e.handleModChange},model:{value:e.powerform.addr,callback:function(t){e.$set(e.powerform,"addr",t)},expression:"powerform.addr"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"相关工作年限",prop:"working_seniority"}},[r("el-select",{attrs:{placeholder:"请选择工作年限"},model:{value:e.powerform.working_seniority,callback:function(t){e.$set(e.powerform,"working_seniority",t)},expression:"powerform.working_seniority"}},[r("el-option",{attrs:{label:"1年以内",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"1-3年",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"3-5年",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"5-10年",value:"4"}}),e._v(" "),r("el-option",{attrs:{label:"10年以上",value:"5"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"培训经历"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入培训经历",maxlength:"300",rows:4,"show-word-limit":""},model:{value:e.powerform.training_experience,callback:function(t){e.$set(e.powerform,"training_experience",t)},expression:"powerform.training_experience"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"开始时间"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择开始时间","value-format":"timestamp"},model:{value:e.powerform.start_time,callback:function(t){e.$set(e.powerform,"start_time",t)},expression:"powerform.start_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系方式",prop:"userphone"}},[r("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.powerform.userphone,callback:function(t){e.$set(e.powerform,"userphone",e._n(t))},expression:"powerform.userphone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"相关从业经历",prop:"practitioners_experience"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入个人水泵检测相关从业经历",rows:4},model:{value:e.powerform.practitioners_experience,callback:function(t){e.$set(e.powerform,"practitioners_experience",t)},expression:"powerform.practitioners_experience"}})],1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"activefirst"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("powerform")}}},[e._v("提交审核")]),e._v(" "),r("el-button",{attrs:{type:"info"}},[e._v("取消")])],1)]):e._e(),e._v(" "),2==e.active?r("div",{staticClass:"empower2"},[r("div",{staticClass:"block",staticStyle:{margin:"0 auto","text-align":"center",padding:"30px"}},[r("el-image",[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("svg-icon",{staticStyle:{width:"8rem",height:"8rem"},attrs:{"icon-class":"empowerexamine"}})],1)]),e._v(" "),r("p",{staticStyle:{"font-size":"25px",color:"#409EFF"}},[e._v("正在审核中")]),e._v(" "),r("p",{staticStyle:{"font-size":"20px"}},[e._v("审核员联系电话：17201202365")]),e._v(" "),r("p",{staticStyle:{color:"#cccccc","font-size":"14px"}},[e._v("预计3到5个工作日完成，请耐心等待，谢谢您的配合和理解")]),e._v(" "),r("p",[r("el-button",{attrs:{type:"primary"},on:{click:e.cancelAdd}},[e._v("撤销审核"),r("i",{staticClass:"el-icon-s-fold"})])],1)],1)]):e._e()],1)},[],!1,null,"24416dd4",null);n.options.__file="person_empower.vue";t.default=n.exports}}]);