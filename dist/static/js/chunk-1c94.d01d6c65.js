(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-1c94"],{"3IoT":function(t,e,o){"use strict";o.r(e);var r=o("t3Un");var a=o("v0iw"),n=o.n(a),i=o("J66h").Base64,c={inject:["reload"],data:function(){return{total:0,pagesize:10,start:0,update:!1,form1:{name:"",product:"",time:"",secret:""},dialogVisible:!1,form:{name:"",product:"",time:"",secret:""},appdata:[],objectid:"",selectapp:[],arr:[]}},created:function(){},mounted:function(){this.getAppdetail(this.pagesize,this.start)},methods:{Define:function(){var t=this,e=Math.ceil(25*Math.random()),o=i.encode(String.fromCharCode(65+e)+Math.ceil(1e7*Math.random())+Number(new Date));(function(t,e,o){return Object(r.a)({url:"/classes/App",method:"post",data:{config:{expires:t},desc:e,secret:o}})})(Number(this.form.time),this.form.desc,o).then(function(e){t.$message({type:"success",message:"应用创建成功"}),t.dialogVisible=!1,t.getAppdetail(t.pagesize,t.start)}).catch(function(t){console.log(t)})},getAppdetail:function(t,e){var o=this,r=n.a.Object.extend("App"),a=new n.a.Query(r);a.limit(t),a.skip(e),a.ascending("-updatedAt"),a.count().then(function(t){o.total=t,a.find().then(function(t){o.appdata=t.concat([]),o.appdata.map(function(t){t.isshow=!1}),console.log(o.appdata)})})},handleSizeChange:function(t){this.pagesize=t,this.getAppdetail(this.pagesize,this.start)},handleCurrentChange:function(t){this.start=Number(t-1)*Number(this.pagesize),this.getAppdetail(this.pagesize,this.start)},updateapp:function(t){var e=this;this.objectid=t;var o=n.a.Object.extend("App");new n.a.Query(o).get(t).then(function(t){e.update=!0,e.form1.time=t.attributes.config.expires,e.form1.secret=t.attributes.secret,e.form1.desc=t.attributes.desc},function(t){console.log(t)})},updatedDefine:function(){var t=this,e=n.a.Object.extend("App");new n.a.Query(e).get(this.objectid).then(function(e){e.set("config",{expires:t.form1.time}),e.set("secret",t.form1.secret),e.set("desc",t.form1.desc),e.save().then(function(e){t.$message({type:"success",message:"应用修改成功"}),t.update=!1,t.getAppdetail(t.pagesize,t.start)},function(t){console.log(t)})})},deleteapp:function(t){var e=this;this.$confirm("此操作将永久删除该应用, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o=n.a.Object.extend("App");new n.a.Query(o).get(t).then(function(t){t.destroy().then(function(t){e.$message({type:"success",message:"删除成功!"}),e.getAppdetail(e.pagesize,e.start)})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},xianshi:function(t){for(var e,o=0;o<this.appdata.length;o++)this.appdata[o].id==t&&(e=this.appdata[o],this.appdata[o].isshow=!0,this.$set(this.appdata,o,e))}}},s=(o("MWt+"),o("BcyR"),o("KHd+")),l=Object(s.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"application"},[o("div",{staticClass:"addApplication"}),t._v(" "),o("div",{staticClass:"appcontent",staticStyle:{position:"relative",display:"flex","flex-direction":"column","align-items":"center"}},[o("div",{staticClass:"isbutton"},[o("el-button",{attrs:{icon:"el-icon-circle-plus-outline",round:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加新应用")])],1),t._v(" "),t._l(t.appdata,function(e,r){return o("el-card",{key:r,staticClass:"box-card",staticStyle:{width:"80%",border:"1px solid #cccccc","margin-bottom":"10px"}},[o("el-row",{attrs:{gutter:24}},[o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple"},[o("i",{staticClass:"iconfont icon-yingyong",staticStyle:{color:"#666666"}}),t._v(" "),o("p",[t._v(t._s(e.attributes.config.name))])])]),t._v(" "),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"grid-content bg-purple"},[o("dl",[o("dt",[t._v("App ID "),o("el-tooltip",{attrs:{content:"在SDK调用过程中唯一的一个应用标识",placement:"bottom"}},[o("i",{staticClass:"el-icon-question"})])],1),t._v(" "),o("dd",[t._v(t._s(e.id))]),t._v(" "),o("dt",[t._v("App Secret "),o("el-tooltip",{attrs:{content:"调用API时的Token,用来验证请求合法性,请注意保密",placement:"bottom"}},[o("i",{staticClass:"el-icon-question"})])],1),t._v(" "),e.isshow?o("dd",[t._v(t._s(e.attributes.secret))]):o("dd",[t._v(t._s(e.attributes.secret.substr(0,4)+"********************"+e.attributes.secret.substr(24))),o("el-button",{staticStyle:{"margin-left":"10px",position:"absolute",top:"30px"},attrs:{size:"samll",round:""},on:{click:function(o){t.xianshi(e.id)}}},[t._v("完整密钥")])],1),t._v(" "),o("dt",[t._v("应用描述")]),t._v(" "),e.attributes.desc?o("dd",[t._v(t._s(e.attributes.desc))]):o("dd",[t._v("-")])])])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("div",{staticClass:"grid-content bg-purple"},[o("p",{staticClass:"editor"},[o("strong",[t._v("操作:")])]),t._v(" "),o("p",{staticClass:"editor"},[o("el-link",{attrs:{type:"primary"},on:{click:function(o){t.updateapp(e.id)}}},[t._v("修改应用信息")])],1),t._v(" "),o("p",{staticClass:"editor"},[o("el-link",{attrs:{type:"primary"},on:{click:function(o){t.deleteapp(e.id)}}},[t._v("删除应用信息")])],1)])])],1)],1)}),t._v(" "),o("el-pagination",{attrs:{"page-sizes":[1,5,10],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2),t._v(" "),o("el-dialog",{attrs:{title:"添加新应用",visible:t.dialogVisible,width:"40%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticClass:"block"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"应用描述"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{placheholder:"请输入应用名称"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Token有效时间"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{type:"number",placheholder:"请输入应用时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}}),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("秒")])],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.Define}},[t._v("确 定")])],1)]),t._v(" "),o("el-dialog",{attrs:{title:"修改应用信息",visible:t.update,width:"40%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.update=e}}},[o("div",{staticClass:"block"},[o("el-form",{ref:"form",attrs:{model:t.form1,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"应用描述"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form1.desc,callback:function(e){t.$set(t.form1,"desc",e)},expression:"form1.desc"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Token"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form1.secret,callback:function(e){t.$set(t.form1,"secret",e)},expression:"form1.secret"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Token有效时间"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{type:"number",placheholder:"请输入应用时间"},model:{value:t.form1.time,callback:function(e){t.$set(t.form1,"time",e)},expression:"form1.time"}}),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("秒")])],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.update=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.updatedDefine}},[t._v("确 定")])],1)])],1)},[],!1,null,"736dc17c",null);l.options.__file="application.vue";e.default=l.exports},BcyR:function(t,e,o){"use strict";var r=o("qYgd");o.n(r).a},J66h:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){"use strict";var _Base64=(global=global||{}).Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(t){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},o=0,r=t.length;o<r;o++)e[t.charAt(o)]=o;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],o=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[b64chars.charAt(o>>>18),b64chars.charAt(o>>>12&63),e>=2?"=":b64chars.charAt(o>>>6&63),e>=1?"=":b64chars.charAt(63&o)];return r.join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),o=e-65536;return fromCharCode(55296+(o>>>10))+fromCharCode(56320+(1023&o));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,o=e%4,r=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),a=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return a.length-=[0,0,2,1][o],a.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}global.Meteor&&(Base64=global.Base64);void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));return{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}).call(this,__webpack_require__("yLpj"))},"MWt+":function(t,e,o){"use strict";var r=o("PRLw");o.n(r).a},PRLw:function(t,e,o){},qYgd:function(t,e,o){}}]);