(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-c5c9"],{IRQ8:function(t,e,o){var n=o("MT78").extendComponentView({type:"bmap",render:function(t,e,o){var n=!0,i=t.getBMap(),a=o.getZr().painter.getViewportRoot(),r=t.coordinateSystem,s=function(e,i){if(!n){var s=a.parentNode.parentNode.parentNode,p=[-parseInt(s.style.left,10)||0,-parseInt(s.style.top,10)||0];a.style.left=p[0]+"px",a.style.top=p[1]+"px",r.setMapOffset(p),t.__mapOffset=p,o.dispatchAction({type:"bmapRoam"})}};function p(){n||o.dispatchAction({type:"bmapRoam"})}i.removeEventListener("moving",this._oldMoveHandler),i.removeEventListener("zoomend",this._oldZoomEndHandler),i.addEventListener("moving",s),i.addEventListener("zoomend",p),this._oldMoveHandler=s,this._oldZoomEndHandler=p;var c=t.get("roam");c&&"scale"!==c?i.enableDragging():i.disableDragging(),c&&"move"!==c?(i.enableScrollWheelZoom(),i.enableDoubleClickZoom(),i.enablePinchToZoom()):(i.disableScrollWheelZoom(),i.disableDoubleClickZoom(),i.disablePinchToZoom());var m=t.__mapStyle,l=t.get("mapStyle")||{},h=JSON.stringify(l);JSON.stringify(m)!==h&&(Object.keys(l).length&&i.setMapStyle(l),t.__mapStyle=JSON.parse(h)),n=!1}});t.exports=n},IWFA:function(t,e,o){"use strict";var n=o("xhto");o.n(n).a},Suk3:function(t,e,o){var n,i=o("MT78"),a=i.util,r=i.graphic,s=i.matrix;function p(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function c(t,e){return e=e||[0,0],a.map([0,1],function(o){var n=e[o],i=t[o]/2,a=[],r=[];return a[o]=n-i,r[o]=n+i,a[1-o]=r[1-o]=e[1-o],Math.abs(this.dataToPoint(a)[o]-this.dataToPoint(r)[o])},this)}p.prototype.dimensions=["lng","lat"],p.prototype.setZoom=function(t){this._zoom=t},p.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},p.prototype.setMapOffset=function(t){this._mapOffset=t},p.prototype.getBMap=function(){return this._bmap},p.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),o=this._bmap.pointToOverlayPixel(e),n=this._mapOffset;return[o.x-n[0],o.y-n[1]]},p.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},p.prototype.getViewRect=function(){var t=this._api;return new r.BoundingRect(0,0,t.getWidth(),t.getHeight())},p.prototype.getRoamTransform=function(){return s.create()},p.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:a.bind(this.dataToPoint,this),size:a.bind(c,this)}}},p.dimensions=p.prototype.dimensions,p.create=function(t,e){var o,i=e.getDom();t.eachComponent("bmap",function(t){var a=e.getZr().painter,r=a.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(n=n||function(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),o)throw new Error("Only one bmap component can exist");if(!t.__bmap){var s=i.querySelector(".ec-extension-bmap");s&&(r.style.left="0px",r.style.top="0px",i.removeChild(s)),(s=document.createElement("div")).style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),i.appendChild(s);var c=t.__bmap=new BMap.Map(s),m=new n(r);c.addOverlay(m),a.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}c=t.__bmap;var l=t.get("center"),h=t.get("zoom");if(l&&h){var d=new BMap.Point(l[0],l[1]);c.centerAndZoom(d,h)}(o=new p(c,e)).setMapOffset(t.__mapOffset||[0,0]),o.setZoom(h),o.setCenter(l),t.coordinateSystem=o}),t.eachSeries(function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=o)})};var m=p;t.exports=m},XZnV:function(t,e,o){var n=o("MT78").extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var o=this.option;return!(function(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}(t,o.center)&&e===o.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},roam:!1}});t.exports=n},n6ya:function(t){t.exports=[{id:1,name:"东西线",stations:[{id:1,name:"北京",value:[116.38489770446915,39.871343476772445],start:"北京"},{id:2,name:"廊坊",value:[116.7122919288889,39.51889293122433]},{id:3,name:"天津",value:[117.06714053191496,39.06262646040431]},{id:4,name:"石家庄站",value:[114.4712305290683,38.07207484076872]},{id:5,name:"太原",value:[112.61726434350447,37.79736828479828]},{id:6,name:"西安",value:[108.94505006818304,34.38216118776803]},{id:7,name:"兰州",value:[103.89904509514152,36.03646139505536]},{id:8,name:"西宁",value:[101.82139605321802,36.62634069485973]},{id:9,name:"乌鲁木齐",value:[87.53582115349052,43.847009771041094],end:"乌鲁木齐"}],primaryColor:"#A56743",bgColor:"#EDE1D9"}]},oAqT:function(t,e,o){var n=o("MT78"),i=o("Suk3");o("XZnV"),o("IRQ8"),n.registerCoordinateSystem("bmap",i),n.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(t,e){e.eachComponent("bmap",function(t){var e=t.getBMap(),o=e.getCenter();t.setCenterAndZoom([o.lng,o.lat],e.getZoom())})});e.version="1.0.0"},wsGW:function(t,e,o){"use strict";o.r(e);var n=o("m1cH"),i=o.n(n),a=(o("oAqT"),o("n6ya")),r={data:function(){return{chart:this.$echarts.ECharts,bmap:{},mapZoom:6,scatterSeries:[],linesSeries:[],effectScatterSeries:[],trainIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z"}},mounted:function(){this.initMap([])},methods:{test:function(){this.initMap(a)},initMap:function(t){this.getLineSeries(t),this.getScatterSeries(t),0==t.length?this.effectScatterSeries=[]:this.getEffectScatterSeries(t),this.chart=this.$echarts.init(this.$refs.map),this.chart.setOption({animation:!1,legend:{orient:"vertical",top:30,left:30,data:a.map(function(t){return t.name}),textStyle:{color:"#222222"},selectedMode:"multiple"},bmap:{center:[104.114129,37.550339],zoom:6,roam:!0,scaleLimit:{min:6,max:12}},series:[].concat(i()(this.linesSeries),i()(this.scatterSeries),i()(this.effectScatterSeries))}),this.bmap=this.chart.getModel().getComponent("bmap").getBMap(),this.bmap.setMinZoom(6),this.bmap.setMaxZoom(12),this.bmap.addControl(new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT}));var e=this;this.bmap.addEventListener("zoomend",function(){e.mapZoom=e.bmap.getZoom()}),this.bmap.setMapStyleV2({styleId:"7b93b720528698c2c2cfe0294dd45eed"})},getLineSeries:function(t){var e=[];t.forEach(function(t){e.push({name:t.name,type:"lines",coordinateSystem:"bmap",silent:!0,polyline:!0,lineStyle:{color:t.primaryColor},z:3,data:[{coords:t.stations.map(function(t,e){return t.value}),lineStyle:{normal:{type:"solid",color:t.bgColor,width:4,opacity:.6}}}]})}),this.linesSeries=e},getScatterSeries:function(t){var e=[];t.forEach(function(t){e.push({name:t.name,type:"scatter",coordinateSystem:"bmap",symbol:"circle",symbolSize:10,z:4,label:{normal:{formatter:"{b}",position:"right",color:"#777777",show:!0},emphasis:{show:!0}},itemStyle:{normal:{color:"#FFFFFF",borderColor:"#777777",borderWidth:2}},data:t.stations})}),this.scatterSeries=e},getEffectScatterSeries:function(t){var e=[],o=[t[0].stations[t[0].stations.length-1]].map(function(t){var e="{p2|"+t.name+"}\n                              {p3|\n当前位置："+t.name+"}";return{name:t.name,itemStyle:{normal:{color:"red"},emphasis:{color:"red"}},label:{normal:{formatter:e,rich:{img:{backgroundColor:{image:t.screenshot}}}}},value:t.value}});e.push({name:"路径",type:"effectScatter",coordinateSystem:"bmap",symbol:this.trainIcon,symbolSize:[20,20],legendHoverLink:!0,z:20,effectType:"ripple",rippleEffect:{period:2,scale:5,brushType:"fill"},label:{normal:{show:!1,position:["500%","300%"],distance:20,color:"#222222",align:"center",backgroundColor:"#FFFFFF",borderRadius:5,padding:20,shadowColor:"rgba(0,0,0,0.16)",shadowBlur:6,shadowOffsetX:0,shadowOffsetY:3,width:200,rich:{p2:{fontSize:16,color:"#222222",fontWeight:"bolder",lineHeight:40},p3:{fontSize:14,color:"#222222",lineHeight:18}}},emphasis:{show:!0}},data:o}),this.effectScatterSeries=e}}},s=(o("IWFA"),o("KHd+")),p=Object(s.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"baidumap"},[e("el-button",{on:{click:this.test}},[this._v("测试")]),this._v(" "),e("div",{ref:"map",staticClass:"map",staticStyle:{height:"1000px"},attrs:{id:"map"}})],1)},[],!1,null,"6a1bde07",null);p.options.__file="baidumap.vue";e.default=p.exports},xhto:function(t,e,o){}}]);