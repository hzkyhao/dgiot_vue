(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-5034"],{"+Oxy":function(e,t,a){"use strict";a.r(t);var r,n,i,s,o,l,c,u=a("CSPP"),d=a.n(u),p=a("GQeE"),m=a.n(p),f=a("4d7F"),g=a.n(f),b=a("gDS+"),v=a.n(b),h=a("v0iw"),y=a.n(h),_=a("t/Le"),C=a("Yh9x"),I=(a("Mld3"),a("URgk")),$=a("lTCR"),S=a.n($),w=a("xiB2"),A=a("MPjy"),T=(a("MCLT"),d()(["\n            ","\n          "],["\n            ","\n          "])),x={},z=a("J66h").Base64,k="",F=!1,O="",D={data:function(){var e=this;return{multipleSelection:[],protolchannel:[],protoldialog:!1,productimg:"",topicdialogVisible:!1,topicform:{topic:"",type:"",desc:"",isupdated:-1},decodertotal:0,decoderstart:0,decoderlength:10,topicrule:{topic:[{required:!0,message:"请输入Topic类",trigger:"blur"}],type:[{required:!0,message:"请选择Topic权限",trigger:"change"}]},topicstart:1,topiclength:10,topictotal:0,channelData:[],allchannelData:[],innerVisible:!1,allChannelstart:0,allChannellength:10,allChanneltotal:0,category:[],current:0,schemadialogVisible:!1,PropData:[],originwmx:!1,wmxdialogVisible:!1,allunit:[],sizeForm:{resource:1,identifier:"",dis:"",dinumber:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",string:"",date:"String类型的UTC时间戳 (毫秒)",specs:[{attribute:"",attributevalue:""}],struct:[]},sizerule:{step:[{required:!0,trigger:"blur",validator:function(t,a,r){a>=e.sizeForm.endnumber-e.sizeForm.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()}}],string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],startnumber:[{validator:function(t,a,r){""==a?r(new Error("最小值不能为空")):""!=e.sizeForm.endnumber&&a>=e.sizeForm.endnumber?r(new Error("最小值小于最大值")):r()},required:!0,trigger:"blur"}],endnumber:[{validator:function(t,a,r){""==a?r(new Error("最大值不能为空")):a<=e.sizeForm.startnumber?r(new Error("最大值必须大于最小值")):r()},required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structrule:{string:[{required:!0,trigger:"blur",message:"请输入数据长度"},{type:"number",message:"数据长度必须为数字"}],step:[{required:!0,trigger:"blur",validator:function(t,a,r){a>=e.structform.endnumber-e.structform.startnumber?r(new Error("步长必须小于最大值和最小值的差值")):r()}}],startnumber:[{validator:function(t,a,r){""==a?r(new Error("请输入最小值")):""!=e.structform.endnumber&&a>=e.structform.endnumber?r(new Error("最小值应小于最大值")):r()},required:!0,trigger:"blur"}],endnumber:[{validator:function(t,a,r){""==a?r(new Error("请输入最大值")):a<=e.structform.startnumber?r(new Error("最大值必须大于最小值")):r()},required:!0,trigger:"blur"}],resource:[{required:!0,message:"请选择功能类型",trigger:"change"}],true:[{required:!0,message:"请输入属性值",trigger:"blur"}],false:[{required:!0,message:"请输入属性值",trigger:"blur"}],name:[{required:!0,message:"请输入属性名称",trigger:"blur"}],identifier:[{required:!0,message:"请输入标识符",trigger:"blur"}],dis:[{required:!0,message:"请输入数据标识",trigger:"blur"}],type:[{required:!0,message:"请选择数据类型",trigger:"change"}],attribute:[{required:!0,message:"请输入属性",trigger:"blur"}],attributevalue:[{required:!0,message:"请输入属性值",trigger:"blur"}],isread:[{required:!0,message:"请选择读写类型",trigger:"change"}]},structdialog:!1,structform:{resource:1,identifier:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",date:"String类型的UTC时间戳 (毫秒)",string:"",specs:[],dis:"",dinumber:""},tableData:[],activeName:"first",form:{Productname:"",ProductKey:"",ProductAll:0},ProductSecret:"",dynamicReg:!1,productId:"",productdetail:{},topicData:[],topic:[{topic:"thing/${ProductId}/${DevAddr}/post",type:"pub",desc:"设备上报",isdef:!0},{topic:"thing/${ProductId}/${DevAddr}",type:"sub",desc:"消息下发",isdef:!0}],isshow:!1,addRules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"},{validator:function(e,t,a){/[0-9a-zA-Z]/.test(t)?a():a(new Error("协议名称由数字和字母组合"))},trigger:"blur"}]},dialogTableVisible:!1,gridData:[],formInline:{name:"",version:"",desc:"",resource:!1},objectId:"",option:[],CategoryKey:"",productstart:0,productlength:10,producttotal:0,wmxstart:1,wmxlength:10,wmxtotal:20,wmxData:[],warningeditror:[],channellength:10,channelstart:0,channeltotal:0,isupdatedstruct:-1,issub:!1,subtimer:null,subdialog:!1,textarea:"",subdialogtimer:null,subdialogid:"",subaction:"stop",channelname:"",value4:!0,rulepagesize:10,rulestart:0,ruletotal:0,engineData:[],channeltype:0,resourcechannelData:[],resourcestart:0,resourcelength:10,resourcetotal:0,resourcedialogFormVisible:!1,resourceform:{},resourcechannelid:"",isreload:1}},watch:{issub:{deep:!0,handler:function(e){var t=this;this.subtimer=window.setInterval(function(){t.subAce("formInline",!1)},5e3)}}},computed:{treeData:function(){var e=JSON.parse(v()(this.option));return e.filter(function(t){var a=e.filter(function(e){return t.id==e.parentid});return a.length>0&&(t.children=a),0==t.parentid})}},mounted:function(){(i=ace.edit("editor2")).session.setMode("ace/mode/text"),i.setTheme("ace/theme/monokai"),i.setReadOnly(!0),i.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.Industry(),this.getAllunit(),this.$route.query.activeName&&(this.activeName=this.$route.query.activeName)},methods:{changeValue:function(e){this.$refs[e].validateField("startnumber",function(e){if(e)return!1})},changeStructValue:function(e){this.$refs[e].validateField("startnumber",function(e){if(e)return!1})},getRowClass:function(e,t){if("struct"!=e.row.dataType.type)return"row-expand-cover"},getChannelEnable:function(e,t){return 1==e.row.attributes.isEnable?"green_active":"red_active"},handleClick:function(e){"fiveth"==e.name?this.getProductChannel():"second"==e.name?this.getTopic():"seven"==e.name?this.getResourceChannel():"sixeth"==e.name?this.orginRule():"eighth"==e.name?this.isreload++:"fourth"!=e.name&&(window.clearInterval(this.subtimer),this.subtimer=null)},getAllunit:function(){var e=this;this.allunit=[];var t=y.a.Object.extend("Datas"),a=new y.a.Query(t);a.equalTo("type","unit"),a.limit(1e3),a.find().then(function(t){e.allunit=t.concat([]),e.allunit.unshift({attributes:{data:{Name:"无",Symbol:""}}})},function(e){Object(A.a)(e)})},getTopic:function(){var e=this,t=y.a.Object.extend("Product");new y.a.Query(t).get(this.productId).then(function(t){t&&(e.topicData=t.attributes.topics.concat(e.topic))},function(e){Object(A.a)(e)})},updatesubdialog:function(){var e=this;this.protoldialog=!0;var t=y.a.Object.extend("Channel"),a=new y.a.Query(t),r=new(y.a.Object.extend("Product"));r.id=this.productId,a.equalTo("product",r),a.equalTo("type","1"),a.ascending("-updatedAt"),a.find().then(function(t){e.protolchannel=t,e.$refs.multipleTable.toggleAllSelection()},function(e){Object(A.a)(e)})},handleSelectionChange:function(e){this.multipleSelection=e},updateAllChannel:function(){var e=this;if(0==this.multipleSelection.length)this.protoldialog=!1;else{var t=[];this.multipleSelection.map(function(e){t.push(new g.a(function(t,a){return Object(C.i)(e.id,"update").then(function(e){e&&t(e)}).catch(function(e){a(e)})}))}),g.a.all(t).then(function(t){e.$message({message:"热加载成功",type:"success"}),t.length==e.multipleSelection.length&&(e.protoldialog=!1)}).catch(function(t){e.$message({message:t,type:"error"})})}},getProductChannel:function(){var e=this,t=y.a.Object.extend("Channel"),a=new y.a.Query(t),r=new(y.a.Object.extend("Product"));r.id=this.productId,a.equalTo("product",r),a.equalTo("type","1"),a.skip(this.channelstart),a.limit(this.channellength),a.ascending("-updatedAt"),a.count().then(function(t){e.channeltotal=t,a.find().then(function(t){e.channelData=t,F=0==t.length})},function(e){Object(A.a)(e)})},getResourceChannel:function(){var e=this,t=y.a.Object.extend("Channel"),a=new y.a.Query(t),r=new(y.a.Object.extend("Product"));r.id=this.productId,a.equalTo("product",r),a.equalTo("type","2"),a.skip(this.channelstart),a.limit(this.channellength),a.ascending("-updatedAt"),a.count().then(function(t){e.resourcetotal=t,a.find().then(function(t){e.resourcechannelData=t,F=0==t.length})},function(e){Object(A.a)(e)})},addProductChannel:function(e){var t=this,a=new(y.a.Object.extend("Channel"));a.id=e;var r=a.relation("product"),n=new(y.a.Object.extend("Product"));n.set("objectId",this.productId),r.add(n),a.save().then(function(e){e&&(t.$message({type:"success",message:"添加成功"}),1==t.channeltype?(t.showAllChannel(),t.getProductChannel()):(t.resourceShowAllChannel(),t.getResourceChannel()))},function(e){Object(A.a)(e)})},deleteRelation:function(e){var t=this,a=new(y.a.Object.extend("Channel"));a.id=e.id;var r=a.relation("product"),n=new(y.a.Object.extend("Product"));n.set("objectId",this.productId),r.remove(n),a.save().then(function(e){e&&(t.$message({type:"success",message:"删除成功"}),1==t.channeltype?t.getProductChannel():t.getResourceChannel())},function(e){Object(A.a)(e)})},channelSizeChange:function(e){this.channellength=e,this.getProductChannel()},channelCurrentChange:function(e){this.channelstart=(e-1)*this.channellength,this.getProductChannel()},resourcechannelSizeChange:function(e){this.resourcelength=e,this.getResourceChannel()},resourcechannelCurrentChange:function(e){this.resourcestart=(e-1)*this.resourcelength,this.getResourceChannel()},showAllChannel:function(){var e=this;this.channeltype=1,this.innerVisible=!0;var t=y.a.Object.extend("Channel"),a=new y.a.Query(t),r=new(y.a.Object.extend("Product"));r.id=this.productId,a.skip(this.allChannelstart),a.limit(this.allChannellength),a.equalTo("type","1"),a.ascending("-updatedAt"),F||a.notEqualTo("product",r),a.count().then(function(t){e.allChanneltotal=t,a.find().then(function(t){e.allchannelData=t})},function(e){Object(A.a)(e)})},allChannelSizeChange:function(e){this.allChannellength=e,this.showAllChannel()},allChannelCurrentChange:function(e){this.allChannelstart=(e-1)*this.allChannellength,this.showAllChannel()},resourceShowAllChannel:function(){var e=this;this.channeltype=2,this.innerVisible=!0;var t=y.a.Object.extend("Channel"),a=new y.a.Query(t),r=new(y.a.Object.extend("Product"));r.id=this.productId,a.skip(this.resourcestart),a.limit(this.resourcelength),a.equalTo("type","2"),a.ascending("-updatedAt"),F||a.notEqualTo("product",r),a.count().then(function(t){e.allChanneltotal=t,a.find().then(function(t){e.allchannelData=t})},function(e){Object(A.a)(e)})},customize:function(e){var t=this;this.resourcedialogFormVisible=!0,this.resourcechannelid=e.id,x=JSON.parse(v()(e.attributes.config)),Object(I.setTimeout)(function(){(o=ace.edit("editormodel")).session.setMode("ace/mode/json"),o.setTheme("ace/theme/twilight"),o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),o.setReadOnly(!0),o.setValue(v()(t.productdetail.thing,null,4)),(l=ace.edit("editorcreate")).session.setMode("ace/mode/mysql"),l.setTheme("ace/theme/twilight"),l.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),e.attributes.config.datamodel&&""!=e.attributes.config.datamodel?l.setValue(e.attributes.config.datamodel):l.setValue('{\n            "vars":{\n              "database":"aosong",\n              "stable":"meter",\n              "value":[\n                {\n                  "timestamp":"TIMESTAMP",\n                  "bytes":8\n                },\n                {\n                  "temperature":"FLOAT",\n                  "bytes":4\n                },\n                {\n                  "humidity":"FLOAT",\n                  "bytes":4\n                }\n              ],\n              "tags":[\n                {\n                  "devaddr":"BINARY",\n                  "bytes":12\n                }\n              ],\n              "table":"devaddr",\n              "keep":3650\n            },\n            "sql":{\n              "create_database":"CREATE DATABASE IF NOT EXISTS ${database} KEEP ${keep}",\n              "drop_database":"DROP DATABASE IF EXISTS ${database}",\n              "creat_stable":"CREATE TABLE IF NOT EXISTS ${database}.${stable} (${timestamp} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n              "drop_stable":"DROP TABLE ${database}.${stable}",\n              "insert_stable":"INSERT INTO ${database}.${table} USING ${database}.${stable} TAGS (${devaddr}) VALUES (${temperature}, ${humidity})",\n              "insert_table":"INSERT INTO ${database}.${table} VALUES (${temperature}, ${humidity})",\n              "create_table":"CREATE TABLE ${databas}.${table} USING ${database}.${stable} TAGS (${devaddr});"\n            }\n          }')})},questionModel:function(){Object(I.setTimeout)(function(){(c=ace.edit("editorinsert")).session.setMode("ace/mode/mysql"),c.setTheme("ace/theme/gob"),c.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),c.setValue('{\n          "vars":{\n            "database":"database",\n            "table":"stable",\n            "value":[\n              {\n                "timestamp":"TIMESTAMP",\n                "bytes":8\n              },\n              {\n                "int":"INT",\n                "bytes":4\n              },\n              {\n                "bigint":"BIGINT",\n                "bytes":8\n              },\n              {\n                "float":"FLOAT",\n                "bytes":4\n              },\n              {\n                "double":"DOUBLE",\n                "bytes":8\n              },\n              {\n                "binary":"BINARY",\n                "bytes":"自定义"\n              },\n              {\n                "smallint":"SMALLINT",\n                "bytes":2\n              },\n              {\n                "tinyint":"TINYINT",\n                "bytes":1\n              },\n              {\n                "bool":"BOOL",\n                "bytes":1\n              },\n              {\n                "nchar":"NCHAR",\n                "bytes":"自定义"\n              }\n            ],\n            "tags":[\n              {\n                "int":"INT",\n                "bytes":4\n              },\n              {\n                "bigint":"BIGINT",\n                "bytes":8\n              },\n              {\n                "float":"FLOAT",\n                "bytes":4\n              },\n              {\n                "double":"DOUBLE",\n                "bytes":8\n              },\n              {\n                "binary":"BINARY",\n                "bytes":"自定义"\n              },\n              {\n                "smallint":"SMALLINT",\n                "bytes":2\n              },\n              {\n                "tinyint":"TINYINT",\n                "bytes":1\n              },\n              {\n                "bool":"BOOL",\n                "bytes":1\n              },\n              {\n                "nchar":"NCHAR",\n                "bytes":"自定义"\n              }\n            ]\n          },\n          "sql":{\n            "create_database":"CREATE DATABASE IF NOT EXISTS {{database}} KEEP {{keep}}",\n            "drop_database":"DROP DATABASE IF EXISTS {{database}}",\n            "creat_stable":"CREATE TABLE IF NOT EXISTS {{database}}.{{stable}} ({{timestamp}} TIMESTAMP, temperature FLOAT, humidity FLOAT) TAGS(devaddr BINARY[12]);",\n            "drop_stable":"DROP TABLE {{database}}.{{stable}}",\n            "insert_stable":"INSERT INTO {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}}) VALUES ({{temperature}}, {{humidity}})",\n            "insert_table":"INSERT INTO {{database}}.{{table}} VALUES ({{temperature}}, {{humidity}})",\n            "create_table":"CREATE TABLE {{database}}.{{table}} USING {{database}}.{{stable}} TAGS ({{devaddr}});"\n          }\n        }')})},addData:function(){var e=this,t=new(y.a.Object.extend("Channel"));t.id=this.resourcechannelid,x.datamodel=l.getValue(),t.set("config",x),t.save().then(function(t){t&&e.$message.success("添加成功")},function(e){Object(A.a)(e)})},closeWuDialog:function(){this.resourcedialogFormVisible=!1,this.resourcechannelid=""},removeDomain:function(e){var t=this.sizeForm.specs.indexOf(e);-1!==t&&this.sizeForm.specs.splice(t,1)},addDomain:function(){this.sizeForm.specs.push({value:"",name:""})},removeDomain1:function(e){var t=this.structform.specs.indexOf(e);-1!==t&&this.structform.specs.splice(t,1)},addDomain1:function(){this.structform.specs.push({value:"",name:""})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log(a),console.log("error submit!!"),!1;var r={},n=y.a.Object.extend("Product");new y.a.Query(n).get(t.productId).then(function(a){if("FLOAT"==t.sizeForm.type||"DOUBLE"==t.sizeForm.type||"INT"==t.sizeForm.type)r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{max:t.sizeForm.endnumber,min:t.sizeForm.startnumber,step:t.sizeForm.step,unit:""==t.sizeForm.unit?"":t.sizeForm.unit}},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier};else if("BOOL"==t.sizeForm.type)r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:{0:t.sizeForm.false,1:t.sizeForm.true}},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!1,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier};else if("ENUM"==t.sizeForm.type){var n={};t.sizeForm.specs.map(function(e){var t=e.attribute;n[t]=e.attributevalue}),r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:n},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}}else"STRUCT"==t.sizeForm.type?r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),specs:t.sizeForm.struct},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}:"STRING"==t.sizeForm.type?r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase(),size:t.sizeForm.string},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier}:"DATE"==t.sizeForm.type&&(r={name:t.sizeForm.name,dataType:{type:t.sizeForm.type.toLowerCase()},dataForm:{address:t.sizeForm.dis,quantity:t.sizeForm.dinumber},required:!0,accessMode:t.sizeForm.isread,identifier:t.sizeForm.identifier});t.productdetail.thing.properties.unshift(r),a.set("thing",t.productdetail.thing),a.save().then(function(a){a&&(t.$message({type:"success",message:"添加成功"}),t.getProDetail(),t.$refs[e].resetFields(),t.wmxdialogVisible=!1)},function(e){Object(A.a)(e)})})})},submitStruct:function(e){var t=this;this.$refs[e].validate(function(a){if(a){var r={};if("FLOAT"==t.structform.type||"DOUBLE"==t.structform.type||"INT"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{max:t.structform.endnumber,min:t.structform.startnumber,step:t.structform.step,unit:""==t.structform.unit?"":t.structform.unit}},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("BOOL"==t.structform.type)r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:{0:t.structform.false,1:t.structform.true}},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!1,accessMode:t.structform.isread,identifier:t.structform.identifier};else if("ENUM"==t.structform.type){var n={};t.structform.specs.map(function(e){var t=e.attribute;n[t]=e.attributevalue}),r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),specs:n},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}}else"STRING"==t.structform.type?r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase(),size:t.structform.string},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier}:"DATE"==t.structform.type&&(r={name:t.structform.name,dataType:{type:t.structform.type.toLowerCase()},dataForm:{address:t.structform.dis,quantity:t.structform.dinumber},required:!0,accessMode:t.structform.isread,identifier:t.structform.identifier});-1==t.isupdatedstruct?t.sizeForm.struct.push(r):(t.sizeForm.struct.splice(t.isupdatedstruct,1,r),t.isupdatedstruct=-1),t.$refs[e].resetFields(),t.structdialog=!1}})},addStruct:function(e){this.structdialog=!0,this.structform={resource:1,identifier:"",type:"INT",startnumber:"",endnumber:"",step:"",true:"",truevalue:1,false:"",falsevalue:0,isread:"r",unit:"",specs:[],date:"String类型的UTC时间戳 (毫秒)",string:""}},editStruct:function(e,t){var a=this;if(console.log(e,t),this.isupdatedstruct=t,this.structdialog=!0,this.structform.type=e.dataType.type.toUpperCase(),this.structform.name=e.name,this.structform.identifier=e.identifier,this.structform.isread=e.accessMode,"float"==e.dataType.type||"double"==e.dataType.type||"int"==e.dataType.type)this.structform.startnumber=e.dataType.specs.min,this.structform.endnumber=e.dataType.specs.max,this.structform.step=e.dataType.specs.step,this.structform.unit=e.dataType.specs.unit;else if("bool"==e.dataType.type)this.structform.true=e.dataType.specs[1],this.structform.false=e.dataType.specs[0];else if("enum"==e.dataType.type){this.structform.specs=[];var r={};m()(e.dataType.specs).forEach(function(t,n){r.attribute=t,r.attributevalue=e.dataType.specs[t],a.structform.specs.push(r)})}else"string"==e.dataType.type&&(this.structform.string=e.dataType.size)},deleteStruct:function(e){this.sizeForm.struct.splice(e,1)},preserve:function(){var e=this,t=y.a.Object.extend("Product");new y.a.Query(t).get(this.productId).then(function(t){t.set("thing",JSON.parse(n.getValue())),t.save().then(function(t){t&&e.$message({type:"success",message:"保存成功"})},function(t){e.$message({type:"error",message:t.message})})})},Industry:function(){var e=this;this.option=[];var t=y.a.Object.extend("Datas"),a=new y.a.Query(t);a.equalTo("data.key","category"),a.limit(1e3),a.find().then(function(t){t&&(t.map(function(t){var a={};a.value=t.attributes.type,a.label=t.attributes.data.CategoryName,a.id=t.attributes.data.Id,a.parentid=t.attributes.data.SuperId,e.option.push(a)}),e.getProDetail())},function(t){e.$message.error(t.message)})},utc2beijing:function(e){return new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")},getPropData:function(e){var t=this;0==e&&(this.productstart=0),this.CategoryKey=this.$route.query.CategoryKey;var a=y.a.Object.extend("Datas"),r=new y.a.Query(a);r.limit(this.productlength),r.skip(this.productstart),0!=this.category.length&&r.equalTo("type",this.category[this.category.length-1]),r.equalTo("data.key","category"),r.count().then(function(e){t.producttotal=e,r.find().then(function(e){t.PropData=e},function(e){Object(A.a)(e)})})},productSizeChange:function(e){this.productlength=e,this.getPropData()},productCurrentChange:function(e){this.productstart=(e-1)*this.productlength,this.getPropData()},checkschema:function(){var e=this;this.schemadialogVisible=!0,Object(I.setTimeout)(function(){(n=ace.edit("editor1")).session.setMode("ace/mode/json"),n.setTheme("ace/theme/eclipse"),n.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),n.setValue(v()(e.productdetail.thing,null,4))},1)},getProDetail:function(){var e=this;(r=ace.edit("editor")).session.setMode("ace/mode/erlang"),r.setTheme("ace/theme/monokai"),r.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),this.productId=this.$route.query.id;var t=y.a.Object.extend("Product");new y.a.Query(t).get(this.productId).then(function(t){if(t){for(var a in t.attributes)e.productdetail[a]=t.attributes[a];e.option.map(function(t){e.productdetail.category==t.value&&(e.productdetail.category=t.label)}),e.productdetail.createdAt=e.utc2beijing(t.createdAt),e.productdetail.id=t.id,e.dynamicReg=t.attributes.dynamicReg,e.productdetail.isshow=0,e.form.Productname=t.attributes.name,e.ProductSecret=t.attributes.productSecret,e.form.Productkey=e.productId,e.productimg=window.location.origin+t.attributes.icon,t.attributes.decoder?(k=t.attributes.decoder.code,e.formInline.name=t.attributes.decoder.name,e.formInline.version=t.attributes.decoder.version,e.formInline.desc=t.attributes.decoder.desc):k="JSUlLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQolJSUgQGNvcHlyaWdodCAoQykgMjAxOCwgPHNodXdhPgolJSUgQGRvYwolJSUg5Y2P6K6u6Kej5p6QRGVtbwolJSUgQGVuZAolJSUgQ3JlYXRlZCA6IDA4LiDljYHkuIDmnIggMjAxOCAxNDo0OQolJSUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi1tb2R1bGUoc2h1d2FfZGVtb19kZWNvZGVyKS4KLWF1dGhvcigic2h1d2EiKS4KLWRlZmluZShNU0dfVFlQRSwgPDwiREVNTyI+PikuCi1wcm90b2NvbChbPDwiREVNTyI+Pl0pLgoKLWV4cG9ydChbcGFyc2VfZnJhbWUvMiwgdG9fZnJhbWUvMV0pLgoKCnBhcnNlX2ZyYW1lKEJ1ZmYsIE9wdHMpIC0+CiAgICBwYXJzZV9mcmFtZShCdWZmLCBbXSwgT3B0cykuCgoKcGFyc2VfZnJhbWUoPDw+PiwgQWNjLCBfT3B0cykgLT4KICAgIHs8PD4+LCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBSZXN0L2JpbmFyeT4+ID0gQmluLCBBY2MsIF9PcHRzKSB3aGVuIGJ5dGVfc2l6ZShSZXN0KSA9PCA2IC0+CiAgICB7QmluLCBBY2N9OwpwYXJzZV9mcmFtZSg8PDE2IzY4LCBMZW46MTYvbGl0dGxlLWludGVnZXIsIExlbjoxNi9saXR0bGUtaW50ZWdlciwgMTYjNjgsIFJlc3QvYmluYXJ5Pj4gPSBCaW4sIEFjYywgT3B0cykgLT4KICAgIGNhc2UgYnl0ZV9zaXplKFJlc3QpIC0gMiA+PSBMZW4gb2YKICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgIGNhc2UgUmVzdCBvZgogICAgICAgICAgICAgICAgPDxVc2VyWm9uZTpMZW4vYnl0ZXMsIENyYzo4LCAxNiMxNiwgUmVzdDEvYmluYXJ5Pj4gLT4KICAgICAgICAgICAgICAgICAgICBBY2MxID0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBzaHV3YV91dGlsczpnZXRfcGFyaXR5KFVzZXJab25lKSA9Oj0gQ3JjIG9mCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlIC0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWUgPSAjewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PCJtc2d0eXBlIj4+ID0+ID9NU0dfVFlQRSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPDwiZGF0YSI+PiA9PiBVc2VyWm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjICsrIFtGcmFtZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSAtPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFjYwogICAgICAgICAgICAgICAgICAgICAgICBlbmQsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VfZnJhbWUoUmVzdDEsIEFjYzEsIE9wdHMpOwogICAgICAgICAgICAgICAgXyAtPgogICAgICAgICAgICAgICAgICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykKICAgICAgICAgICAgZW5kOwogICAgICAgIGZhbHNlIC0+CiAgICAgICAgICAgIHtCaW4sIEFjY30KICAgIGVuZDsKcGFyc2VfZnJhbWUoPDxfOjgsIFJlc3QvYmluYXJ5Pj4sIEFjYywgT3B0cykgLT4KICAgIHBhcnNlX2ZyYW1lKFJlc3QsIEFjYywgT3B0cykuCgoKJSUg57uE6KOF5oiQ5bCB5YyFLCDlj4LmlbDkuLpNYXDlvaLlvI8KdG9fZnJhbWUoI3s8PCJtc2d0eXBlIj4+IDo9ID9NU0dfVFlQRX0gPSBGcmFtZSkgLT4KICAgIFBheWxvYWQgPSB0ZXJtX3RvX2JpbmFyeShGcmFtZSksCiAgICA8PDE2IzAzLCBQYXlsb2FkL2JpbmFyeSwgMTYjMjM+Pi4=",e.productdetail.thing?e.wmxData=e.productdetail.thing.properties.concat([]):(e.productdetail.thing={properties:[]},e.wmxData=e.productdetail.thing.properties.concat([])),r.setValue(z.decode(k)),r.gotoLine(r.session.getLength());var n=y.a.Object.extend("Devices"),i=new y.a.Query(n);i.equalTo("product",e.productId),i.skip(0),i.count().then(function(t){e.form.ProductAll=t})}},function(e){Object(A.a)(e)})},handelUpdate:function(e,t){var a,r=this;a=1!=e,this.dynamicReg=a;var n=y.a.Object.extend("Product");new y.a.Query(n).get(this.productId).then(function(e){e.set("dynamicReg",!a),e.save().then(function(e){e&&(r.$message({type:"success",message:"修改成功"}),r.dynamicReg=!a)},function(e){Object(A.a)(e)})})},wmxhandleClose:function(){this.wmxdialogVisible=!1},protol:function(){var e=this,t="";Object(C.a)(z.encode(r.getValue())).then(function(a){a&&(e.$message({type:"success",message:"编译成功"}),t="编译成功"+a.mod+"\r\n",e.warningeditror=a.warnings,e.warningeditror.map(function(e){t+=e+"\r\n"}),O+=t,i.setValue(O))}).catch(function(a){e.warningeditror=a.error,e.warningeditror.map(function(e){t+=e+"\r\n"}),O+=t,i.setValue(O)})},decoderSizeChange:function(e){this.decoder.length=e,this.chaxun()},devicerCurrentChange:function(e){this.decoderstart=(e-1)*this.decoderlength,this.chaxun()},deletedata:function(e){var t=this,a=new(y.a.Object.extend("Datas"));a.id=e,a.destroy().then(function(e){e&&(t.$message.success("成功删除"),t.chaxun())},function(e){Object(A.a)(e)})},subAce:function(e,t){var a=this;this.$refs[e].validate(function(e){if(e){var n={name:a.formInline.name,version:a.formInline.version,code:z.encode(r.getValue()),desc:a.formInline.desc},s=new(y.a.Object.extend("Product"));s.id=a.productId,s.set("decoder",n),s.save().then(function(e){0==a.issub&&(a.$message({type:"success",message:"保存成功"}),1==t&&(O+="保存成功\r\n",i.setValue(O))),a.issub=!0},function(e){Object(A.a)(e)})}else a.$message({type:"warning",message:"输入格式有误"})})},subAce1:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=y.a.User.current().id,n={name:t.formInline.name,version:t.formInline.version,code:z.encode(r.getValue()),desc:t.formInline.desc},i=y.a.Object.extend("Datas"),s=new y.a.Query(i);s.equalTo("data.name",n.name),s.equalTo("data.version",n.version),s.find().then(function(e){if(e){if(e.length>=1)return void t.$message.warnings("此协议版本已存在");var r=new i,s=new y.a.ACL;s.setReadAccess(a,!0),s.setWriteAccess(a,!0),s.setPublicReadAccess(!0),r.set("type","decoder"),r.set("data",n),r.set("ACL",s),r.save().then(function(e){e&&t.$message.success("保存到公共协议库成功")},function(e){t.$message.error(e.message)})}},function(e){Object(A.a)(e)})}else t.$message({type:"warning",message:"输入格式有误"})})},updatesub:function(e){var t=this;Object(C.i)(e.id,"update").then(function(e){e&&t.$message.success("重载成功")}).catch(function(e){t.$message.error(e.error)})},chaxun:function(){var e=this,t=y.a.Object.extend("Datas"),a=new y.a.Query(t);a.skip(this.decoderstart),a.limit(this.decoderlength),a.equalTo("type","decoder"),a.ascending("-createdAt"),a.count().then(function(t){e.decodertotal=t,a.find().then(function(t){t&&(e.dialogTableVisible=!0,e.gridData=t)})},function(e){Object(A.a)(e)})},editordata:function(e){this.formInline.name=e.attributes.data.name,this.formInline.version=e.attributes.data.version,this.formInline.desc=e.attributes.data.desc,this.formInline.resource=e.attributes.data.enable,r.setValue(z.decode(e.attributes.data.code)),this.dialogTableVisible=!1},goToDevices:function(){this.$router.push({path:"/roles/thing",query:{productid:this.productId}})},addcategory:function(){this.originwmx=!0,this.getPropData()},handleChange:function(e,t,a){console.log(e,t,a)},TypeInstall:function(e,t){console.log(t),t.map(function(t,a){if("enum"==t.DataType||"bool"==t.DataType)(r={dataType:{specs:{}}}).name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map(function(e){for(var t in e){var a=e.value,n=e.name;r.dataType.specs[a]=n}}),e.push(r);else if("double"==t.DataType||"int"==t.DataType||"float"==t.DataType){var r={dataType:{specs:{}}};for(var n in r.name=t.Name,r.dataType.type=t.DataType,r.required=t.Required,r.identifier=t.Identifier,r.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecs))r.dataType.specs.min=JSON.parse(t.DataSpecs).min,r.dataType.specs.max=JSON.parse(t.DataSpecs).max,r.dataType.specs.step=JSON.parse(t.DataSpecs).step,r.dataType.specs.unit=JSON.parse(t.DataSpecs).unit;e.push(r)}else if("struct"==t.DataType){var i={dataType:{specs:[]}};i.name=t.Name,i.dataType.type=t.DataType,i.required=!t.Required,i.identifier=t.Identifier,i.accessMode=1==t.RwFlag?"r":"rw",JSON.parse(t.DataSpecsList).map(function(e){if("ENUM"==e.childDataType||"BOOL"==e.childDataType)(t={dataType:{specs:{}}}).name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childEnumSpecsDTO.map(function(e){for(var a in e){var r=e.value,n=e.name;t.dataType.specs[r]=n}}),i.dataType.specs.push(t);else if("DOUBLE"==e.childDataType||"INT"==e.childDataType||"FLOAT"==e.childDataType){var t={dataType:{specs:{}}};for(var a in t.name=e.childName,t.dataType.type=e.childDataType.toLowerCase(),t.required=e.Required,t.identifier=e.identifier,t.accessMode=1==e.RwFlag?"r":"rw",e.childSpecsDTO)t.dataType.specs.min=e.childSpecsDTO.min,t.dataType.specs.max=e.childSpecsDTO.max,t.dataType.specs.step=e.childSpecsDTO.precise,t.dataType.specs.unit=e.childSpecsDTO.unit;i.dataType.specs.push(t)}}),e.push(i)}});var a={};e=e.reduce(function(e,t){return!a[t.identifier]&&(a[t.identifier]=e.push(t)),e},[])},addProCategory:function(e){var t=this,a=y.a.Object.extend("Product"),r=new y.a.Query(a),n=y.a.Object.extend("Datas"),i=new y.a.Query(n);i.equalTo("type",e.attributes.type),i.equalTo("data.key","detail"),i.find().then(function(e){e.length&&(e[0].attributes.data.Ability?(t.TypeInstall(t.productdetail.thing.properties,e[0].attributes.data.Ability),r.get(t.productId).then(function(e){e.set("thing",t.productdetail.thing),e.save().then(function(e){t.$message({type:"success",message:"添加成功"}),t.getProDetail()},function(e){Object(A.a)(e)})})):console.log("此选项没有属性功能"))},function(e){Object(A.a)(e)})},deletewmx:function(e){var t=this;this.productdetail.thing.properties.splice((this.wmxstart-1)*this.wmxlength+e,1);var a=y.a.Object.extend("Product");new y.a.Query(a).get(this.productId).then(function(e){e.set("thing",t.productdetail.thing),e.save().then(function(e){e&&(t.$message({type:"success",message:"删除成功"}),t.wmxData=t.productdetail.thing.properties.concat([]))},function(e){Object(A.a)(e)})})},wmxSizeChange:function(e){this.wmxstart=1,this.wmxlength=e,console.log(this.wmxData.slice((this.wmxstart-1)*this.wmxlength,this.wmxstart*this.wmxlength))},wmxCurrentChange:function(e){this.wmxstart=e},nowtime:function(){var e=Date.parse(new Date),t=new Date(e);t.getFullYear(),t.getMonth(),t.getMonth(),t.getDate(),t.getDate();return(t.getHours()+1<=10?"0"+t.getHours():t.getHours())+":"+((t.getMinutes()+1<=10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()+1<=10?"0"+t.getSeconds():t.getSeconds())+" "},subProTopic:function(e){this.subdialog=!0,this.subdialogid=e.id,this.channelname=e.id,Object(I.setTimeout)(function(){(s=ace.edit("subdialog")).session.setMode("ace/mode/text"),s.setTheme("ace/theme/gob"),s.setReadOnly(!0),s.setOptions({enableBasicAutocompletion:!1,enableSnippets:!0,enableLiveAutocompletion:!0})});var t={topic:"log/channel/"+e.id+"/"+this.productId,qos:2},a=new RegExp("log/channel/"+e.id+"/"+this.productId),r="",n=this;w.a.add_hook(a,function(e){s.session.getLength()>=1e3?r="":r+=n.nowtime()+e+"\n",s.setValue(r),s.gotoLine(s.session.getLength())});var i=v()({action:"start_logger"});w.a.subscribe(t,function(a){if(a.result){console.log(t),console.log("订阅成功");var r={topic:"channel/"+e.id+"/"+n.productId,text:i,retained:!0,qos:2};w.a.sendMessage(r),n.subdialogtimer=window.setInterval(function(){w.a.sendMessage(r)},6e5)}})},handleCloseSubdialog:function(){var e=v()({action:"stop_logger"}),t={topic:"channel/"+this.subdialogid+"/"+this.productId,text:e,retained:!0,qos:2};w.a.sendMessage(t),this.subdialog=!1,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null},stopsub:function(e){var t;t=0==e?v()({action:"stop_logger"}):v()({action:"start_logger"});var a={topic:"channel/"+this.subdialogid+"/"+this.productId,text:t,retained:!0,qos:2};w.a.sendMessage(a)},subTopic:function(e,t){var a=this;this.$refs[e].validate(function(r){if(!r)return console.log("error submit!!"),!1;var n="thing/"+a.productId+"/${DevAddr}/"+a.topicform.topic,i=y.a.Object.extend("Product");new y.a.Query(i).get(a.productId).then(function(r){var i={topic:n,type:a.topicform.type,desc:a.topicform.desc},s=[];if(s.push(i),-1==t)s=s.concat(r.attributes.topics),r.set("topics",s);else{var o=r.attributes.topics.concat([]);o[t]=i,r.set("topics",o)}r.save().then(function(t){t&&(a.$message({type:"success",message:"成功"}),a.topicdialogVisible=!1,a.$refs[e].resetFields(),a.topicform.isupdated=-1,a.topicform.topic="",a.topicform.desc="",a.handleClick({name:"second"}))},function(e){Object(A.a)(e)})})})},topicSizeChange:function(e){this.topicstart=1,this.topiclength=e},topicCurrentChange:function(e){this.topicstart=e},updatetopic:function(e,t){this.topicform.topic=e.topic.substr(e.topic.lastIndexOf("/")+1),this.topicform.type=e.type,this.topicform.desc=e.desc,this.topicdialogVisible=!0,this.topicform.isupdated=t},deletetopic:function(e,t){var a=this,r=y.a.Object.extend("Product");new y.a.Query(r).get(this.productId).then(function(r){var n=r.attributes.topics.concat([]);n.splice(t,1),r.set("topics",n),r.save().then(function(t){t&&(a.$message({type:"success",message:"删除成功"}),e._self.$refs["popover-"+e.$index].doClose(),a.handleClick({name:"second"}))},function(e){Object(A.a)(e)})})},testgraphql:function(){var e=this;this.$apollo.query({query:S()(T,(void 0).getValue())}).then(function(e){(void 0).setValue(v()(e,null,4))}).catch(function(t){console.log(t),e.$message.error(t)})},orginRule:function(){var e=this;Object(_.b)().then(function(t){t&&(e.engineData=t)}).catch(function(t){e.$message.error(t.error)})},handleSizeChange:function(e){},handleCurrentChange:function(e){},addEngine:function(){this.$router.push({path:"/rules_engine/addengine",query:{title:"新增",productid:this.productId}})},actions:function(e){var t=[];return e.map(function(e){t.push(e.name)}),t.join(",")},getRowindex:function(e,t,a){if(0==e.columnIndex)return"firstcolumn"},detailRules:function(e){this.$router.push({path:"/rules_engine/checkengine",query:{id:e}})},deleteRule:function(e){var t=this;Object(_.f)(e).then(function(e){e&&(t.$message.success("删除成功"),t.orginRule())}).catch(function(e){t.$message.error(e.error)})}},beforeDestroy:function(){window.clearInterval(this.subtimer),this.subtimer=null,window.clearInterval(this.subdialogtimer),this.subdialogtimer=null}},L=(a("Wr25"),a("ErXj"),a("fJU7"),a("KHd+")),j=Object(L.a)(D,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editproduct"},[a("div",{staticClass:"editheader"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/roles/product"}}},[e._v(e._s(e.$t("route.产品管理")))]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.$t("route.产品详情")))])],1),e._v(" "),a("div",{staticClass:"product"},[a("ul",[a("li",[a("span",[e._v("ProductId:")]),e._v(" "),a("span",[e._v(e._s(e.productId))])]),e._v(" "),a("li",[a("span",[e._v("ProductSecret:")]),e._v(" "),0==e.isshow?a("span",[e._v("\n            ********************\n            "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!0}}},[e._v(e._s(e.$t("product.display")))])],1):a("span",[e._v("\n            "+e._s(e.ProductSecret)+"\n            "),a("el-link",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{underline:!1,type:"primary"},on:{click:function(t){e.isshow=!1}}},[e._v(e._s(e.$t("product.hidden")))])],1)]),e._v(" "),a("li",[a("span",[e._v(e._s(e.$t("product.numberofequipment"))+":")]),e._v(" "),a("span",[e._v("\n            "+e._s(e.form.ProductAll)+"\n            "),a("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{underline:!1,type:"primary"},on:{click:e.goToDevices}},[e._v(e._s(e.$t("product.gotoequipment")))])],1)]),e._v(" "),a("li",[a("div",{staticClass:"block"},[e.productimg?a("el-image",{staticStyle:{width:"250px",height:"200px",position:"relative",top:"-55px","text-align":"center","line-height":"200px"},attrs:{src:e.productimg}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):e._e()],1)])])])],1),e._v(" "),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("product.productinformation"),name:"first"}},[a("div",{staticStyle:{background:"#ffffff",padding:"10px","box-sizing":"border-box"}},[a("div",[a("table",{staticClass:"mailtable",staticStyle:{width:"100%"},attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(e._s(e.$t("product.productname")))]),e._v(" "),a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.name))]),e._v(" "),a("td",{staticClass:"cloumn notbottom"},[e._v(e._s(e.$t("product.nodetype")))]),e._v(" "),1==e.productdetail.nodeType?a("td",{staticClass:"notbottom"},[e._v(e._s(e.$t("product.gateway")))]):a("td",{staticClass:"notbottom"},[e._v(e._s(e.$t("product.equipment")))]),e._v(" "),a("td",{staticClass:"cloumn notbottom"},[e._v(e._s(e.$t("product.addingtime")))]),e._v(" "),a("td",[e._v(e._s(e.productdetail.createdAt))])]),e._v(" "),a("tr",[a("td",{staticClass:"cloumn notbottom"},[e._v(e._s(e.$t("product.classification")))]),e._v(" "),a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.category))]),e._v(" "),a("td",{staticClass:"cloumn notbottom"},[e._v("\n                  "+e._s(e.$t("product.dynamicregistration"))+"\n                  "),a("el-tooltip",{staticStyle:{"margin-left":"5px",color:"#cccccc"},attrs:{content:e.$t("product.text1"),placement:"top",effect:"light"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("td",{staticClass:"notbottom"},[0==e.dynamicReg?a("span",{staticStyle:{color:"#cccccc"}},[e._v(e._s(e.$t("product.close")))]):a("span",[e._v(e._s(e.$t("product.open")))]),e._v(" "),a("el-switch",{attrs:{"active-color":"#5eb058","inactive-color":"#cccccc","active-value":!0,"inactive-value":!1},on:{change:function(t){e.handelUpdate(t,e.dynamicReg)}},model:{value:e.dynamicReg,callback:function(t){e.dynamicReg=t},expression:"dynamicReg"}})],1),e._v(" "),a("td",{staticClass:"cloumn notbottom"},[e._v(e._s(e.$t("product.networking")))]),e._v(" "),"CELLULAR"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v("蜂窝(2G/3G/4G)")]):"WIFI"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v("WiFi")]):"ETHERNET"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v("以太网")]):"LORA"==e.productdetail.netType?a("td",{staticClass:"notbottom"},[e._v("LoRaWAN")]):a("td",{staticClass:"notbottom"},[e._v(e._s(e.productdetail.netType))])]),e._v(" "),a("tr",[a("td",{staticClass:"cloumn"},[e._v(e._s(e.$t("developer.describe")))]),e._v(" "),a("td",{attrs:{colspan:"6"}},[e._v(e._s(e.productdetail.desc))])])])])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"Topic"+e.$t("product.list"),name:"second"}},[a("div",{staticStyle:{background:"#ffffff",padding:"10px","box-sizing":"border-box"}},[a("div",{staticClass:"addtopic",staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.topicdialogVisible=!0}}},[e._v(e._s(e.$t("product.customtopicclass")))])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.topicData.slice((e.topicstart-1)*e.topiclength,e.topicstart*e.topiclength)}},[a("el-table-column",{attrs:{label:"Topic",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.topic.replace("${ProductId}",e.productId)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.operationauthority"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["pub"==t.row.type?a("span",[e._v(e._s(e.$t("product.pub")))]):e._e(),e._v(" "),"sub"==t.row.type?a("span",[e._v(e._s(e.$t("product.sub")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",align:"center",label:e.$t("developer.describe")}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isdef?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.updatetopic(t.row,t.$index)}}},[e._v(e._s(e.$t("developer.edit")))]),e._v(" "),a("el-popover",{ref:"popover-"+t.$index,attrs:{placement:"top",width:"300"}},[a("p",[e._v("确定删除这个"+e._s(t.row.topic)+"Topic类吗？")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t._self.$refs["popover-"+t.$index].doClose()}}},[e._v(e._s(e.$t("product.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.deletetopic(t,t.$index)}}},[e._v(e._s(e.$t("developer.determine")))])],1),e._v(" "),t.row.isdef?e._e():a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v(e._s(e.$t("developer.delete")))])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.topiclength,layout:"total, sizes, prev, pager, next, jumper",total:e.topicData.length},on:{"size-change":e.topicSizeChange,"current-change":e.topicCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("proudct.definetopicclass"),visible:e.topicdialogVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.topicdialogVisible=t}}},[a("div",{staticClass:"topiccontent"},[a("div",{staticStyle:{padding:"10px","box-sizing":"border-box",background:"#e6f9fc","font-size":"16px"}},[a("i",{staticClass:"el-icon-warning"}),e._v("\n              "+e._s(e.$t("product.text2"))+"\n            ")]),e._v(" "),a("div",{staticClass:"topicform"},[a("el-form",{ref:"topicform",attrs:{model:e.topicform,rules:e.topicrule}},[a("el-form-item",{attrs:{label:"Topic类：",prop:"topic"}},[a("el-input",{model:{value:e.topicform.topic,callback:function(t){e.$set(e.topicform,"topic",t)},expression:"topicform.topic"}},[a("template",{slot:"prepend"},[e._v(e._s("thing/"+e.productId+"/${DevAddr}/"))])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.operationauthority"),prop:"type"}},[a("el-select",{attrs:{placeholder:e.$t("product.selectdeviceoperationpermission")},model:{value:e.topicform.type,callback:function(t){e.$set(e.topicform,"type",t)},expression:"topicform.type"}},[a("el-option",{attrs:{label:e.$t("product.sub"),value:"sub"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.pub"),value:"pub"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("developer.describe")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.topicform.desc,callback:function(t){e.$set(e.topicform,"desc",t)},expression:"topicform.desc"}})],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.topicdialogVisible=!1}}},[e._v(e._s(e.$t("developer.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subTopic("topicform",e.topicform.isupdated)}}},[e._v(e._s(e.$t("developer.determine")))])],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("product.physicalmodel"),name:"third"}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.checkschema}},[e._v(e._s(e.$t("product.viewobjectmodel")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.wmxdialogVisible=!0}}},[e._v(e._s(e.$t("product.newcustomattribute")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addcategory}},[e._v(e._s(e.$t("product.newstandardattribute")))])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.wmxData.slice((e.wmxstart-1)*e.wmxlength,e.wmxstart*e.wmxlength),border:"","row-key":"identifier","default-expand-all":!1,"row-class-name":e.getRowClass}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return"struct"==t.row.dataType.type?[a("el-table",{staticStyle:{width:"60%","text-align":"center","box-sizing":"border-box"},attrs:{data:t.row.dataType.specs}},[a("el-table-column",{attrs:{label:e.$t("product.identifier"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.identifier))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.functionaltypes"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$t("product.attribute")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:e.$t("product.functionname"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.datadefinition"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])})],1)]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"identifier",label:e.$t("product.identifier")}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.functionaltypes")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.$t("product.attribute")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:e.$t("product.functionname")}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.datatype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dataType.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.datadefinition")},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.dataType.specs||"double"!=t.row.dataType.type&&"float"!=t.row.dataType.type&&"int"!=t.row.dataType.type?"string"==t.row.dataType.type?a("span",[e._v(e._s(e.$t("product.datalength")+":"+t.row.dataType.size+e.$t("product.byte")))]):"date"==t.row.dataType.type?a("span"):"struct"!=t.row.dataType.type?a("span",[e._v(e._s(t.row.dataType.specs))]):a("span"):a("span",[e._v(e._s(e.$t("product.rangeofvalues")+t.row.dataType.specs.min+"~"+t.row.dataType.specs.max))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deletewmx(t.$index)}}},[e._v(e._s(e.$t("developer.delete")))])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.wmxlength,layout:"total, sizes, prev, pager, next, jumper",total:e.wmxData.length},on:{"size-change":e.wmxSizeChange,"current-change":e.wmxCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("product.addfunction"),visible:e.originwmx,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.originwmx=t}}},[a("div",[a("div",{staticStyle:{margin:"20px 0"}},[a("label",{attrs:{for:""}},[e._v(e._s(e.$t("product.classification")))]),e._v(" "),a("el-cascader",{attrs:{options:e.treeData},on:{change:e.handleChange},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.getPropData(0)}}},[e._v(e._s(e.$t("developer.search")))])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.PropData}},[a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.SuperId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.identifier"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("product.applicabletype"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.CategoryName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.addProCategory(t.row)}}},[e._v(e._s(e.$t("product.add")))])]}}])})],1)],1),e._v(" "),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[10,20,30,50],"page-size":e.productlength,layout:"total, sizes, prev, pager, next, jumper",total:e.producttotal,small:""},on:{"size-change":e.productSizeChange,"current-change":e.productCurrentChange}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(e._s(e.$t("developer.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.originwmx=!1}}},[e._v(e._s(e.$t("developer.determine")))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("product.newcustomattribute"),visible:e.wmxdialogVisible,width:"40%",top:"5vh","before-close":e.wmxhandleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.wmxdialogVisible=t}}},[a("div",{staticClass:"wmxheader"},[a("el-form",{ref:"sizeForm",attrs:{model:e.sizeForm,size:"small",rules:e.sizerule}},[a("el-form-item",{attrs:{label:e.$t("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.sizeForm.identifier,callback:function(t){e.$set(e.sizeForm,"identifier",t)},expression:"sizeForm.identifier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.datatype"),prop:"type"}},[a("el-select",{model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},[a("el-option",{attrs:{label:e.$t("product.struct"),value:"STRUCT"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.init"),value:"INT"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.float"),value:"FLOAT"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.double"),value:"DOUBLE"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.bool"),value:"BOOL"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.enum"),value:"ENUM"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.string"),value:"STRING"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.date"),value:"DATE"}})],1)],1),e._v(" "),0==e.productdetail.nodeType?a("div",[a("el-form-item",{attrs:{label:"数据标识",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"dis"}},[a("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.sizeForm.dis,callback:function(t){e.$set(e.sizeForm,"dis",t)},expression:"sizeForm.dis"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"数据个数"},model:{value:e.sizeForm.dinumber,callback:function(t){e.$set(e.sizeForm,"dinumber",e._n(t))},expression:"sizeForm.dinumber"}})],1)],1)],1)],1):e._e(),e._v(" "),"INT"==e.sizeForm.type||"FLOAT"==e.sizeForm.type||"DOUBLE"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{required:"",label:"取值范围(数值)"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{type:"number",placeholder:e.$t("product.minimumvalue")},model:{value:e.sizeForm.startnumber,callback:function(t){e.$set(e.sizeForm,"startnumber",e._n(t))},expression:"sizeForm.startnumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{type:"number",placeholder:e.$t("product.maximumvalue")},on:{input:function(t){e.changeValue("sizeForm")}},model:{value:e.sizeForm.endnumber,callback:function(t){e.$set(e.sizeForm,"endnumber",e._n(t))},expression:"sizeForm.endnumber"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"步长",prop:"step"}},[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",precision:2,step:.1},model:{value:e.sizeForm.step,callback:function(t){e.$set(e.sizeForm,"step",e._n(t))},expression:"sizeForm.step"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.unit")}},[a("el-select",{attrs:{placeholder:e.$t("product.unit")},model:{value:e.sizeForm.unit,callback:function(t){e.$set(e.sizeForm,"unit",t)},expression:"sizeForm.unit"}},e._l(e.allunit,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.data.Name+"/"+e.attributes.data.Symbol,value:e.attributes.data.Symbol}})}))],1)],1):e._e(),e._v(" "),"BOOL"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.attribute"),required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:e.$t("product.attribute"),readonly:""},model:{value:e.sizeForm.truevalue,callback:function(t){e.$set(e.sizeForm,"truevalue",t)},expression:"sizeForm.truevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$t("product.egopen")},model:{value:e.sizeForm.true,callback:function(t){e.$set(e.sizeForm,"true",t)},expression:"sizeForm.true"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:e.$t("product.attribute"),readonly:""},model:{value:e.sizeForm.falsevalue,callback:function(t){e.$set(e.sizeForm,"falsevalue",t)},expression:"sizeForm.falsevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$t("egclose")},model:{value:e.sizeForm.false,callback:function(t){e.$set(e.sizeForm,"false",t)},expression:"sizeForm.false"}})],1)],1)],1)])],1):e._e(),e._v(" "),"ENUM"==e.sizeForm.type?a("div",[e._l(e.sizeForm.specs,function(t,r){return a("el-form-item",{key:r,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$t("product.attribute")+r,prop:"specs."+r+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:e.$t("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$t("product.attributevalue")+r,prop:"specs."+r+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:e.$t("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-left":"5px","margin-top":"30px"},attrs:{type:"primary",underline:!1,icon:"el-icon-minus"},on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}},[e._v(e._s(e.$t("developer.delete")))])],1)],1)}),e._v(" "),a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain}},[e._v(e._s(e.$t("product.add")))])],2):e._e(),e._v(" "),"STRUCT"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:"JSON对象",required:""}},[a("ul",{staticStyle:{margin:"0","padding-left":"20px"}},e._l(e.sizeForm.struct,function(t,r){return a("li",{key:r,staticStyle:{"list-style":"none",display:"flex"},attrs:{value:"item"}},[a("div",[a("span",[e._v(e._s(e.$t("product.parametername")+":")+"}")]),e._v(" "),a("span",[e._v(e._s(t.name))])]),e._v(" "),a("div",[a("el-link",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,type:"primary"},on:{click:function(a){e.editStruct(t,r)}}},[e._v(e._s(e.$t("developer.edit")))]),e._v(" "),a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(t){e.deleteStruct(r)}}},[e._v(e._s(e.$t("developer.delete")))])],1)])})),e._v(" "),a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:function(t){e.addStruct("structform")}}},[e._v(e._s(e.$t("product.addparameter")))])],1)],1):e._e(),e._v(" "),"STRING"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.datalength"),prop:"string"}},[a("el-input",{attrs:{type:"number"},model:{value:e.sizeForm.string,callback:function(t){e.$set(e.sizeForm,"string",e._n(t))},expression:"sizeForm.string"}},[a("template",{slot:"append"},[e._v(e._s(e.$t("product.byte")))])],2)],1)],1):e._e(),e._v(" "),"DATE"==e.sizeForm.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.timeformat")}},[a("el-input",{attrs:{readonly:""},model:{value:e.sizeForm.date,callback:function(t){e.$set(e.sizeForm,"date",t)},expression:"sizeForm.date"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.readandwritetype"),prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.sizeForm.isread,callback:function(t){e.$set(e.sizeForm,"isread",t)},expression:"sizeForm.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v(e._s(e.$t("product.readandwrite")))]),e._v(" "),a("el-radio",{attrs:{label:"r"}},[e._v(e._s(e.$t("product.onlyread")))])],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.wmxdialogVisible=!1}}},[e._v(e._s(e.$t("developer.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("sizeForm")}}},[e._v(e._s(e.$t("developer.determine")))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.$t("product.addparameter"),visible:e.structdialog,width:"40%",top:"15vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.structdialog=t}}},[a("div",{staticClass:"structheader"},[a("el-form",{ref:"structform",attrs:{model:e.structform,size:"small",rules:e.structrule}},[a("el-form-item",{attrs:{label:e.$t("product.functionname"),prop:"name"}},[a("el-input",{model:{value:e.structform.name,callback:function(t){e.$set(e.structform,"name",t)},expression:"structform.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.identifier"),prop:"identifier"}},[a("el-input",{model:{value:e.structform.identifier,callback:function(t){e.$set(e.structform,"identifier",t)},expression:"structform.identifier"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.datatype"),prop:"type"}},[a("el-select",{model:{value:e.structform.type,callback:function(t){e.$set(e.structform,"type",t)},expression:"structform.type"}},[a("el-option",{attrs:{label:e.$t("product.init"),value:"INT"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.float"),value:"FLOAT"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.double"),value:"DOUBLE"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.bool"),value:"BOOL"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.enum"),value:"ENUM"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.string"),value:"STRING"}}),e._v(" "),a("el-option",{attrs:{label:e.$t("product.date"),value:"DATE"}})],1)],1),e._v(" "),0==e.productdetail.nodeType?a("div",[a("el-form-item",{attrs:{label:"数据标识",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"dis"}},[a("el-input",{attrs:{placeholder:"数据标识"},model:{value:e.structform.dis,callback:function(t){e.$set(e.structform,"dis",t)},expression:"structform.dis"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"数据长度(字节)"},model:{value:e.structform.dinumber,callback:function(t){e.$set(e.structform,"dinumber",e._n(t))},expression:"structform.dinumber"}})],1)],1)],1)],1):e._e(),e._v(" "),"INT"==e.structform.type||"FLOAT"==e.structform.type||"DOUBLE"==e.structform.type?a("div",[a("el-form-item",{attrs:{required:"",label:"取值范围(数值)"}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"startnumber"}},[a("el-input",{attrs:{type:"number",placeholder:e.$t("product.minimumvalue")},on:{input:function(t){e.changeStructValue("structform")}},model:{value:e.structform.startnumber,callback:function(t){e.$set(e.structform,"startnumber",e._n(t))},expression:"structform.startnumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"endnumber"}},[a("el-input",{attrs:{type:"number",placeholder:e.$t("product.maximumvalue")},model:{value:e.structform.endnumber,callback:function(t){e.$set(e.structform,"endnumber",e._n(t))},expression:"structform.endnumber"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"步长",prop:"step"}},[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",precision:2,step:.1},model:{value:e.structform.step,callback:function(t){e.$set(e.structform,"step",e._n(t))},expression:"structform.step"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.unit")}},[a("el-select",{attrs:{placeholder:e.$t("product.unit")},model:{value:e.structform.unit,callback:function(t){e.$set(e.structform,"unit",t)},expression:"structform.unit"}},e._l(e.allunit,function(e,t){return a("el-option",{key:t,attrs:{label:e.attributes.data.Name+"/"+e.attributes.data.Symbol,value:e.attributes.data.Symbol}})}))],1)],1):e._e(),e._v(" "),"BOOL"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.attribute"),required:""}},[a("div",{staticStyle:{height:"40px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:e.$t("product.attributevalue"),readonly:""},model:{value:e.structform.truevalue,callback:function(t){e.$set(e.structform,"truevalue",t)},expression:"structform.truevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$t("product.egopen")},model:{value:e.structform.true,callback:function(t){e.$set(e.structform,"true",t)},expression:"structform.true"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-input",{staticClass:"inputnumber",attrs:{type:"number",placeholder:e.$t("product.attributevalue"),readonly:""},model:{value:e.structform.falsevalue,callback:function(t){e.$set(e.structform,"falsevalue",t)},expression:"structform.falsevalue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"true"}},[a("el-input",{staticClass:"inputnumber",attrs:{placeholder:e.$t("product.egclost")},model:{value:e.structform.false,callback:function(t){e.$set(e.structform,"false",t)},expression:"structform.false"}})],1)],1)],1)])],1):e._e(),e._v(" "),"ENUM"==e.structform.type?a("div",[e._l(e.structform.specs,function(t,r){return a("el-form-item",{key:r,attrs:{required:""}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$t("product.attribute")+r,prop:"specs."+r+".attribute",rules:[{required:!0,message:"输入属性"}]}},[a("el-input",{attrs:{placeholder:e.$t("product.egnumber0")},model:{value:t.attribute,callback:function(a){e.$set(t,"attribute",a)},expression:"item.attribute"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:e.$t("product.attribute")+r,prop:"specs."+r+".attributevalue",rules:[{required:!0,message:"输入属性值"}]}},[a("el-input",{attrs:{placeholder:e.$t("developer.describe")},model:{value:t.attributevalue,callback:function(a){e.$set(t,"attributevalue",a)},expression:"item.attributevalue"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:4}},[a("el-link",{staticStyle:{"margin-left":"5px","margin-top":"30px"},attrs:{type:"primary",underline:!1,icon:"el-icon-minus"},on:{click:function(a){a.preventDefault(),e.removeDomain1(t)}}},[e._v(e._s(e.$t("developer.delete")))])],1)],1)}),e._v(" "),a("el-link",{attrs:{icon:"el-icon-plus",type:"primary",underline:!1},on:{click:e.addDomain1}},[e._v(e._s(e.$t("product.add")))])],2):e._e(),e._v(" "),"STRING"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.datalength"),prop:"string"}},[a("el-input",{attrs:{type:"number"},model:{value:e.structform.string,callback:function(t){e.$set(e.structform,"string",e._n(t))},expression:"structform.string"}},[a("template",{slot:"append"},[e._v(e._s(e.$t("product.byte")))])],2)],1)],1):e._e(),e._v(" "),"DATE"==e.structform.type?a("div",[a("el-form-item",{attrs:{label:e.$t("product.timeformat")}},[a("el-input",{attrs:{readonly:""},model:{value:e.structform.date,callback:function(t){e.$set(e.structform,"date",t)},expression:"structform.date"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("product.readandwritetype"),prop:"isread"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.structform.isread,callback:function(t){e.$set(e.structform,"isread",t)},expression:"structform.isread"}},[a("el-radio",{attrs:{label:"rw"}},[e._v(e._s(e.$t("product.readandwrite")))]),e._v(" "),a("el-radio",{attrs:{label:"r"}},[e._v(e._s(e.$t("product.onlyread")))])],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.structdialog=!1}}},[e._v(e._s(e.$t("developer.cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitStruct("structform")}}},[e._v(e._s(e.$t("developer.determine")))])],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("product.contentparsing"),name:"fourth"}},[a("div",{staticClass:"protolheader"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.addRules}},[a("el-form-item",{attrs:{label:e.$t("product.protocolname"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$t("product.protocolname")},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("plugins.version")}},[a("el-input",{attrs:{placeholder:e.$t("plugins.version")},model:{value:e.formInline.version,callback:function(t){e.$set(e.formInline,"version",t)},expression:"formInline.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("developer.describe")}},[a("el-input",{attrs:{placeholder:e.$t("developer.describe")},model:{value:e.formInline.desc,callback:function(t){e.$set(e.formInline,"desc",t)},expression:"formInline.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.subAce("formInline",!0)}}},[e._v(e._s(e.$t("product.preservation")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.subAce1("formInline")}}},[e._v("设为公共")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.chaxun}},[e._v(e._s(e.$t("product.publicagreementlibrary")))])],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.protol}},[e._v(e._s(e.$t("product.compile")))]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.updatesubdialog}},[e._v("热加载")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"通道热加载",visible:e.protoldialog,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.protoldialog=t}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.protolchannel,"row-class-name":e.getChannelEnable},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.attributes.type?a("span",[e._v(e._s(e.$t("developer.collectionchannel")))]):a("span",[e._v(e._s(e.$t("developer.resourcechannel")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.cType))])]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateAllChannel}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("product.publicagreementlibrary"),visible:e.dialogTableVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{staticStyle:{width:"100%","text-align":"center","margin-top":"20px"},attrs:{data:e.gridData}},[a("el-table-column",{attrs:{label:e.$t("product.protocolname"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("plugins.version"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.version))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.describe"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.data.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.utc2beijing(t.row.attributes.createdAt)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editordata(t.row)}}},[e._v(e._s(e.$t("product.clone")))]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deletedata(t.row.id)}}},[e._v(e._s(e.$t("developer.delete")))])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{padding:"20px 0"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.decoderlength,layout:"total, sizes, prev, pager, next, jumper",total:e.decodertotal},on:{"size-change":e.decoderSizeChange,"current-change":e.devicerCurrentChange}})],1)],1),e._v(" "),a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px","margin-bottom":"0"},attrs:{id:"editor"}},[a("textarea",{staticClass:"ace_text-input"})]),e._v(" "),a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("div",{staticStyle:{color:"#c2be9e",background:"#272822","border-top":"1px solid #dddddd",padding:"5px"}},[a("span",[e._v(e._s(e.$t("product.controloutput")))])]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px","margin-bottom":"0","margin-top":"0"},attrs:{id:"editor2"}},[a("textarea",{staticClass:"ace_text-input"})])])],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("product.physicalaccess"),name:"fiveth"}},[a("div",{staticClass:"productchannel",staticStyle:{"text-align":"right",padding:"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showAllChannel}},[e._v(e._s(e.$t("developer.createchannel")))])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$t("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.attributes.type?a("span",[e._v(e._s(e.$t("developer.collectionchannel")))]):a("span",[e._v(e._s(e.$t("developer.resourcechannel")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.cType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteRelation(t.row)}}},[e._v(e._s(e.$t("developer.remove")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.subProTopic(t.row)}}},[e._v("订阅日志")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.updatesub(t.row)}}},[e._v("重载配置")])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.channellength,layout:"total, sizes, prev, pager, next, jumper",total:e.channeltotal},on:{"size-change":e.channelSizeChange,"current-change":e.channelCurrentChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"物存储",name:"seven"}},[a("div",{staticClass:"productchannel",staticStyle:{"text-align":"right",padding:"10px"}},[a("el-popover",{attrs:{title:"自定义数据模型提示",placement:"right",width:"600",trigger:"hover"},on:{show:e.questionModel}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editorinsert"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini",icon:"el-icon-question"},slot:"reference"},[e._v("自定义数据模型帮助")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resourceShowAllChannel}},[e._v(e._s(e.$t("developer.createchannel")))])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourcechannelData,"row-class-name":e.getChannelEnable}},[a("el-table-column",{attrs:{label:e.$t("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.attributes.type?a("span",[e._v(e._s(e.$t("developer.collectionchannel")))]):a("span",[e._v(e._s(e.$t("developer.resourcechannel")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.cType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation"),width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteRelation(t.row)}}},[e._v(e._s(e.$t("developer.remove")))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.subProTopic(t.row)}}},[e._v("订阅日志")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.customize(t.row)}}},[e._v("自定义模型")])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.resourcelength,layout:"total, sizes, prev, pager, next, jumper",total:e.resourcetotal},on:{"size-change":e.resourcechannelSizeChange,"current-change":e.resourcechannelCurrentChange}})],1)],1)])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("product.viewobjectmodel"),visible:e.schemadialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.schemadialogVisible=t}}},[a("div",[a("div",{staticStyle:{background:"#ffffff"}},[a("label",{attrs:{id:"plug-name"}})]),e._v(" "),a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"400px"},attrs:{id:"editor1"}},[a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.preserve}},[e._v(e._s(e.$t("developer.determine")))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加通道",visible:e.innerVisible,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"addchannel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.allchannelData,height:"400"}},[a("el-table-column",{attrs:{label:e.$t("developer.channelnumber")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channelname")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeladdr")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("channel/"+t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.channeltype")},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.attributes.type?a("span",[e._v(e._s(e.$t("developer.collectionchannel")))]):a("span",[e._v(e._s(e.$t("developer.resourcechannel")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.servicetype")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.attributes.cType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("developer.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.addProductChannel(t.row.id)}}},[e._v(e._s(e.$t("developer.add")))])]}}])})],1),e._v(" "),a("div",{staticClass:"elpagination",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],"page-size":e.allChannellength,layout:"total, sizes, prev, pager, next, jumper",total:e.allChanneltotal},on:{"size-change":e.allChannelSizeChange,"current-change":e.allChannelCurrentChange}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.channelname+"日志",visible:e.subdialog,"before-close":e.handleCloseSubdialog,width:"85%","close-on-click-modal":!1},on:{"update:visible":function(t){e.subdialog=t}}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"300px",width:"100%"},attrs:{id:"subdialog"}},[e._v("                    "),a("textarea",{staticClass:"ace_text-input",staticStyle:{overflow:"scroll"}}),e._v("\n                    ")])]),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{height:"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-switch",{staticStyle:{display:"inline-block","margin-right":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"自动刷新"},on:{change:e.stopsub},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.resourcedialogFormVisible,width:"90%",top:"1vh","close-on-click-modal":!1,"show-close":!1,"before-close":e.closeWuDialog},on:{"update:visible":function(t){e.resourcedialogFormVisible=t}}},[a("el-form",{ref:"resourceform",attrs:{model:e.resourceform}},[a("div",{staticClass:"wumoxing"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"物模型"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editormodel"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"自定义数据模型"}},[a("pre",{staticClass:"ace_editor",staticStyle:{"min-height":"600px"},attrs:{id:"editorcreate"}},[a("el-input",{staticClass:"ace_text-input",attrs:{type:"textarea"}})],1)])],1)])],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeWuDialog}},[e._v("退 出")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v("保 存")])],1)],1)],1)},[],!1,null,"9c033b8c",null);j.options.__file="proddetail.vue";t.default=j.exports},"19n2":function(e,t,a){},ErXj:function(e,t,a){"use strict";var r=a("19n2");a.n(r).a},MPjy:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("X3IP");function n(e){"209"==e.code?(Object(r.Message)({message:"您权限过期,请重新登录",type:"error",duration:2e3}),sessionStorage.removeItem("roles"),sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("list"),location.href="/#/login"):119==e.code?Object(r.Message)({message:"没有操作权限",type:"warning",duration:2e3}):Object(r.Message)({message:e.message,type:"error"})}},Mld3:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return o});var r=a("t3Un");function n(e){var t=e.order,a=e.limit,n=e.skip,i=e.keys,s=e.include,o=e.where;return Object(r.a)({url:"/classes/Project",method:"get",params:{order:t,limit:a,skip:n,keys:i,include:s,where:o}})}function i(e){if("number"==typeof e){e=String(e);var t=/0{8}$/,a=/0{4}$/;return t.test(e)?e.replace(t,"亿"):a.test(e)?e.replace(a,"万"):e}if("string"==typeof e){var r=/万+$/,n=/亿+$/;return n.test(e)?e.replace(n,"00000000"):r.test(e)?e.replace(r,"0000"):e}}function s(e,t,a){return Object(r.a)({url:"/lictool",method:"get",params:{appid:e,appsecret:t,shuwa_iot_software:a}})}function o(e){return Object(r.a)({url:"/licsetup",method:"get",params:{license:e}})}},NTl1:function(e,t,a){},V7Th:function(e,t,a){},Wr25:function(e,t,a){"use strict";var r=a("V7Th");a.n(r).a},fJU7:function(e,t,a){"use strict";var r=a("NTl1");a.n(r).a},"t/Le":function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"g",function(){return u});var r=a("t3Un");function n(){return Object(r.a)({url:"/resource_types",method:"get",params:{}})}function i(e,t,a,n){return Object(r.a)({url:"/rules",method:"post",data:{actions:e,ctx:t,description:a,rawsql:n}})}function s(){return Object(r.a)({url:"/rules",method:"get",params:{}})}function o(e){return Object(r.a)({url:"/rule/"+e,method:"get",params:{}})}function l(e){return Object(r.a)({url:"/rule/"+e,method:"delete",params:{}})}function c(e,t,a,n){return Object(r.a)({url:"/rule_resource",method:"post",data:{config:e,description:t,name:a,type:n}})}function u(e,t,a,n,i,s){return Object(r.a)({url:"/rule_test",method:"post",data:{actions:e,ctx:t,description:a,for:n,name:i,rawsql:s}})}}}]);