(this.webpackJsonp=this.webpackJsonp||[]).push([["chunk-7f39"],{"+iyw":function(t,e,a){},"2iko":function(t,e,a){"use strict";var i=a("Qfm+");a.n(i).a},"2wuc":function(t,e,a){"use strict";a.r(e);var i=a("gDS+"),o=a.n(i),l=a("fe1z"),n=a("v0iw"),s=a.n(n),r=(a("1IWx"),a("MPjy")),c={data:function(){return{pickerOptionsStart:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},treeprops:{value:"objectId",label:"name"},loading:!0,value6:!0,value7:!1,start:0,length:10,total:0,tableData3:[],checktimedialog:!1,dialogVisible:!1,multipleSelection:[],unixtime:"",vcaddrs:[],str:"",addrs:[],vcaddr:"",draw:1,sizeForm:{vcaddr:"",region:"",type:"",ipaddress:"",hbinterval:"",port:"",notonline:"",localmask:"",recalltimes:"",localgateway:"",localip:"",ipgetway:"",remoteport:"",mainchannel:"",tcporudp:"",vctime:"",gddw:"",protocol_type:1},addconcentrator:!1,vcConfig:{vcaddr:"",region:"1",type:2,ipaddress:"127.0.0.1",hbinterval:90,port:9001,notonline:60,localmask:"255.255.000.001",recalltimes:3e3,localgateway:"172.016.023.255",localip:"127.0.0.1",ipgetway:"1",remoteport:16110,mainchannel:1,tcporudp:"0",vctime:"",gddw:"",gylx:"",protocol_type:1},vcaddrid:"",jsondata:{},data:[]}},computed:{treeData:function(){var t=JSON.parse(o()(this.data));return t.filter(function(e){var a=t.filter(function(t){return e.objectId==t.ParentId});return a.length>0&&(e.children=a),0==e.ParentId})}},mounted:function(){this.getAllConcentrator(),this.getDepartment()},methods:{getAllConcentrator:function(){var t=this,e=s.a.Object.extend("Vcon"),a=new s.a.Query(e);""!=this.vcaddr&&a.contains("vcaddr",this.vcaddr),a.skip(this.start),a.limit(this.length),a.count().then(function(e){t.total=e,a.find().then(function(e){t.tableData3=e,t.loading=!1})},function(t){Object(r.a)(t)})},Closechecktime:function(){this.checktimedialog=!1},handleSelectionChange:function(t){this.multipleSelection=t},timestampToTime:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+((e.getDate()+1<=10?"0"+e.getDate():e.getDate())+" ")+((e.getHours()+1<=10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()+1<=10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()+1<=10?"0"+e.getSeconds():e.getSeconds())},handleEdit:function(t,e,a){for(var i in this.vcaddrid=a,this.sizeForm.vcaddr=e.vcaddr,this.sizeForm.ipaddress=e.jsondata.local_ip,this.sizeForm.type=e.jsondata.remote_param.channel_type,this.sizeForm.hbinterval=e.jsondata.hb_interval,this.sizeForm.port=e.jsondata.local_port,this.sizeForm.notonline=e.jsondata.recall_interval,this.sizeForm.localmask=e.jsondata.local_mask,this.sizeForm.recalltimes=e.jsondata.recall_times,this.sizeForm.localgateway=e.jsondata.local_gateway,this.sizeForm.localip=e.jsondata.remote_param.remote_ip,this.sizeForm.ipgetway=String(e.jsondata.get_ip_mod),this.sizeForm.remoteport=e.jsondata.remote_param.remote_port,this.sizeForm.tcporudp=String(e.jsondata.tcp_or_udp),this.sizeForm.region=String(e.jsondata.channel_mod),this.sizeForm.mainchannel=Number(e.jsondata.master_channel),this.sizeForm.vctime=Object(l.q)(e.createdAt),this.sizeForm.gddw=this.getParent(this.data,e.organization.id,[]),e.jsondata.protocol_type?this.sizeForm.protocol_type=Number(e.jsondata.protocol_type):this.sizeForm.protocol_type="",this.dialogVisible=!0,e.jsondata)this.jsondata[i]=e.jsondata[i]},handledetail:function(t,e){this.$router.push({path:"/devicemanage/condetail",query:{vcaddr:e.vcaddr}})},handleSizeChange:function(t){this.length=t,this.getAllConcentrator()},handleCurrentChange:function(t){this.start=(t-1)*this.length,this.getAllConcentrator()},Makesureedit:function(){var t=this;this.jsondata.vcaddr=this.sizeForm.vcaddr,this.jsondata.local_ip=this.sizeForm.ipaddress,this.jsondata.remote_param.channel_type=this.sizeForm.type,this.jsondata.hb_interval=this.sizeForm.hbinterval,this.jsondata.local_port=this.sizeForm.port,this.jsondata.recall_interval=this.sizeForm.notonline,this.jsondata.local_mask=this.sizeForm.localmask,this.jsondata.recall_times=this.sizeForm.recalltimes,this.jsondata.local_gateway=this.sizeForm.localgateway,this.jsondata.remote_param.remote_ip=this.sizeForm.localip,this.jsondata.get_ip_mod=this.sizeForm.ipgetway,this.jsondata.remote_param.remote_port=this.sizeForm.remoteport,this.jsondata.tcp_or_udp=this.sizeForm.tcporudp,this.jsondata.channel_mod=this.sizeForm.region,this.jsondata.master_channel=this.sizeForm.mainchannel,this.jsondata.protocol_type=this.sizeForm.protocol_type;var e=new(s.a.Object.extend("Vcon"));e.id=this.vcaddrid,e.set("jsondata",this.jsondata),e.save().then(function(e){e&&(t.$message({type:"success",message:"编辑成功"}),t.dialogVisible=!1,t.getAllConcentrator())},function(e){"209"==e.code?(t.$message({type:"warning",message:"登陆权限过期，请重新登录"}),t.$router.push({path:"/login"})):119==e.code&&t.$message({type:"error",message:"没有操作权限"})})},search:function(){this.start=0,this.length=10,this.draw++,this.getAllConcentrator()},startdev:function(){var t=this;this.addrs=[],this.multipleSelection.map(function(e){t.addrs.push(e.attributes.vcaddr)}),0==this.addrs.length?this.$message({message:"请勾选您要启动的集中器",type:"warning"}):Object(l.j)(this.addrs).then(function(e){e&&(t.$message({message:"成功启动",type:"success"}),t.getAllConcentrator())}).catch(function(e){t.$message({message:e.error,type:"error"})})},stop:function(){var t=this;this.addrs=[],this.multipleSelection.map(function(e){t.addrs.push(e.attributes.vcaddr)}),0==this.addrs.length?this.$message({message:"请勾选您要启动的集中器",type:"warning"}):Object(l.l)(this.addrs).then(function(e){e&&(t.$message({message:"成功关闭",type:"success"}),t.getAllConcentrator())}).catch(function(e){t.$message({message:e.error,type:"error"})})},checktime:function(){var t=this;this.vcaddrs=[],this.unixtime=Object(l.p)(),0==this.multipleSelection.length?this.str="当前节点所有的集中器":(this.str="",this.multipleSelection.map(function(e){t.str+=e.attributes.vcaddr+",",t.vcaddrs.push(e.attributes.vcaddr)}),this.str=String(this.str).substring(0,this.str.length-1)),this.checktimedialog=!0},connect:function(t){var e=this;Object(l.k)(t).then(function(t){t&&(e.$message({message:"主站连接成功",type:"success"}),e.getAllConcentrator())}).catch(function(t){e.$message({message:t.error,type:"error"})})},submitchecktime:function(){var t=this;this.vcaddrs.length>0?Object(l.m)(Object(l.o)(this.unixtime),this.vcaddrs).then(function(e){e&&(t.$message({message:"校时成功",type:"success"}),t.getAllConcentrator())}).catch(function(e){t.$message({message:e.error,type:"error"})}):Object(l.m)(Object(l.o)(this.unixtime)).then(function(e){e&&(t.$message({message:"校时成功",type:"success"}),t.getAllConcentrator())}).catch(function(e){t.$message({message:e.error,type:"error"})}),this.checktimedialog=!1},uploadadd:function(){this.addconcentrator=!0},addconcen:function(){var t=this,e="",a=this.vcConfig.gddw[this.vcConfig.gddw.length-1],i=s.a.Object.extend("Department"),o=new s.a.Query(i),l=new i;l.id=a,l.set("leafnode",!0),l.save().then(function(t){}),o.get(a).then(function(a){e=a.attributes.alias;var i=new(s.a.Object.extend("Vcon"));i.set("department",e),i.set("organization",l),i.set("vctime",Math.floor(t.vcConfig.vctime/1e3)),i.set("others",{}),i.set("jsondata",{address:"for_test",cbxx:{pns:"",msdiff:0,vcaddr:"",channel:""},channel_mod:Number(t.vcConfig.region),get_ip_mod:Number(t.vcConfig.ipgetway),hb_interval:t.vcConfig.hbinterval,local_gateway:t.vcConfig.localgateway,local_ip:t.vcConfig.localip,local_mask:t.vcConfig.localmask,local_port:Number(t.vcConfig.port),master_channel:Number(t.vcConfig.mainchannel),nodename:"shuwa_dba@172.27.0.8",recall_interval:Number(t.vcConfig.notonline),recall_times:Number(t.vcConfig.recalltimes),register:!1,remote_param:{remote_ip:t.vcConfig.ipaddress,remote_port:Number(t.vcConfig.remoteport),channel_type:t.vcConfig.type},tcp_or_udp:Number(t.vcConfig.tcporudp),protocol_type:t.vcConfig.protocol_type}),i.set("vcaddr",t.vcConfig.vcaddr),i.save().then(function(e){e&&(t.$message.success("创建成功"),t.addconcentrator=!1,t.getAllConcentrator())},function(e){"209"==e.code?(t.$message({type:"warning",message:"登陆权限过期，请重新登录"}),t.$router.push({path:"/login"})):119==e.code?t.$message({type:"error",message:"没有操作权限"}):t.$message.error(e.error)})})},getParent:function(t,e,a){var i=this;return t.map(function(o){o.objectId==e?(a.push(o.objectId),i.getParent(t,o.ParentId,a)):0==o.ParentId&&o.objectId==e&&a.push(o.objectId)}),a.reverse()},getDepartment:function(){var t=this,e=s.a.Object.extend("Department"),a=new s.a.Query(e);a.limit(1e4),a.find().then(function(e){e.map(function(e){var a={};e.createtime=new Date(e.attributes.createdAt).toLocaleDateString(),a.name=e.attributes.name,a.ParentId=e.attributes.ParentId,a.objectId=e.id,a.level=e.attributes.level,a.createtime=e.createtime,t.data.push(a)})},function(e){t.$message({type:"error",message:e.error})})}}},d=(a("ufGX"),a("2iko"),a("KHd+")),m=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"concentrator"},[a("div",{staticClass:"top"},[a("label",{attrs:{for:""}},[t._v(t._s(t.$t("concentrator.concentrator"))+":")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入集中器地址"},model:{value:t.vcaddr,callback:function(e){t.vcaddr=e},expression:"vcaddr"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.getAllConcentrator}},[t._v(t._s(t.$t("concentrator.search")))])],1),t._v(" "),a("div",{staticClass:"section"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.uploadadd}},[t._v(t._s(t.$t("concentrator.add")))]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.startdev}},[t._v(t._s(t.$t("concentrator.start")))]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.stop}},[t._v(t._s(t.$t("concentrator.end")))]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.checktime}},[t._v(t._s(t.$t("concentrator.checktime")))])],1),t._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.tableData3,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.status"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.attributes.jsondata.isonline?a("div",[a("p",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#00cc33","margin-right":"10px","vertical-align":"middle"}}),t._v(" "),a("span",{staticStyle:{color:"#00cc33"}},[t._v(t._s(t.$t("concentrator.isonline")))])]):a("div",[a("p",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#f00","margin-right":"10px","vertical-align":"middle"}}),t._v(" "),a("span",{staticStyle:{color:"#f00"}},[t._v(t._s(t.$t("concentrator.notonline")))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("concentrator.concentrator"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.attributes.vcaddr))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("concentrator.courts"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.attributes.jsondata.address))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("concentrator.onlinemeter"),sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.attributes.others.online&&e.row.attributes.others.total?a("span",[t._v(t._s(e.row.attributes.others.online+"/"+e.row.attributes.others.total))]):a("span",[t._v(t._s("0/0"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.connection"),align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.attributes.jsondata.iscon?a("el-switch",{attrs:{"active-color":"#13ce66",disabled:""},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}}):t._e(),t._v(" "),1!=e.row.attributes.jsondata.iscon?a("el-switch",{attrs:{"active-color":"#cccccc",disabled:""},model:{value:t.value7,callback:function(e){t.value7=e},expression:"value7"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("concentrator.time"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.timestampToTime(e.row.attributes.vctime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:t.$t("concentrator.operation"),align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(a){t.connect(e.row.attributes.vcaddr)}}},[t._v(t._s(t.$t("concentrator.connect")))]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row.attributes,e.row.id)}}},[t._v(t._s(t.$t("concentrator.edit")))]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handledetail(e.$index,e.row.attributes)}}},[t._v(t._s(t.$t("concentrator.detail")))])]}}])})],1)],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-sizes":[10,25,50,100],"page-size":t.length,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.$t("concentrator.concentratordetail"),visible:t.dialogVisible,width:"35%",top:"1vh",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.sizeForm}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.$t("concentrator.basicinformation")))]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:t.$t("concentrator.concentrator")}},[a("el-input",{attrs:{readonly:""},model:{value:t.sizeForm.vcaddr,callback:function(e){t.$set(t.sizeForm,"vcaddr",e)},expression:"sizeForm.vcaddr"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:t.$t("concentrator.powersupply")}},[a("el-cascader",{attrs:{placeholder:"选择供电单位",props:t.treeprops,options:t.treeData,"auto-complete":"off","show-all-levels":!1,"change-on-select":!1},model:{value:t.sizeForm.gddw,callback:function(e){t.$set(t.sizeForm,"gddw",e)},expression:"sizeForm.gddw"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"规约类型"}},[a("el-select",{model:{value:t.sizeForm.protocol_type,callback:function(e){t.$set(t.sizeForm,"protocol_type",e)},expression:"sizeForm.protocol_type"}},[a("el-option",{attrs:{label:"南网计量上行通信规约",value:1}}),t._v(" "),a("el-option",{attrs:{label:" 广东电网集中器上行规约",value:2}}),t._v(" "),a("el-option",{attrs:{label:"国网用采主站与采集终端通信协议",value:3}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"投运时间"}},[a("el-input",{attrs:{readonly:""},model:{value:t.sizeForm.vctime,callback:function(e){t.$set(t.sizeForm,"vctime",e)},expression:"sizeForm.vctime"}})],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("通信信息")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"通信工作模式"}},[a("el-select",{model:{value:t.sizeForm.region,callback:function(e){t.$set(t.sizeForm,"region",e)},expression:"sizeForm.region"}},[a("el-option",{attrs:{label:"客户机模式",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"混合模式",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"服务器模式",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"通道类型"}},[a("el-select",{model:{value:t.sizeForm.type,callback:function(e){t.$set(t.sizeForm,"type",e)},expression:"sizeForm.type"}},[a("el-option",{attrs:{label:"GPRS/CDMA",value:2}}),t._v(" "),a("el-option",{attrs:{label:"PSTN",value:3}}),t._v(" "),a("el-option",{attrs:{label:"Ethernet",value:4}}),t._v(" "),a("el-option",{attrs:{label:"RS232/RS485",value:6}}),t._v(" "),a("el-option",{attrs:{label:"CSD",value:7}}),t._v(" "),a("el-option",{attrs:{label:"Radio",value:8}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端IP地址"}},[a("el-input",{model:{value:t.sizeForm.ipaddress,callback:function(e){t.$set(t.sizeForm,"ipaddress",e)},expression:"sizeForm.ipaddress"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"心跳间隔"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.hbinterval,callback:function(e){t.$set(t.sizeForm,"hbinterval",e)},expression:"sizeForm.hbinterval"}})],1),t._v(" "),a("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"TCP监听端口"}},[a("el-input",{model:{value:t.sizeForm.port,callback:function(e){t.$set(t.sizeForm,"port",e)},expression:"sizeForm.port"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播间隔"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.notonline,callback:function(e){t.$set(t.sizeForm,"notonline",e)},expression:"sizeForm.notonline"}})],1),t._v(" "),a("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端子网掩码"}},[a("el-input",{model:{value:t.sizeForm.localmask,callback:function(e){t.$set(t.sizeForm,"localmask",e)},expression:"sizeForm.localmask"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播次数"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.recalltimes,callback:function(e){t.$set(t.sizeForm,"recalltimes",e)},expression:"sizeForm.recalltimes"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端网关地址"}},[a("el-input",{model:{value:t.sizeForm.localgateway,callback:function(e){t.$set(t.sizeForm,"localgateway",e)},expression:"sizeForm.localgateway"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站通信地址"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.localip,callback:function(e){t.$set(t.sizeForm,"localip",e)},expression:"sizeForm.localip"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"IP地址获取方式"}},[a("el-select",{model:{value:t.sizeForm.ipgetway,callback:function(e){t.$set(t.sizeForm,"ipgetway",e)},expression:"sizeForm.ipgetway"}},[a("el-option",{attrs:{label:"自动设置",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"手动设置",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站端口号"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.sizeForm.remoteport,callback:function(e){t.$set(t.sizeForm,"remoteport",e)},expression:"sizeForm.remoteport"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"TCP/UDP标识"}},[a("el-select",{model:{value:t.sizeForm.tcporudp,callback:function(e){t.$set(t.sizeForm,"tcporudp",e)},expression:"sizeForm.tcporudp"}},[a("el-option",{attrs:{label:"TCP",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"UDP",value:"1"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主通道类型"}},[a("el-select",{model:{value:t.sizeForm.mainchannel,callback:function(e){t.$set(t.sizeForm,"mainchannel",e)},expression:"sizeForm.mainchannel"}},[a("el-option",{attrs:{label:"虚拟集中器通道",value:1}}),t._v(" "),a("el-option",{attrs:{label:"物理集中器通道",value:2}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.Makesureedit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增集中器",visible:t.addconcentrator,width:"35%",top:"1vh",center:""},on:{"update:visible":function(e){t.addconcentrator=e}}},[a("el-form",{ref:"form",attrs:{model:t.vcConfig}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("基本信息")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"集中器地址"}},[a("el-input",{model:{value:t.vcConfig.vcaddr,callback:function(e){t.$set(t.vcConfig,"vcaddr",e)},expression:"vcConfig.vcaddr"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"供电单位"}},[a("el-cascader",{attrs:{placeholder:"选择供电单位",props:t.treeprops,options:t.treeData,"show-all-levels":!1,"change-on-select":!1},model:{value:t.vcConfig.gddw,callback:function(e){t.$set(t.vcConfig,"gddw",e)},expression:"vcConfig.gddw"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"投运时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"集中器时间","value-format":"timestamp","picker-options":t.pickerOptionsStart},model:{value:t.vcConfig.vctime,callback:function(e){t.$set(t.vcConfig,"vctime",e)},expression:"vcConfig.vctime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"规约类型"}},[a("el-select",{model:{value:t.vcConfig.protocol_type,callback:function(e){t.$set(t.vcConfig,"protocol_type",e)},expression:"vcConfig.protocol_type"}},[a("el-option",{attrs:{label:"南网计量上行通信规约",value:1}}),t._v(" "),a("el-option",{attrs:{label:" 广东电网集中器上行规约",value:2}}),t._v(" "),a("el-option",{attrs:{label:"国网用采主站与采集终端通信协议",value:3}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("通信信息")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"通信工作模式"}},[a("el-select",{model:{value:t.vcConfig.region,callback:function(e){t.$set(t.vcConfig,"region",e)},expression:"vcConfig.region"}},[a("el-option",{attrs:{label:"客户机模式",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"混合模式",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"服务器模式",value:"3"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"通道类型"}},[a("el-select",{model:{value:t.vcConfig.type,callback:function(e){t.$set(t.vcConfig,"type",e)},expression:"vcConfig.type"}},[a("el-option",{attrs:{label:"GPRS/CDMA",value:2}}),t._v(" "),a("el-option",{attrs:{label:"PSTN",value:3}}),t._v(" "),a("el-option",{attrs:{label:"Ethernet",value:4}}),t._v(" "),a("el-option",{attrs:{label:"RS232/RS485",value:6}}),t._v(" "),a("el-option",{attrs:{label:"CSD",value:7}}),t._v(" "),a("el-option",{attrs:{label:"Radio",value:8}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端IP地址"}},[a("el-input",{model:{value:t.vcConfig.ipaddress,callback:function(e){t.$set(t.vcConfig,"ipaddress",e)},expression:"vcConfig.ipaddress"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"心跳间隔"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.vcConfig.hbinterval,callback:function(e){t.$set(t.vcConfig,"hbinterval",e)},expression:"vcConfig.hbinterval"}})],1),t._v(" "),a("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"TCP监听端口"}},[a("el-input",{model:{value:t.vcConfig.port,callback:function(e){t.$set(t.vcConfig,"port",e)},expression:"vcConfig.port"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播间隔"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.vcConfig.notonline,callback:function(e){t.$set(t.vcConfig,"notonline",e)},expression:"vcConfig.notonline"}})],1),t._v(" "),a("span",{staticStyle:{"line-height":"45px"}},[t._v("秒")])],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端子网掩码"}},[a("el-input",{model:{value:t.vcConfig.localmask,callback:function(e){t.$set(t.vcConfig,"localmask",e)},expression:"vcConfig.localmask"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"掉线重播次数"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.vcConfig.recalltimes,callback:function(e){t.$set(t.vcConfig,"recalltimes",e)},expression:"vcConfig.recalltimes"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"终端网关地址"}},[a("el-input",{model:{value:t.vcConfig.localgateway,callback:function(e){t.$set(t.vcConfig,"localgateway",e)},expression:"vcConfig.localgateway"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站通信地址"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.vcConfig.localip,callback:function(e){t.$set(t.vcConfig,"localip",e)},expression:"vcConfig.localip"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"IP地址获取方式"}},[a("el-select",{model:{value:t.vcConfig.ipgetway,callback:function(e){t.$set(t.vcConfig,"ipgetway",e)},expression:"vcConfig.ipgetway"}},[a("el-option",{attrs:{label:"自动设置",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"手动设置",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主站端口号"}},[a("el-input",{staticStyle:{"padding-right":"0"},model:{value:t.vcConfig.remoteport,callback:function(e){t.$set(t.vcConfig,"remoteport",e)},expression:"vcConfig.remoteport"}})],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"TCP/UDP标识"}},[a("el-select",{model:{value:t.vcConfig.tcporudp,callback:function(e){t.$set(t.vcConfig,"tcporudp",e)},expression:"vcConfig.tcporudp"}},[a("el-option",{attrs:{label:"TCP",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"UDP",value:"1"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"30px"},attrs:{label:"主通道类型"}},[a("el-select",{model:{value:t.vcConfig.mainchannel,callback:function(e){t.$set(t.vcConfig,"mainchannel",e)},expression:"vcConfig.mainchannel"}},[a("el-option",{attrs:{label:"虚拟集中器通道",value:1}}),t._v(" "),a("el-option",{attrs:{label:"物理集中器通道",value:2}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.addconcentrator=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addconcen}},[t._v("新增")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"校时",visible:t.checktimedialog,width:"30%","before-close":t.Closechecktime},on:{"update:visible":function(e){t.checktimedialog=e}}},[a("div",[a("h3",[t._v("集中器地址")]),t._v(" "),a("el-input",{attrs:{disabled:""},model:{value:t.str,callback:function(e){t.str=e},expression:"str"}})],1),t._v(" "),a("div",[a("h3",[t._v("Unix时间戳")]),t._v(" "),a("el-input",{model:{value:t.unixtime,callback:function(e){t.unixtime=e},expression:"unixtime"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},on:{click:function(e){t.checktimedialog=!1}}},[t._v("关 闭")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.submitchecktime()}}},[t._v("提 交")])],1)])],2)},[],!1,null,"f3d0d38e",null);m.options.__file="concentrator.vue";e.default=m.exports},32:function(t,e){},33:function(t,e){},MPjy:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var i=a("X3IP");function o(t){"209"==t.code?(Object(i.Message)({message:"您权限过期,请重新登录",type:"error",duration:2e3}),sessionStorage.removeItem("roles"),sessionStorage.removeItem("username"),sessionStorage.removeItem("token"),sessionStorage.removeItem("list"),location.href="/#/login"):119==t.code?Object(i.Message)({message:"没有操作权限",type:"warning",duration:2e3}):Object(i.Message)({message:t.message,type:"error"})}},"Qfm+":function(t,e,a){},ufGX:function(t,e,a){"use strict";var i=a("+iyw");a.n(i).a}}]);